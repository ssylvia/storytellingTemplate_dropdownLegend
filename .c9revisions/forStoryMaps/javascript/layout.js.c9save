{"ts":1353954366426,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"  dojo.provide(\"utilities.layout\");\n\n  dojo.require(\"esri.map\");\n  dojo.require(\"esri.layout\");\n  dojo.require(\"esri.widgets\");\n  dojo.require(\"esri.arcgis.utils\");\n  dojo.requireLocalization(\"esriTemplate\",\"template\");\n\n  //Jquery Layout\n    $(document).ready(function(e) {\n      $(\"#legendToggle\").click(function(){\n    \tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });\n\n  utilities.layout = {};\n  dojo.mixin(utilities.layout,{\n\n      map:null,\n      urlObject:null,\n      i18n:null,\n\n      initMap:function() {\n       utilities.layout.patchID();\n\n       //get the localization strings\n  \t   i18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\n\n\t   dojo.byId('loading').innerHTML = i18n.viewer.loading.message;\n\t   dojo.byId('legTogText').innerHTML = i18n.viewer.legToggle.down;\n\n       if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\n         configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\n       }\n       esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);\n\n       if(!configOptions.sharingurl){\n         configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\n       }\n       esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\n\n       if(!configOptions.proxyurl){\n         configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\n       }\n\n       esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\n\n       esri.config.defaults.io.alwaysUseProxy = false;\n\n       urlObject = esri.urlToObject(document.location.href);\n       urlObject.query = urlObject.query || {};\n\n       if(urlObject.query.title){\n         configOptions.title = urlObject.query.title;\n       }\n       if(urlObject.query.subtitle){\n         configOptions.subtitle = urlObject.query.subtitle;\n       }\n\t   if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;\n       }\n       if(urlObject.query.webmap){\n         configOptions.webmap = urlObject.query.webmap;\n       }\n       if(urlObject.query.bingMapsKey){\n         configOptions.bingmapskey = urlObject.query.bingMapsKey;\n       }\n\n\t   \t   //is an appid specified - if so read json from there\n\t  if(configOptions.appid || (urlObject.query && urlObject.query.appid)){\n\t\tvar appid = configOptions.appid || urlObject.query.appid;\n\t\tvar requestHandle = esri.request({\n\t\t  url: configOptions.sharingurl + \"/\" + appid + \"/data\",\n\t\t  content: {f:\"json\"},\n\t\t  callbackParamName:\"callback\",\n\t\t  load: function(response){\n               if(response.values.webmap !== undefined){configOptions.webmap = response.values.webmap;}\n\t\t\t   if(response.values.title !== undefined){configOptions.title = response.values.title;}\n\t\t\t   if(response.values.subtitle !== undefined){configOptions.subtitle = response.values.subtitle;}\n\t\t\t   if(response.values.legend !== undefined){configOptions.legend = response.values.legend;}\n\n\t\t\t   utilities.layout.createMap();\n\t\t  },\n\t\t  error: function(response){\n\t\t\tvar e = response.message;\n\t\t   alert(i18n.viewer.errors.createMap +  response.message);\n\t\t  }\n\t\t});\n\t\t }else{\n\t\t\tutilities.layout.createMap();\n\t\t }\n\t },\n\n     createMap: function(){\n\n       if (configOptions.legend === \"false\" || configOptions.legend === false){\n           $(\"#legendCon\").hide();\n\t   }\n\n\t   var mapDeferred = esri.arcgis.utils.createMap(configOptions.webmap, \"map\", {\n         mapOptions: {\n           slider: true,\n           sliderStyle:\"small\",\n           nav: false,\n           wrapAround180:true\n         },\n         ignorePopups:false,\n         bingMapsKey: configOptions.bingmapskey\n       });\n\n       mapDeferred.addCallback(function (response) {\n\n\t\t document.title = configOptions.title|| response.itemInfo.item.title || \"\";\n         dojo.byId(\"title\").innerHTML = configOptions.title ||response.itemInfo.item.title || \"\";\n         dojo.byId(\"subtitle\").innerHTML = configOptions.subtitle|| response.itemInfo.item.snippet || \"\";\n\n         map = response.map;\n\n\t\t dojo.connect(map,\"onUpdateEnd\",utilities.layout.hideLoader);\n\n         var layers = response.itemInfo.itemData.operationalLayers;\n         if(map.loaded){\n           utilities.layout.initUI(layers);\n         }\n         else{\n           dojo.connect(map,\"onLoad\",function(){\n             utilities.layout.initUI(layers);\n           });\n         }\n         //resize the map when the browser resizes\n         dojo.connect(dijit.byId('map'), 'resize', map,map.resize);\n       });\n\n       mapDeferred.addErrback(function (error) {\n         alert(i18n.viewer.errors.createMap + dojo.toJson(error.message));\n       });\n\n     },\n\n     initUI: function(layers) {\n       //add chrome theme for popup\n       dojo.addClass(map.infoWindow.domNode, \"chrome\");\n       //add the scalebar\n       var scalebar = new esri.dijit.Scalebar({\n         map: map,\n         scalebarUnit:i18n.viewer.main.scaleBarUnits //metric or english\n       });\n\n       var layerInfo = utilities.layout.buildLayersList(layers);\n\n       if(layerInfo.length > 0){\n         var legendDijit = new esri.dijit.Legend({\n           map:map,\n           layerInfos:layerInfo\n         },\"legendDiv\");\n         legendDijit.startup();\n       }\n       else{\n         $(\"#legendToggle\").hide();\n       }\n     },\n\n     //build a list of layers to dispaly in the legend\n  buildLayersList: function(layers){\n\n //layers  arg is  response.itemInfo.itemData.operationalLayers;\n  var layerInfos = [];\n  dojo.forEach(layers, function (mapLayer, index) {\n      var layerInfo = {};\n      if (mapLayer.featureCollection && mapLayer.type !== \"CSV\") {\n        if (mapLayer.featureCollection.showLegend === true) {\n            dojo.forEach(mapLayer.featureCollection.layers, function (fcMapLayer) {\n              if (fcMapLayer.showLegend !== false) {\n                  layerInfo = {\n                      \"layer\": fcMapLayer.layerObject,\n                      \"title\": mapLayer.title,\n                      \"defaultSymbol\": false\n                  };\n                  if (mapLayer.featureCollection.layers.length > 1) {\n                      layerInfo.title += \" - \" + fcMapLayer.layerDefinition.name;\n                  }\n                  layerInfos.push(layerInfo);\n              }\n            });\n          }\n      } else if (mapLayer.showLegend !== false && mapLayer.layerObject) {\n      var showDefaultSymbol = false;\n      if (mapLayer.layerObject.version < 10.1 && (mapLayer.layerObject instanceof esri.layers.ArcGISDynamicMapServiceLayer || mapLayer.layerObject instanceof esri.layers.ArcGISTiledMapServiceLayer)) {\n        showDefaultSymbol = true;\n      }\n      layerInfo = {\n        \"layer\": mapLayer.layerObject,\n        \"title\": mapLayer.title,\n        \"defaultSymbol\": showDefaultSymbol\n      };\n        //does it have layers too? If so check to see if showLegend is false\n        if (mapLayer.layers) {\n            var hideLayers = dojo.map(dojo.filter(mapLayer.layers, function (lyr) {\n                return (lyr.showLegend === false);\n            }), function (lyr) {\n                return lyr.id;\n            });\n            if (hideLayers.length) {\n                layerInfo.hideLayers = hideLayers;\n            }\n        }\n        layerInfos.push(layerInfo);\n    }\n  });\n  return layerInfos;\n  },\n\n  patchID: function() {  //patch id manager for use in apps.arcgis.com\n       esri.id._isIdProvider = function(server, resource) {\n       // server and resource are assumed one of portal domains\n\n       var i = -1, j = -1;\n\n       dojo.forEach(this._gwDomains, function(domain, idx) {\n         if (i === -1 && domain.regex.test(server)) {\n           i = idx;\n         }\n         if (j === -1 && domain.regex.test(resource)) {\n           j = idx;\n         }\n       });\n\n       var retVal = false;\n\n       if (i > -1 && j > -1) {\n         if (i === 0 || i === 4) {\n           if (j === 0 || j === 4) {\n             retVal = true;\n           }\n         }\n         else if (i === 1) {\n           if (j === 1 || j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 2) {\n           if (j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 3) {\n           if (j === 3) {\n             retVal = true;\n           }\n         }\n       }\n\n       return retVal;\n     };\n    },\n\n    hideLoader:function(){\n      $(\"#loadingCon\").hide();\n\t}\n\n\n  });"]],"start1":0,"start2":0,"length1":0,"length2":8565}]],"length":8565}
{"contributors":[],"silentsave":true,"ts":1353954415254,"patch":[[{"diffs":[[-1,"  dojo.provide(\"utilities.layout\");\n\n"],[0,"  do"]],"start1":0,"start2":0,"length1":41,"length2":4},{"diffs":[[0,"i.map\");"],[1,"\r"],[0,"\n  dojo."]],"start1":19,"start2":19,"length1":16,"length2":17},{"diffs":[[0,"ayout\");"],[1,"\r"],[0,"\n  dojo."]],"start1":51,"start2":51,"length1":16,"length2":17},{"diffs":[[0,"i.widgets\");"],[1,"\r"],[0,"\n  dojo.requ"]],"start1":80,"start2":80,"length1":24,"length2":25},{"diffs":[[0,"utils\");"],[1,"\r"],[0,"\n  dojo."]],"start1":122,"start2":122,"length1":16,"length2":17},{"diffs":[[0,"e\");"],[-1,"\n\n  //Jquery Layout\n    $(document).ready(function(e"],[1,"\r\n\r\n\r\n     var map, urlObjects, i18n;\r\n\r\n     function initMap("],[0,") {"],[1,"\r"],[0,"\n      "],[-1,"$(\"#legendToggle\").click("],[1," patchID();\r\n\r\n       dojo.some([\"ar\",\"he\"], "],[0,"func"]],"start1":182,"start2":182,"length1":95,"length2":127},{"diffs":[[0,"ion("],[1,"l"],[0,"){"],[1,"\r"],[0,"\n    "],[-1,"\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });\n\n  utilities.layout = {};\n  dojo.mixin(utilities.layout,{\n\n      map:null,\n      urlObject:null,\n      i18n:null,\n\n      initMap:function() {\n       utilities.layout.patchID();\n"],[1,"     if(dojo.locale.indexOf(l) !== -1){\r\n           configOptions.isRightToLeft = true;\r\n           return true;\r\n         }\r\n       });\r\n       var dirNode = document.getElementsByTagName(\"html\")[0];\r\n       if(configOptions.isRightToLeft){\r\n         dirNode.setAttribute(\"dir\",\"rtl\");\r\n         dojo.addClass( dirNode,\"esriRtl\");\r\n         //Page Specific\r\n         dojo.attr(dojo.byId(\"legendCon\"),\"dir\",\"rtl\");\r\n       }else{\r\n         dirNode.setAttribute(\"dir\",\"ltr\");\r\n         dojo.addClass(dirNode,\"esriLtr\");\r\n         //Page Specific\r\n         dojo.attr(dojo.byId(\"legendCon\"),\"dir\",\"ltr\");\r\n       }\r\n\r"],[0,"\n   "]],"start1":310,"start2":310,"length1":410,"length2":631},{"diffs":[[0," strings"],[1,"\r"],[0,"\n  \t   i"]],"start1":967,"start2":967,"length1":16,"length2":17},{"diffs":[[0,"plate\");"],[-1,"\n"],[1,"\r\n\r"],[0,"\n\t   doj"]],"start1":1035,"start2":1035,"length1":17,"length2":19},{"diffs":[[0,"message;"],[1,"\r"],[0,"\n\t   doj"]],"start1":1104,"start2":1104,"length1":16,"length2":17},{"diffs":[[0,"le.down;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":1173,"start2":1173,"length1":17,"length2":19},{"diffs":[[0,"ttps:\"){"],[1,"\r"],[0,"\n       "]],"start1":1255,"start2":1255,"length1":16,"length2":17},{"diffs":[[0,"ttps:');"],[1,"\r"],[0,"\n       "]],"start1":1360,"start2":1360,"length1":16,"length2":17},{"diffs":[[0,"ps:');\r\n       }"],[1,"\r"],[0,"\n       esri.con"]],"start1":1362,"start2":1362,"length1":32,"length2":33},{"diffs":[[0,"iceurl);"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":1483,"start2":1483,"length1":17,"length2":19},{"diffs":[[0,"sharingurl){"],[1,"\r"],[0,"\n         co"]],"start1":1520,"start2":1520,"length1":24,"length2":25},{"diffs":[[0,"/items\";"],[1,"\r"],[0,"\n       "]],"start1":1630,"start2":1630,"length1":16,"length2":17},{"diffs":[[0,"tems\";\r\n       }"],[1,"\r"],[0,"\n       esri.arc"]],"start1":1632,"start2":1632,"length1":32,"length2":33},{"diffs":[[0,".sharingurl;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       if(!"]],"start1":1700,"start2":1700,"length1":25,"length2":27},{"diffs":[[0,"oxyurl){"],[1,"\r"],[0,"\n       "]],"start1":1743,"start2":1743,"length1":16,"length2":17},{"diffs":[[0,"/proxy\";"],[1,"\r"],[0,"\n       "]],"start1":1839,"start2":1839,"length1":16,"length2":17},{"diffs":[[0,"roxy\";\r\n       }"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       esri.con"]],"start1":1841,"start2":1841,"length1":33,"length2":35},{"diffs":[[0,"roxyurl;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":1919,"start2":1919,"length1":17,"length2":19},{"diffs":[[0,"seProxy = false;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       urlObjec"]],"start1":1969,"start2":1969,"length1":33,"length2":35},{"diffs":[[0,"n.href);"],[1,"\r"],[0,"\n       "]],"start1":2041,"start2":2041,"length1":16,"length2":17},{"diffs":[[0,"y || {};"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":2090,"start2":2090,"length1":17,"length2":19},{"diffs":[[0,"uery.title){"],[1,"\r"],[0,"\n         co"]],"start1":2123,"start2":2123,"length1":24,"length2":25},{"diffs":[[0,"query.title;"],[1,"\r"],[0,"\n       }\n  "]],"start1":2178,"start2":2178,"length1":24,"length2":25},{"diffs":[[0,"title;\r\n       }"],[1,"\r"],[0,"\n       if(urlOb"]],"start1":2184,"start2":2184,"length1":32,"length2":33},{"diffs":[[0,"btitle){"],[1,"\r"],[0,"\n       "]],"start1":2230,"start2":2230,"length1":16,"length2":17},{"diffs":[[0,"  configOptions."],[-1,"sub"],[0,"title = urlObjec"]],"start1":2247,"start2":2247,"length1":35,"length2":32},{"diffs":[[0,"tle;"],[-1,"\n       }\n\t   if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;"],[1,"\r"],[0,"\n   "]],"start1":2292,"start2":2292,"length1":105,"length2":9},{"diffs":[[0,"title;\r\n       }"],[1,"\r"],[0,"\n       if(urlOb"]],"start1":2290,"start2":2290,"length1":32,"length2":33},{"diffs":[[0,"webmap){"],[1,"\r"],[0,"\n       "]],"start1":2334,"start2":2334,"length1":16,"length2":17},{"diffs":[[0,".webmap;"],[1,"\r"],[0,"\n       "]],"start1":2391,"start2":2391,"length1":16,"length2":17},{"diffs":[[0,"ebmap;\r\n       }"],[1,"\r"],[0,"\n       if(urlOb"]],"start1":2393,"start2":2393,"length1":32,"length2":33},{"diffs":[[0,"ery."],[-1,"bingMapsKey"],[1,"legend"],[0,"){"],[1,"\r"],[0,"\n   "]],"start1":2433,"start2":2433,"length1":21,"length2":17},{"diffs":[[0,"Options."],[-1,"bingmapskey"],[1,"legend"],[0," = urlOb"]],"start1":2462,"start2":2462,"length1":27,"length2":22},{"diffs":[[0,"ery."],[-1,"bingMapsKey;"],[1,"legend;\r"],[0,"\n   "]],"start1":2491,"start2":2491,"length1":20,"length2":16},{"diffs":[[0,"   }"],[1,"\r"],[0,"\n"],[-1,"\n\t"],[0,"   "],[-1,"\t"],[0,"   "],[-1,"//is an appid specified - if so read json from there\n\t  if(configOptions.appid || (urlObject.query && urlObject.query.appid)){\n\t\tvar appid = configOptions.appid || urlObject.query.appid;\n\t\tvar requestHandle = esri.request({\n\t\t  url: configOptions.sharingurl + \"/\" + appid + \"/data\",\n\t\t  content: {f:\"json\"},\n\t\t  callbackParamName:\"callback\",\n\t\t  load: function(response"],[1," if(urlObject.query.bingMapsKey"],[0,"){"],[1,"\r"],[0,"\n   "]],"start1":2508,"start2":2508,"length1":389,"length2":50},{"diffs":[[0,"    "],[-1,"      if(response.values.webmap !== undefined){configOptions.webmap = response.values.webmap;}\n\t\t\t   if(response.values.title !== undefined){configOptions.title = response.values.title;}\n\t\t\t   if(response.values.subtitle !== undefined){configOptions.subtitle = response.values.subtitle;}\n\t\t\t   if(response.values.legend !== undefined){configOptions.legend = response.values.legend;}\n\n\t\t\t   utilities.layout.createMap();\n\t\t  },\n\t\t  error: function(response){\n\t\t\tvar e = response.message;\n\t\t   alert(i18n.viewer.errors.createMap +  response.message);\n\t\t  }\n\t\t});\n\t\t }else{\n\t\t\tutilities.layout.createMap();\n\t\t }\n\t },\n\n     createMap: function(){\n"],[1,"configOptions.bingmapskey = urlObject.query.bingMapsKey;\r\n       }\r\n\r"],[0,"\n   "]],"start1":2560,"start2":2560,"length1":651,"length2":77},{"diffs":[[0," false){"],[1,"\r"],[0,"\n    "],[-1,"    "],[1,"\t"],[0,"   $(\"#l"]],"start1":2705,"start2":2705,"length1":25,"length2":23},{"diffs":[[0,"e();"],[1,"\r"],[0,"\n\t   }"],[-1,"\n"],[1,"\r\n\r"],[0,"\n\t  "]],"start1":2742,"start2":2742,"length1":15,"length2":18},{"diffs":[[0,"\"map\", {"],[1,"\r"],[0,"\n       "]],"start1":2829,"start2":2829,"length1":16,"length2":17},{"diffs":[[0,"tions: {"],[1,"\r"],[0,"\n       "]],"start1":2853,"start2":2853,"length1":16,"length2":17},{"diffs":[[0,"r: true,"],[1,"\r"],[0,"\n       "]],"start1":2879,"start2":2879,"length1":16,"length2":17},{"diffs":[[0,"\"small\","],[1,"\r"],[0,"\n       "]],"start1":2912,"start2":2912,"length1":16,"length2":17},{"diffs":[[0," nav: false,"],[1,"\r"],[0,"\n           "]],"start1":2932,"start2":2932,"length1":24,"length2":25},{"diffs":[[0,"180:true"],[1,"\r"],[0,"\n       "]],"start1":2967,"start2":2967,"length1":16,"length2":17},{"diffs":[[0,"      },"],[1,"\r"],[0,"\n       "]],"start1":2980,"start2":2980,"length1":16,"length2":17},{"diffs":[[0,"s:false,"],[1,"\r"],[0,"\n       "]],"start1":3010,"start2":3010,"length1":16,"length2":17},{"diffs":[[0,"gmapskey"],[1,"\r"],[0,"\n       "]],"start1":3059,"start2":3059,"length1":16,"length2":17},{"diffs":[[0,"skey\r\n       });"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       mapDefer"]],"start1":3063,"start2":3063,"length1":33,"length2":35},{"diffs":[[0,"ponse) {"],[-1,"\n"],[1,"\r\n\r"],[0,"\n\t\t docu"]],"start1":3127,"start2":3127,"length1":17,"length2":19},{"diffs":[[0,"tem.title || \"\";"],[1,"\r"],[0,"\n         dojo.b"]],"start1":3200,"start2":3200,"length1":32,"length2":33},{"diffs":[[0,"e || \"\";"],[1,"\r"],[0,"\n       "]],"start1":3307,"start2":3307,"length1":16,"length2":17},{"diffs":[[0,"t || \"\";"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":3414,"start2":3414,"length1":17,"length2":19},{"diffs":[[0,"nse.map;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n\t\t dojo"]],"start1":3446,"start2":3446,"length1":17,"length2":19},{"diffs":[[0,"ateEnd\","],[-1,"utilities.layout."],[0,"hideLoad"]],"start1":3484,"start2":3484,"length1":33,"length2":16},{"diffs":[[0,"Loader);"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":3496,"start2":3496,"length1":17,"length2":19},{"diffs":[[0,"ionalLayers;"],[1,"\r"],[0,"\n         if"]],"start1":3563,"start2":3563,"length1":24,"length2":25},{"diffs":[[0,"loaded){"],[1,"\r"],[0,"\n       "]],"start1":3593,"start2":3593,"length1":16,"length2":17},{"diffs":[[0,"        "],[-1,"utilities.layout."],[0,"initUI(l"]],"start1":3606,"start2":3606,"length1":33,"length2":16},{"diffs":[[0," initUI(layers);"],[1,"\r"],[0,"\n         }\n    "]],"start1":3613,"start2":3613,"length1":32,"length2":33},{"diffs":[[0,"rs);\r\n         }"],[1,"\r"],[0,"\n         else{\n"]],"start1":3625,"start2":3625,"length1":32,"length2":33},{"diffs":[[0,"\r\n         else{"],[1,"\r"],[0,"\n           dojo"]],"start1":3641,"start2":3641,"length1":32,"length2":33},{"diffs":[[0,",function(){"],[1,"\r"],[0,"\n           "]],"start1":3695,"start2":3695,"length1":24,"length2":25},{"diffs":[[0,"        "],[-1,"utilities.layout."],[0,"initUI(l"]],"start1":3714,"start2":3714,"length1":33,"length2":16},{"diffs":[[0,"layers);"],[1,"\r"],[0,"\n       "]],"start1":3729,"start2":3729,"length1":16,"length2":17},{"diffs":[[0,"\r\n           });"],[1,"\r"],[0,"\n         }\n    "]],"start1":3737,"start2":3737,"length1":32,"length2":33},{"diffs":[[0," });\r\n         }"],[1,"\r"],[0,"\n         //resi"]],"start1":3749,"start2":3749,"length1":32,"length2":33},{"diffs":[[0," resizes"],[1,"\r"],[0,"\n       "]],"start1":3809,"start2":3809,"length1":16,"length2":17},{"diffs":[[0,"resize);"],[1,"\r"],[0,"\n       "]],"start1":3878,"start2":3878,"length1":16,"length2":17},{"diffs":[[0,"ze);\r\n       });"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       mapDefer"]],"start1":3882,"start2":3882,"length1":33,"length2":35},{"diffs":[[0,"on (error) {"],[1,"\r"],[0,"\n         al"]],"start1":3938,"start2":3938,"length1":24,"length2":25},{"diffs":[[0,"ssage));"],[1,"\r"],[0,"\n       "]],"start1":4018,"start2":4018,"length1":16,"length2":17},{"diffs":[[0," });"],[-1,"\n"],[1,"\r\n\r"],[0,"\n     }"],[-1,",\n\n     initUI:"],[1,"\r\n\r\n\r\n    "],[0," fun"]],"start1":4034,"start2":4034,"length1":31,"length2":28},{"diffs":[[0,"\n\r\n     function"],[1," initUI"],[0,"(layers) {\n     "]],"start1":4051,"start2":4051,"length1":32,"length2":39},{"diffs":[[0,"initUI(layers) {"],[1,"\r"],[0,"\n       //add ch"]],"start1":4068,"start2":4068,"length1":32,"length2":33},{"diffs":[[0,"or popup"],[1,"\r"],[0,"\n       "]],"start1":4113,"start2":4113,"length1":16,"length2":17},{"diffs":[[0,"hrome\");"],[1,"\r"],[0,"\n       "]],"start1":4170,"start2":4170,"length1":16,"length2":17},{"diffs":[[0,"scalebar"],[1,"\r"],[0,"\n       "]],"start1":4197,"start2":4197,"length1":16,"length2":17},{"diffs":[[0,"alebar({"],[1,"\r"],[0,"\n       "]],"start1":4246,"start2":4246,"length1":16,"length2":17},{"diffs":[[0,"   map: map,"],[1,"\r"],[0,"\n         sc"]],"start1":4262,"start2":4262,"length1":24,"length2":25},{"diffs":[[0," english"],[1,"\r"],[0,"\n       "]],"start1":4340,"start2":4340,"length1":16,"length2":17},{"diffs":[[0,"lish\r\n       });"],[-1,"\n"],[1,"\r\n\r\n\r"],[0,"\n       var laye"]],"start1":4344,"start2":4344,"length1":33,"length2":37},{"diffs":[[0,"o = "],[-1,"utilities.layout."],[0,"buil"]],"start1":4385,"start2":4385,"length1":25,"length2":8},{"diffs":[[0,"layers);"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":4405,"start2":4405,"length1":17,"length2":19},{"diffs":[[0,"th > 0){"],[1,"\r"],[0,"\n       "]],"start1":4441,"start2":4441,"length1":16,"length2":17},{"diffs":[[0,"Legend({"],[1,"\r"],[0,"\n       "]],"start1":4493,"start2":4493,"length1":16,"length2":17},{"diffs":[[0,"map:map,"],[1,"\r"],[0,"\n       "]],"start1":4514,"start2":4514,"length1":16,"length2":17},{"diffs":[[0,"ayerInfo"],[1,"\r"],[0,"\n       "]],"start1":4547,"start2":4547,"length1":16,"length2":17},{"diffs":[[0,"ndDiv\");"],[1,"\r"],[0,"\n       "]],"start1":4573,"start2":4573,"length1":16,"length2":17},{"diffs":[[0,"artup();"],[1,"\r"],[0,"\n       "]],"start1":4606,"start2":4606,"length1":16,"length2":17},{"diffs":[[0,"tup();\r\n       }"],[1,"\r"],[0,"\n       else{\n  "]],"start1":4608,"start2":4608,"length1":32,"length2":33},{"diffs":[[0,"   else{"],[-1,"\n"],[1,"         \r\n  "],[0,"        "]],"start1":4630,"start2":4630,"length1":17,"length2":29},{"diffs":[[0,"\"#legend"],[-1,"Toggle"],[1,"Con"],[0,"\").hide("]],"start1":4662,"start2":4662,"length1":22,"length2":19},{"diffs":[[0,".hide();"],[1,"\r"],[0,"\n       "]],"start1":4675,"start2":4675,"length1":16,"length2":17},{"diffs":[[0,"   }"],[1,"\r"],[0,"\n     }"],[-1,",\n\n     "],[1,"\r\n\r\n"],[0,"//bu"]],"start1":4689,"start2":4689,"length1":23,"length2":20},{"diffs":[[0,"e legend"],[1,"\r"],[0,"\n  "],[1,"function "],[0,"buildLay"]],"start1":4746,"start2":4746,"length1":19,"length2":29},{"diffs":[[0,"yersList"],[-1,": function"],[0,"(layers)"]],"start1":4774,"start2":4774,"length1":26,"length2":16},{"diffs":[[0,"layers){"],[-1,"\n"],[1,"\r\n\r"],[0,"\n //laye"]],"start1":4783,"start2":4783,"length1":17,"length2":19},{"diffs":[[0,"lLayers;"],[1,"\r"],[0,"\n  var l"]],"start1":4851,"start2":4851,"length1":16,"length2":17},{"diffs":[[0,"os = [];"],[1,"\r"],[0,"\n  dojo."]],"start1":4875,"start2":4875,"length1":16,"length2":17},{"diffs":[[0,"er, index) {"],[1,"\r"],[0,"\n      var l"]],"start1":4924,"start2":4924,"length1":24,"length2":25},{"diffs":[[0,"fo = {};"],[1,"\r"],[0,"\n      i"]],"start1":4955,"start2":4955,"length1":16,"length2":17},{"diffs":[[0,"\"CSV\") {"],[1,"\r"],[0,"\n       "]],"start1":5023,"start2":5023,"length1":16,"length2":17},{"diffs":[[0," === true) {"],[1,"\r"],[0,"\n           "]],"start1":5082,"start2":5082,"length1":24,"length2":25},{"diffs":[[0,"cMapLayer) {"],[1,"\r"],[0,"\n           "]],"start1":5167,"start2":5167,"length1":24,"length2":25},{"diffs":[[0,"!== false) {"],[1,"\r"],[0,"\n           "]],"start1":5221,"start2":5221,"length1":24,"length2":25},{"diffs":[[0,"   layerInfo = {"],[1,"\r"],[0,"\n               "]],"start1":5250,"start2":5250,"length1":32,"length2":33},{"diffs":[[0,"yer.layerObject,"],[1,"\r"],[0,"\n               "]],"start1":5306,"start2":5306,"length1":32,"length2":33},{"diffs":[[0," mapLayer.title,"],[1,"\r"],[0,"\n               "]],"start1":5354,"start2":5354,"length1":32,"length2":33},{"diffs":[[0,"mbol\": false"],[1,"\r"],[0,"\n           "]],"start1":5404,"start2":5404,"length1":24,"length2":25},{"diffs":[[0,"              };"],[1,"\r"],[0,"\n               "]],"start1":5422,"start2":5422,"length1":32,"length2":33},{"diffs":[[0,"ength > 1) {"],[1,"\r"],[0,"\n           "]],"start1":5497,"start2":5497,"length1":24,"length2":25},{"diffs":[[0,"on.name;"],[1,"\r"],[0,"\n       "]],"start1":5584,"start2":5584,"length1":16,"length2":17},{"diffs":[[0,"               }"],[1,"\r"],[0,"\n               "]],"start1":5597,"start2":5597,"length1":32,"length2":33},{"diffs":[[0,"(layerInfo);"],[1,"\r"],[0,"\n           "]],"start1":5648,"start2":5648,"length1":24,"length2":25},{"diffs":[[0,"\n              }"],[1,"\r"],[0,"\n            });"]],"start1":5661,"start2":5661,"length1":32,"length2":33},{"diffs":[[0,"\n            });"],[1,"\r"],[0,"\n          }\n   "]],"start1":5678,"start2":5678,"length1":32,"length2":33},{"diffs":[[0,"\n          }"],[1,"\r"],[0,"\n      } els"]],"start1":5695,"start2":5695,"length1":24,"length2":25},{"diffs":[[0,"bject) {"],[1,"\r"],[0,"\n      v"]],"start1":5774,"start2":5774,"length1":16,"length2":17},{"diffs":[[0,"= false;"],[1,"\r"],[0,"\n      i"]],"start1":5812,"start2":5812,"length1":16,"length2":17},{"diffs":[[0,"iceLayer)) {"],[1,"\r"],[0,"\n        sho"]],"start1":6010,"start2":6010,"length1":24,"length2":25},{"diffs":[[0," = true;"],[1,"\r"],[0,"\n      }"],[1,"\r"],[0,"\n      l"]],"start1":6049,"start2":6049,"length1":24,"length2":26},{"diffs":[[0,"Info = {"],[1,"\r"],[0,"\n       "]],"start1":6079,"start2":6079,"length1":16,"length2":17},{"diffs":[[0,"rObject,"],[1,"\r"],[0,"\n       "]],"start1":6119,"start2":6119,"length1":16,"length2":17},{"diffs":[[0,"r.title,"],[1,"\r"],[0,"\n       "]],"start1":6153,"start2":6153,"length1":16,"length2":17},{"diffs":[[0,"ltSymbol"],[1,"\r"],[0,"\n      }"]],"start1":6197,"start2":6197,"length1":16,"length2":17},{"diffs":[[0,"ol\r\n      };"],[1,"\r"],[0,"\n        //d"]],"start1":6203,"start2":6203,"length1":24,"length2":25},{"diffs":[[0,"is false"],[1,"\r"],[0,"\n       "]],"start1":6285,"start2":6285,"length1":16,"length2":17},{"diffs":[[0,"ayers) {"],[1,"\r"],[0,"\n       "]],"start1":6317,"start2":6317,"length1":16,"length2":17},{"diffs":[[0,"function (lyr) {"],[1,"\r"],[0,"\n               "]],"start1":6394,"start2":6394,"length1":32,"length2":33},{"diffs":[[0," false);"],[1,"\r"],[0,"\n       "]],"start1":6454,"start2":6454,"length1":16,"length2":17},{"diffs":[[0," (lyr) {"],[1,"\r"],[0,"\n       "]],"start1":6488,"start2":6488,"length1":16,"length2":17},{"diffs":[[0," lyr.id;"],[1,"\r"],[0,"\n       "]],"start1":6520,"start2":6520,"length1":16,"length2":17},{"diffs":[[0,"     });"],[1,"\r"],[0,"\n       "]],"start1":6537,"start2":6537,"length1":16,"length2":17},{"diffs":[[0,"ength) {"],[1,"\r"],[0,"\n       "]],"start1":6575,"start2":6575,"length1":16,"length2":17},{"diffs":[[0,"eLayers;"],[1,"\r"],[0,"\n       "]],"start1":6627,"start2":6627,"length1":16,"length2":17},{"diffs":[[0,";\r\n            }"],[1,"\r"],[0,"\n        }\n     "]],"start1":6634,"start2":6634,"length1":32,"length2":33},{"diffs":[[0,"    }\r\n        }"],[1,"\r"],[0,"\n        layerIn"]],"start1":6645,"start2":6645,"length1":32,"length2":33},{"diffs":[[0,"fo);"],[1,"\r"],[0,"\n    }"],[1,"\r"],[0,"\n  });"],[1,"\r"],[0,"\n  r"]],"start1":6694,"start2":6694,"length1":20,"length2":23},{"diffs":[[0,"fos;"],[1,"\r"],[0,"\n  }"],[-1,",\n\n  patchID:"],[1,"\r\n\r\n\r\n    "],[0," fun"]],"start1":6730,"start2":6730,"length1":25,"length2":23},{"diffs":[[0,"function"],[1," patchID"],[0,"() {  //"]],"start1":6750,"start2":6750,"length1":16,"length2":24},{"diffs":[[0,"cgis.com"],[1,"\r"],[0,"\n       "]],"start1":6809,"start2":6809,"length1":16,"length2":17},{"diffs":[[0,"ource) {"],[1,"\r"],[0,"\n       "]],"start1":6870,"start2":6870,"length1":16,"length2":17},{"diffs":[[0," domains"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":6935,"start2":6935,"length1":17,"length2":19},{"diffs":[[0," j = -1;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":6965,"start2":6965,"length1":17,"length2":19},{"diffs":[[0,", idx) {"],[1,"\r"],[0,"\n       "]],"start1":7029,"start2":7029,"length1":16,"length2":17},{"diffs":[[0,"t(server)) {"],[1,"\r"],[0,"\n           "]],"start1":7080,"start2":7080,"length1":24,"length2":25},{"diffs":[[0,"    i = idx;"],[1,"\r"],[0,"\n         }\n"]],"start1":7101,"start2":7101,"length1":24,"length2":25},{"diffs":[[0,"idx;\r\n         }"],[1,"\r"],[0,"\n         if (j "]],"start1":7109,"start2":7109,"length1":32,"length2":33},{"diffs":[[0,"urce)) {"],[1,"\r"],[0,"\n       "]],"start1":7174,"start2":7174,"length1":16,"length2":17},{"diffs":[[0,"j = idx;"],[1,"\r"],[0,"\n       "]],"start1":7195,"start2":7195,"length1":16,"length2":17},{"diffs":[[0,"idx;\r\n         }"],[1,"\r"],[0,"\n       });\n\n   "]],"start1":7199,"start2":7199,"length1":32,"length2":33},{"diffs":[[0,"     });"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":7219,"start2":7219,"length1":17,"length2":19},{"diffs":[[0,"= false;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":7249,"start2":7249,"length1":17,"length2":19},{"diffs":[[0,"&& j > -1) {"],[1,"\r"],[0,"\n         if"]],"start1":7279,"start2":7279,"length1":24,"length2":25},{"diffs":[[0," 0 || i === 4) {"],[1,"\r"],[0,"\n           if ("]],"start1":7311,"start2":7311,"length1":32,"length2":33},{"diffs":[[0,"=== 4) {"],[1,"\r"],[0,"\n       "]],"start1":7357,"start2":7357,"length1":16,"length2":17},{"diffs":[[0,"  retVal = true;"],[1,"\r"],[0,"\n           }\n  "]],"start1":7378,"start2":7378,"length1":32,"length2":33},{"diffs":[[0,"e;\r\n           }"],[1,"\r"],[0,"\n         }\n    "]],"start1":7392,"start2":7392,"length1":32,"length2":33},{"diffs":[[0,"   }\r\n         }"],[1,"\r"],[0,"\n         else i"]],"start1":7404,"start2":7404,"length1":32,"length2":33},{"diffs":[[0,"=== 1) {"],[1,"\r"],[0,"\n       "]],"start1":7442,"start2":7442,"length1":16,"length2":17},{"diffs":[[0," 1 || j === 2) {"],[1,"\r"],[0,"\n             re"]],"start1":7472,"start2":7472,"length1":32,"length2":33},{"diffs":[[0,"  retVal = true;"],[1,"\r"],[0,"\n           }\n  "]],"start1":7501,"start2":7501,"length1":32,"length2":33},{"diffs":[[0,"e;\r\n           }"],[1,"\r"],[0,"\n         }\n    "]],"start1":7515,"start2":7515,"length1":32,"length2":33},{"diffs":[[0,"   }\r\n         }"],[1,"\r"],[0,"\n         else i"]],"start1":7527,"start2":7527,"length1":32,"length2":33},{"diffs":[[0,"e if (i === 2) {"],[1,"\r"],[0,"\n           if ("]],"start1":7557,"start2":7557,"length1":32,"length2":33},{"diffs":[[0,"=== 2) {"],[1,"\r"],[0,"\n       "]],"start1":7592,"start2":7592,"length1":16,"length2":17},{"diffs":[[0,"  retVal = true;"],[1,"\r"],[0,"\n           }\n  "]],"start1":7613,"start2":7613,"length1":32,"length2":33},{"diffs":[[0,"e;\r\n           }"],[1,"\r"],[0,"\n         }\n    "]],"start1":7627,"start2":7627,"length1":32,"length2":33},{"diffs":[[0,"   }\r\n         }"],[1,"\r"],[0,"\n         else i"]],"start1":7639,"start2":7639,"length1":32,"length2":33},{"diffs":[[0,"e if (i === 3) {"],[1,"\r"],[0,"\n           if ("]],"start1":7669,"start2":7669,"length1":32,"length2":33},{"diffs":[[0,"=== 3) {"],[1,"\r"],[0,"\n       "]],"start1":7704,"start2":7704,"length1":16,"length2":17},{"diffs":[[0," = true;"],[1,"\r"],[0,"\n       "]],"start1":7733,"start2":7733,"length1":16,"length2":17},{"diffs":[[0,"e;\r\n           }"],[1,"\r"],[0,"\n         }\n    "]],"start1":7739,"start2":7739,"length1":32,"length2":33},{"diffs":[[0,"       }"],[1,"\r"],[0,"\n       "]],"start1":7759,"start2":7759,"length1":16,"length2":17},{"diffs":[[0,"       }"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":7769,"start2":7769,"length1":17,"length2":19},{"diffs":[[0,"Val;"],[1,"\r"],[0,"\n     };"],[1,"\r"],[0,"\n    }"],[-1,",\n\n    hideLoader:function(){\n      $(\"#loadingCon\").hid"],[1,"\r\n\r\n\tfunction hideLoader(){\r\n\t  $(\"#loadingCon\").hide();\r\n\t}\r\n\r\n\t//Jquery Layout\r\n\t$(document).ready(function(e) {\r\n\t  $(\"#legendToggle\").click(function(){\r\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\r\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\r\n\t\t}\r\n\t\telse{\r\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\r\n\t\t}\r\n\t\t$(\"#legendDiv\").slideToggl"],[0,"e();"],[1,"\r"],[0,"\n\t"],[-1,"}\n\n\n"],[1,"  });\r\n  "],[0,"  })"]],"start1":7798,"start2":7798,"length1":88,"length2":402}]],"length":8201,"saved":false}
