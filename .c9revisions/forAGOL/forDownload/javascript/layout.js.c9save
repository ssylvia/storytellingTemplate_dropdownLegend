{"ts":1349799547083,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"  dojo.require(\"esri.map\");\n  dojo.require(\"esri.dijit.Legend\");\n  dojo.require(\"esri.dijit.Scalebar\");\n  dojo.require(\"esri.arcgis.utils\");\n  dojo.require(\"esri.IdentityManager\");\n  dojo.require(\"dijit.dijit\");\n  dojo.require(\"dijit.layout.BorderContainer\");\n  dojo.require(\"dijit.layout.ContentPane\");\n  dojo.require(\"dijit.layout.StackContainer\");\n  dojo.requireLocalization(\"esriTemplate\",\"template\");\n  \n  \n     var map, urlObjects, i18n;\n\t \n\t function initMap() {\n       patchID();\n\t   \n\t   //get the localization strings\n  \t   i18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\n\t  \n\t   dojo.byId('loading').innerHTML = i18n.viewer.loading.message;\n\t   dojo.byId('legTogText').innerHTML = i18n.viewer.legToggle.down;\n      \n       if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\n         configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\n       }\n       esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);\n\n       if(!configOptions.sharingurl){\n         configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\n       }\n       esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\n       \n       if(!configOptions.proxyurl){   \n         configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\n       }\n\n       esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\n\n       esri.config.defaults.io.alwaysUseProxy = false;\n      \n       urlObject = esri.urlToObject(document.location.href);\n       urlObject.query = urlObject.query || {};\n      \n       if(urlObject.query.title){\n         configOptions.title = urlObject.query.title;\n       }\n       if(urlObject.query.subtitle){\n         configOptions.title = urlObject.query.subtitle;\n       }\n       if(urlObject.query.webmap){\n         configOptions.webmap = urlObject.query.webmap;      \n       } \n       if(urlObject.query.bingMapsKey){\n         configOptions.bingmapskey = urlObject.query.bingMapsKey;      \n       }\n\n\t   esri.arcgis.utils.arcgisUrl = \"http://arcgis.com/sharing/content/items\";\t\n\t\t\n\t   var mapDeferred = esri.arcgis.utils.createMap(configOptions.webmap, \"map\", {\n         mapOptions: {\n           slider: true,\n           nav: false,\n           wrapAround180:true\n         },\n         ignorePopups:false,\n         bingMapsKey: configOptions.bingmapskey\n       });\n\n       mapDeferred.addCallback(function (response) {\n        \n\t\t document.title = configOptions.title|| response.itemInfo.item.title || \"\";\n         dojo.byId(\"title\").innerHTML = configOptions.title ||response.itemInfo.item.title || \"\";\n         dojo.byId(\"subtitle\").innerHTML = configOptions.subtitle|| response.itemInfo.item.snippet || \"\";\n        \n         map = response.map;\n\t\t\n\t\t dojo.connect(map,\"onUpdateEnd\",hideLoader);\n\t\t\n         var layers = response.itemInfo.itemData.operationalLayers;\n         if(map.loaded){\n           initUI(layers);\n         }\n         else{\n           dojo.connect(map,\"onLoad\",function(){\n             initUI(layers);\n           });\n         }\n         //resize the map when the browser resizes\n         dojo.connect(dijit.byId('map'), 'resize', map,map.resize);\n       });\n\n       mapDeferred.addErrback(function (error) {\n         alert(i18n.viewer.errors.createMap + dojo.toJson(error.message));\n       });\n\t   \n     }\n\n\n     function initUI(layers) {\n       //add chrome theme for popup\n       dojo.addClass(map.infoWindow.domNode, \"chrome\");\n       //add the scalebar \n       var scalebar = new esri.dijit.Scalebar({\n         map: map,\n         scalebarUnit:i18n.viewer.main.scaleBarUnits //metric or english\n       }); \n\n       var layerInfo = buildLayersList(layers);\n      \n       if(layerInfo.length > 0){\n         var legendDijit = new esri.dijit.Legend({\n           map:map,\n           layerInfos:layerInfo\n         },\"legendDiv\");\n         legendDijit.startup();\n       }\n       else{\n         dojo.byId('legendDiv').innerHTML = \"\";\n       }\n     }\n\t \nfunction buildLayersList(layers){\n        //layers  arg is  response.itemInfo.itemData.operationalLayers;\n        var layerInfos = [];\n        dojo.forEach(layers, function(mapLayer, index){\n          var layerInfo = {};\n          if (mapLayer.featureCollection && mapLayer.type !== \"CSV\") {\n            if (mapLayer.featureCollection.showLegend === true) {\n              dojo.forEach(mapLayer.featureCollection.layers, function(fcMapLayer){\n                if (fcMapLayer.showLegend !== false) {\n                  layerInfo = {\n                    \"layer\": fcMapLayer.layerObject,\n                    \"title\": mapLayer.title,\n                    \"defaultSymbol\": false\n                  };\n                  if (mapLayer.featureCollection.layers.length > 1) {\n                    layerInfo.title += \" - \" + fcMapLayer.layerDefinition.name;\n                  }\n                  layerInfos.push(layerInfo);\n                }\n              });\n            }\n          } else if (mapLayer.showLegend !== false) {\n            layerInfo = {\n              \"layer\": mapLayer.layerObject,\n              \"title\": mapLayer.title,\n              \"defaultSymbol\": false\n            };\n            //does it have layers too? If so check to see if showLegend is false\n            if (mapLayer.layers) {\n              var hideLayers = dojo.map(dojo.filter(mapLayer.layers, function(lyr){\n                return (lyr.showLegend === false);\n              }), function(lyr){\n                return lyr.id\n              });\n              if (hideLayers.length) {\n                layerInfo.hideLayers = hideLayers;\n              }\n            }\n            layerInfos.push(layerInfo);\n          }\n        });\n        return layerInfos;\n      }\n\n    \n     function patchID() {  //patch id manager for use in apps.arcgis.com\n       esri.id._isIdProvider = function(server, resource) {\n       // server and resource are assumed one of portal domains\n \n       var i = -1, j = -1;\n \n       dojo.forEach(this._gwDomains, function(domain, idx) {\n         if (i === -1 && domain.regex.test(server)) {\n           i = idx;\n         }\n         if (j === -1 && domain.regex.test(resource)) {\n           j = idx;\n         }\n       });\n \n       var retVal = false;\n   \n       if (i > -1 && j > -1) {\n         if (i === 0 || i === 4) {\n           if (j === 0 || j === 4) {\n             retVal = true;\n           }\n         }\n         else if (i === 1) {\n           if (j === 1 || j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 2) {\n           if (j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 3) {\n           if (j === 3) {\n             retVal = true;\n           }\n         }\n       }\n \n       return retVal;\n     };    \n    }\n\t\n\tfunction hideLoader(){\n\t  $(\"#loadingCon\").hide();\n\t}\n\t\n\t//Jquery Layout\n\t$(document).ready(function(e) {\n\t  $(\"#legendToggle\").click(function(){\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });"]],"start1":0,"start2":0,"length1":0,"length2":7196}]],"length":7196}
{"contributors":[],"silentsave":true,"ts":1349800548763,"patch":[[{"diffs":[[0,"   }\n\t \n"],[1,"//build a list of layers to dispaly in the legend\n  "],[0,"function"]],"start1":4048,"start2":4048,"length1":16,"length2":68},{"diffs":[[0,"ayers){\n"],[-1,"       "],[1,"\n"],[0," //layer"]],"start1":4134,"start2":4134,"length1":23,"length2":17},{"diffs":[[0,"Layers;\n"],[-1,"      "],[0,"  var la"]],"start1":4200,"start2":4200,"length1":22,"length2":16},{"diffs":[[0,"s = [];\n"],[-1,"      "],[0,"  dojo.f"]],"start1":4223,"start2":4223,"length1":22,"length2":16},{"diffs":[[0,"function"],[1," "],[0,"(mapLaye"]],"start1":4254,"start2":4254,"length1":16,"length2":17},{"diffs":[[0,", index)"],[1," "],[0,"{\n"],[-1,"    "],[0,"      va"]],"start1":4272,"start2":4272,"length1":22,"length2":19},{"diffs":[[0,"= {};\n      "],[-1,"    "],[0,"if (mapLayer"]],"start1":4303,"start2":4303,"length1":28,"length2":24},{"diffs":[[0,"== \"CSV\") {\n"],[-1,"    "],[0,"        if ("]],"start1":4364,"start2":4364,"length1":28,"length2":24},{"diffs":[[0,"            "],[-1,"  "],[0,"dojo.forEach"]],"start1":4438,"start2":4438,"length1":26,"length2":24},{"diffs":[[0,"function"],[1," "],[0,"(fcMapLa"]],"start1":4498,"start2":4498,"length1":16,"length2":17},{"diffs":[[0,"apLayer)"],[1," "],[0,"{\n"],[-1,"  "],[0,"        "]],"start1":4511,"start2":4511,"length1":20,"length2":19},{"diffs":[[0,"                "],[1," "],[1," "],[0,"\"layer\": fcMapLa"]],"start1":4611,"start2":4611,"length1":32,"length2":34},{"diffs":[[0,"                "],[1,"  "],[0,"\"title\": mapLaye"]],"start1":4666,"start2":4666,"length1":32,"length2":34},{"diffs":[[0,"                "],[1," "],[1," "],[0,"\"defaultSymbol\":"]],"start1":4713,"start2":4713,"length1":32,"length2":34},{"diffs":[[0,"ngth > 1) {\n"],[1,"  "],[0,"            "]],"start1":4833,"start2":4833,"length1":24,"length2":26},{"diffs":[[0,";\n              "],[-1," "],[-1," "],[0,"}\n"],[-1,"  "],[0,"            });\n"]],"start1":4991,"start2":4991,"length1":38,"length2":34},{"diffs":[[0,"        "],[-1,"  }\n  "],[1,"}\n"],[0,"      "],[-1,"  "],[0,"} else i"]],"start1":5027,"start2":5027,"length1":30,"length2":24},{"diffs":[[0,"alse"],[-1,") {\n            layerInfo = {"],[1," && mapLayer.layerObject) {\n      var showDefaultSymbol = false;\n      if (mapLayer.layerObject.version < 10.1 && (mapLayer.layerObject instanceof esri.layers.ArcGISDynamicMapServiceLayer || mapLayer.layerObject instanceof esri.layers.ArcGISTiledMapServiceLayer)) {\n        showDefaultSymbol = true;"],[0,"\n     "],[1," }\n"],[0," "],[1,"     layerInfo = {\n"],[0,"    "]],"start1":5079,"start2":5079,"length1":44,"length2":336},{"diffs":[[0,"Object,\n        "],[-1,"      "],[0,"\"title\": mapLaye"]],"start1":5442,"start2":5442,"length1":38,"length2":32},{"diffs":[[0,".title,\n        "],[-1,"     "],[-1," "],[0,"\"defaultSymbol\":"]],"start1":5475,"start2":5475,"length1":38,"length2":32},{"diffs":[[0,"l\": "],[-1,"false\n    "],[1,"showDefaultSymbol\n"],[0,"      "],[-1,"  "],[0,"};\n"],[-1,"    "],[0,"    "]],"start1":5504,"start2":5504,"length1":33,"length2":35},{"diffs":[[0,"nd is false\n"],[-1,"    "],[0,"        if ("]],"start1":5600,"start2":5600,"length1":28,"length2":24},{"diffs":[[0,"            "],[-1,"  "],[0,"var hideLaye"]],"start1":5643,"start2":5643,"length1":26,"length2":24},{"diffs":[[0,"layers, function"],[1," "],[0,"(lyr)"],[1," "],[0,"{\n              "]],"start1":5702,"start2":5702,"length1":37,"length2":39},{"diffs":[[0,"        "],[-1,"  "],[0,"}), func"]],"start1":5782,"start2":5782,"length1":18,"length2":16},{"diffs":[[0,"function"],[1," "],[0,"(lyr)"],[1," "],[0,"{\n      "]],"start1":5794,"start2":5794,"length1":21,"length2":23},{"diffs":[[0,"n lyr.id"],[1,";"],[0,"\n"],[-1,"  "],[0,"        "]],"start1":5832,"start2":5832,"length1":19,"length2":18},{"diffs":[[0,"            });\n"],[-1,"  "],[0,"            if ("]],"start1":5842,"start2":5842,"length1":34,"length2":32},{"diffs":[[0,"hideLayers;\n"],[-1,"  "],[0,"            "]],"start1":5934,"start2":5934,"length1":26,"length2":24},{"diffs":[[0,"  }\n        "],[-1,"    }\n    "],[1,"}\n"],[0,"        laye"]],"start1":5956,"start2":5956,"length1":34,"length2":26},{"diffs":[[0,"    "],[-1,"      }\n        });\n      "],[1,"}\n  });\n"],[0,"  re"]],"start1":6006,"start2":6006,"length1":34,"length2":16},{"diffs":[[0,"rInfos;\n"],[-1,"    "],[0,"  }\n\n   "]],"start1":6031,"start2":6031,"length1":20,"length2":16}]],"length":7459,"saved":false}
{"ts":1349800555734,"patch":[[{"diffs":[[0,"late\");\n"],[-1,"  \n  "],[1,"\n"],[0,"\n     va"]],"start1":398,"start2":398,"length1":21,"length2":17},{"diffs":[[0,", i18n;\n"],[-1,"\t "],[0,""],[1,""],[0,"\n\t funct"]],"start1":432,"start2":432,"length1":18,"length2":16},{"diffs":[[0,"chID();\n"],[-1,"\t   "],[0,""],[1,""],[0,"\n\t   //g"]],"start1":474,"start2":474,"length1":20,"length2":16},{"diffs":[[0,"late\");\n"],[-1,"\t  "],[0,""],[1,""],[0,"\n\t   doj"]],"start1":577,"start2":577,"length1":19,"length2":16},{"diffs":[[0,"e.down;\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":712,"start2":712,"length1":22,"length2":16},{"diffs":[[0,"ingurl;\n"],[-1,"       "],[0,"\n       "]],"start1":1233,"start2":1233,"length1":23,"length2":16},{"diffs":[[0,"oxyurl){"],[-1,"   "],[0,"\n       "]],"start1":1269,"start2":1269,"length1":19,"length2":16},{"diffs":[[0," false;\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":1498,"start2":1498,"length1":22,"length2":16},{"diffs":[[0," || {};\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":1608,"start2":1608,"length1":22,"length2":16},{"diffs":[[0,".webmap;"],[-1,"      "],[0,"\n       "]],"start1":1899,"start2":1899,"length1":22,"length2":16},{"diffs":[[0,"       }"],[-1," "],[0,"\n       "]],"start1":1908,"start2":1908,"length1":17,"length2":16},{"diffs":[[0,"MapsKey;"],[-1,"      "],[0,"\n       "]],"start1":2014,"start2":2014,"length1":22,"length2":16},{"diffs":[[0,"/items\";"],[-1,"\t\n\t\t"],[1,"\n"],[0,"\n\t   var"]],"start1":2101,"start2":2101,"length1":20,"length2":17},{"diffs":[[0,"onse) {\n"],[-1,"        "],[0,""],[1,""],[0,"\n\t\t docu"]],"start1":2439,"start2":2439,"length1":24,"length2":16},{"diffs":[[0," || \"\";\n"],[-1,"        "],[0,""],[1,""],[0,"\n       "]],"start1":2722,"start2":2722,"length1":24,"length2":16},{"diffs":[[0,"se.map;\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\n\t\t dojo"]],"start1":2752,"start2":2752,"length1":18,"length2":16},{"diffs":[[0,"oader);\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\n       "]],"start1":2800,"start2":2800,"length1":18,"length2":16},{"diffs":[[0,"    });\n"],[-1,"\t   "],[0,""],[1,""],[0,"\n     }\n"]],"start1":3317,"start2":3317,"length1":20,"length2":16},{"diffs":[[0,"scalebar"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":3475,"start2":3475,"length1":17,"length2":16},{"diffs":[[0,"     });"],[-1," "],[0,""],[1,""],[0,"\n\n      "]],"start1":3626,"start2":3626,"length1":17,"length2":16},{"diffs":[[0,"ayers);\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":3676,"start2":3676,"length1":22,"length2":16},{"diffs":[[0,"\n     }\n"],[-1,"\t "],[0,""],[1,""],[0,"\n//build"]],"start1":3956,"start2":3956,"length1":18,"length2":16},{"diffs":[[0,"s;\n  }\n\n"],[-1,"    "],[0,""],[1,""],[0,"\n     fu"]],"start1":5945,"start2":5945,"length1":20,"length2":16},{"diffs":[[0,"domains\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":6143,"start2":6143,"length1":17,"length2":16},{"diffs":[[0,"j = -1;\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":6171,"start2":6171,"length1":17,"length2":16},{"diffs":[[0,"    });\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":6416,"start2":6416,"length1":17,"length2":16},{"diffs":[[0," false;\n"],[-1,"   "],[0,""],[1,""],[0,"\n       "]],"start1":6444,"start2":6444,"length1":19,"length2":16},{"diffs":[[0,"      }\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":6941,"start2":6941,"length1":17,"length2":16},{"diffs":[[0,"  };"],[-1,"    "],[0,""],[1,""],[0,"\n    }\n"],[-1,"\t"],[0,""],[1,""],[0,"\n\tfu"]],"start1":6975,"start2":6975,"length1":20,"length2":15},{"diffs":[[0,"e();\n\t}\n"],[-1,"\t"],[0,"\n\t//Jque"]],"start1":7034,"start2":7034,"length1":17,"length2":16}]],"length":7351,"saved":false}
{"contributors":[],"silentsave":false,"ts":1350321915396,"patch":[[{"diffs":[[0," }\n\n"],[-1,"\t   esri.arcgis.utils.arcgisUrl = \"http://arcgis.com/sharing/content/items\";\n\n"],[0,"\t   "]],"start1":2029,"start2":2029,"length1":86,"length2":8}]],"length":7273,"saved":false}
{"contributors":[],"silentsave":true,"ts":1351541314967,"patch":[[{"diffs":[[1,"  dojo.require(\"esri.map\");\n  dojo.require(\"esri.dijit.Legend\");\n  dojo.require(\"esri.dijit.Scalebar\");\n  dojo.require(\"esri.arcgis.utils\");\n  dojo.require(\"esri.IdentityManager\");\n  dojo.require(\"dijit.dijit\");\n  dojo.require(\"dijit.layout.BorderContainer\");\n  dojo.require(\"dijit.layout.ContentPane\");\n  dojo.require(\"dijit.layout.StackContainer\");\n  dojo.requireLocalization(\"esriTemplate\",\"template\");\n\n\n     var map, urlObjects, i18n;\n\n\t function initMap() {\n       patchID();\n\n\t   //get the localization strings\n  \t   i18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\n\n\t   dojo.byId('loading').innerHTML = i18n.viewer.loading.message;\n\t   dojo.byId('legTogText').innerHTML = i18n.viewer.legToggle.down;\n\n       if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\n         configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\n       }\n       esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);\n\n       if(!configOptions.sharingurl){\n         configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\n       }\n       esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\n\n       if(!configOptions.proxyurl){\n         configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\n       }\n\n       esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\n\n       esri.config.defaults.io.alwaysUseProxy = false;\n\n       urlObject = esri.urlToObject(document.location.href);\n       urlObject.query = urlObject.query || {};\n\n       if(urlObject.query.title){\n         configOptions.title = urlObject.query.title;\n       }\n       if(urlObject.query.subtitle){\n         configOptions.title = urlObject.query.subtitle;\n       }\n       if(urlObject.query.webmap){\n         configOptions.webmap = urlObject.query.webmap;\n       }\n       if(urlObject.query.bingMapsKey){\n         configOptions.bingmapskey = urlObject.query.bingMapsKey;\n       }\n\n\t   var mapDeferred = esri.arcgis.utils.createMap(configOptions.webmap, \"map\", {\n         mapOptions: {\n           slider: true,\n           nav: false,\n           wrapAround180:true\n         },\n         ignorePopups:false,\n         bingMapsKey: configOptions.bingmapskey\n       });\n\n       mapDeferred.addCallback(function (response) {\n\n\t\t document.title = configOptions.title|| response.itemInfo.item.title || \"\";\n         dojo.byId(\"title\").innerHTML = configOptions.title ||response.itemInfo.item.title || \"\";\n         dojo.byId(\"subtitle\").innerHTML = configOptions.subtitle|| response.itemInfo.item.snippet || \"\";\n\n         map = response.map;\n\n\t\t dojo.connect(map,\"onUpdateEnd\",hideLoader);\n\n         var layers = response.itemInfo.itemData.operationalLayers;\n         if(map.loaded){\n           initUI(layers);\n         }\n         else{\n           dojo.connect(map,\"onLoad\",function(){\n             initUI(layers);\n           });\n         }\n         //resize the map when the browser resizes\n         dojo.connect(dijit.byId('map'), 'resize', map,map.resize);\n       });\n\n       mapDeferred.addErrback(function (error) {\n         alert(i18n.viewer.errors.createMap + dojo.toJson(error.message));\n       });\n\n     }\n\n\n     function initUI(layers) {\n       //add chrome theme for popup\n       dojo.addClass(map.infoWindow.domNode, \"chrome\");\n       //add the scalebar\n       var scalebar = new esri.dijit.Scalebar({\n         map: map,\n         scalebarUnit:i18n.viewer.main.scaleBarUnits //metric or english\n       });\n       \n\n       var layerInfo = buildLayersList(layers);\n\n       if(layerInfo.length > 0){\n         var legendDijit = new esri.dijit.Legend({\n           map:map,\n           layerInfos:layerInfo\n         },\"legendDiv\");\n         legendDijit.startup();\n       }\n       else{\n         dojo.byId('legendDiv').innerHTML = \"\";\n       }\n     }\n\n//build a list of layers to dispaly in the legend\n  function buildLayersList(layers){\n\n //layers  arg is  response.itemInfo.itemData.operationalLayers;\n  var layerInfos = [];\n  dojo.forEach(layers, function (mapLayer, index) {\n      var layerInfo = {};\n      if (mapLayer.featureCollection && mapLayer.type !== \"CSV\") {\n        if (mapLayer.featureCollection.showLegend === true) {\n            dojo.forEach(mapLayer.featureCollection.layers, function (fcMapLayer) {\n              if (fcMapLayer.showLegend !== false) {\n                  layerInfo = {\n                      \"layer\": fcMapLayer.layerObject,\n                      \"title\": mapLayer.title,\n                      \"defaultSymbol\": false\n                  };\n                  if (mapLayer.featureCollection.layers.length > 1) {\n                      layerInfo.title += \" - \" + fcMapLayer.layerDefinition.name;\n                  }\n                  layerInfos.push(layerInfo);\n              }\n            });\n          }\n      } else if (mapLayer.showLegend !== false && mapLayer.layerObject) {\n      var showDefaultSymbol = false;\n      if (mapLayer.layerObject.version < 10.1 && (mapLayer.layerObject instanceof esri.layers.ArcGISDynamicMapServiceLayer || mapLayer.layerObject instanceof esri.layers.ArcGISTiledMapServiceLayer)) {\n        showDefaultSymbol = true;\n      }\n      layerInfo = {\n        \"layer\": mapLayer.layerObject,\n        \"title\": mapLayer.title,\n        \"defaultSymbol\": showDefaultSymbol\n      };\n        //does it have layers too? If so check to see if showLegend is false\n        if (mapLayer.layers) {\n            var hideLayers = dojo.map(dojo.filter(mapLayer.layers, function (lyr) {\n                return (lyr.showLegend === false);\n            }), function (lyr) {\n                return lyr.id;\n            });\n            if (hideLayers.length) {\n                layerInfo.hideLayers = hideLayers;\n            }\n        }\n        layerInfos.push(layerInfo);\n    }\n  });\n  return layerInfos;\n  }\n\n\n     function patchID() {  //patch id manager for use in apps.arcgis.com\n       esri.id._isIdProvider = function(server, resource) {\n       // server and resource are assumed one of portal domains\n\n       var i = -1, j = -1;\n\n       dojo.forEach(this._gwDomains, function(domain, idx) {\n         if (i === -1 && domain.regex.test(server)) {\n           i = idx;\n         }\n         if (j === -1 && domain.regex.test(resource)) {\n           j = idx;\n         }\n       });\n\n       var retVal = false;\n\n       if (i > -1 && j > -1) {\n         if (i === 0 || i === 4) {\n           if (j === 0 || j === 4) {\n             retVal = true;\n           }\n         }\n         else if (i === 1) {\n           if (j === 1 || j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 2) {\n           if (j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 3) {\n           if (j === 3) {\n             retVal = true;\n           }\n         }\n       }\n\n       return retVal;\n     };\n    }\n\n\tfunction hideLoader(){\n\t  $(\"#loadingCon\").hide();\n\t}\n\n\t//Jquery Layout\n\t$(document).ready(function(e) {\n\t  $(\"#legendToggle\").click(function(){\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });"]],"start1":0,"start2":0,"length1":0,"length2":7281}]],"length":7281,"saved":false}
{"contributors":[],"silentsave":true,"ts":1351541391725,"patch":[[{"diffs":[[0,"apsKey;\n"],[1,"         \n"],[0,"       }"]],"start1":2015,"start2":2015,"length1":16,"length2":26}]],"length":7291,"saved":false}
{"ts":1351541393309,"patch":[[{"diffs":[[0,"ey;\n"],[-1,"         \n"],[0,"    "]],"start1":2019,"start2":2019,"length1":18,"length2":8}]],"length":7281,"saved":false}
{"ts":1351541395354,"patch":[[{"diffs":[[0,"       }"],[1,"\n       \n       if (configOptions.legend == false){\n    \t   $(\"#legendToggle\").hide();\n\t   }"],[0,"\n\n\t   va"]],"start1":2023,"start2":2023,"length1":16,"length2":108}]],"length":7373,"saved":false}
{"ts":1351541421354,"patch":[[{"diffs":[[0,"    "],[-1,"dojo.byId('legendDiv').innerHTML = \"\""],[1,"$(\"#legendToggle\").hide()"],[0,";\n  "]],"start1":3927,"start2":3927,"length1":45,"length2":33}]],"length":7361,"saved":false}
{"ts":1351541520097,"patch":[[{"diffs":[[0,"gend == "],[1,"\""],[0,"false){\n"]],"start1":2067,"start2":2067,"length1":16,"length2":17}]],"length":7362,"saved":false}
{"ts":1351541522336,"patch":[[{"diffs":[[0,"= \"false"],[1,"\""],[0,"){\n    \t"]],"start1":2073,"start2":2073,"length1":16,"length2":17}]],"length":7363,"saved":false}
{"ts":1351541523271,"patch":[[{"diffs":[[0,"      }\n"],[-1,"       "],[0,"\n       "]],"start1":2024,"start2":2024,"length1":23,"length2":16},{"diffs":[[0,"    });\n"],[-1,"       "],[0,"\n\n      "]],"start1":3636,"start2":3636,"length1":23,"length2":16}]],"length":7349,"saved":false}
{"ts":1351541536040,"patch":[[{"diffs":[[0,"psKey;\n       }\n"],[1,"       "],[0,"\n       if (conf"]],"start1":2016,"start2":2016,"length1":32,"length2":39},{"diffs":[[0,"    });\n"],[1,"       "],[0,"\n\n      "]],"start1":3643,"start2":3643,"length1":16,"length2":23}]],"length":7363,"saved":false}
{"ts":1351541537834,"patch":[[{"diffs":[[0,"      }\n"],[-1,"       "],[0,"\n       "]],"start1":2024,"start2":2024,"length1":23,"length2":16},{"diffs":[[0,"    });\n"],[-1,"       "],[0,"\n\n      "]],"start1":3636,"start2":3636,"length1":23,"length2":16}]],"length":7349,"saved":false}
{"ts":1351541543406,"patch":[[{"diffs":[[0,"psKey;\n       }\n"],[1,"       "],[0,"\n       if (conf"]],"start1":2016,"start2":2016,"length1":32,"length2":39},{"diffs":[[0,"= \"false"],[-1,"\""],[0,"){\n    \t"]],"start1":2073,"start2":2073,"length1":17,"length2":16},{"diffs":[[0,"    });\n"],[1,"       "],[0,"\n\n      "]],"start1":3642,"start2":3642,"length1":16,"length2":23}]],"length":7362,"saved":false}
{"ts":1351541545610,"patch":[[{"diffs":[[0,"gend == "],[-1,"\""],[0,"false){\n"]],"start1":2067,"start2":2067,"length1":17,"length2":16},{"diffs":[[0,"    "],[-1,"$(\"#legendToggle\").hide()"],[1,"dojo.byId('legendDiv').innerHTML = \"\""],[0,";\n  "]],"start1":3927,"start2":3927,"length1":33,"length2":45}]],"length":7373,"saved":false}
{"ts":1351541546911,"patch":[[{"diffs":[[0,"    "],[-1,"dojo.byId('legendDiv').innerHTML = \"\""],[1,"$(\"#legendToggle\").hide()"],[0,";\n  "]],"start1":3927,"start2":3927,"length1":45,"length2":33}]],"length":7361,"saved":false}
{"ts":1351541547373,"patch":[[{"diffs":[[0,"      }\n"],[-1,"       "],[0,"\n       "]],"start1":2024,"start2":2024,"length1":23,"length2":16},{"diffs":[[0,"    });\n"],[-1,"       "],[0,"\n\n      "]],"start1":3634,"start2":3634,"length1":23,"length2":16}]],"length":7347,"saved":false}
{"ts":1351541603672,"patch":[[{"diffs":[[0,"    if ("],[1,"getL"],[0,"configOp"]],"start1":2036,"start2":2036,"length1":16,"length2":20}]],"length":7351,"saved":false}
{"ts":1351541604555,"patch":[[{"diffs":[[0,"if (getL"],[1,"e"],[0,"configOp"]],"start1":2040,"start2":2040,"length1":16,"length2":17}]],"length":7352,"saved":false}
{"ts":1351541605645,"patch":[[{"diffs":[[0,"f (getLe"],[1,"g"],[0,"configOp"]],"start1":2041,"start2":2041,"length1":16,"length2":17}]],"length":7353,"saved":false}
{"ts":1351541607321,"patch":[[{"diffs":[[0," (getLeg"],[1,"end"],[0,"configOp"]],"start1":2042,"start2":2042,"length1":16,"length2":19}]],"length":7356,"saved":false}
{"ts":1351541609728,"patch":[[{"diffs":[[0,"etLegend"],[1,"Return"],[0,"configOp"]],"start1":2045,"start2":2045,"length1":16,"length2":22}]],"length":7362,"saved":false}
{"ts":1351541611797,"patch":[[{"diffs":[[0,"ndReturn"],[1,"("],[0,"configOp"]],"start1":2051,"start2":2051,"length1":16,"length2":17}]],"length":7363,"saved":false}
{"ts":1351541614540,"patch":[[{"diffs":[[0,"s.legend"],[1,")"],[0," == fals"]],"start1":2072,"start2":2072,"length1":16,"length2":17}]],"length":7364,"saved":false}
{"ts":1351541628462,"patch":[[{"diffs":[[0,"gend"],[-1,"Return"],[0,"(con"]],"start1":2049,"start2":2049,"length1":14,"length2":8}]],"length":7358,"saved":false}
{"ts":1351541630279,"patch":[[{"diffs":[[0,"etLegend"],[1,"Config"],[0,"(configO"]],"start1":2045,"start2":2045,"length1":16,"length2":22}]],"length":7364,"saved":false}
{"ts":1351541649167,"patch":[[{"diffs":[[0," });\n    });"],[1,"\n    \n    "]],"start1":7352,"start2":7352,"length1":12,"length2":22}]],"length":7374,"saved":false}
{"ts":1351541650307,"patch":[[{"diffs":[[0,");\n    \n    "],[1,"ger"]],"start1":7362,"start2":7362,"length1":12,"length2":15}]],"length":7377,"saved":false}
{"ts":1351541651372,"patch":[[{"diffs":[[0," \n    ge"],[-1,"r"],[1,"t "]],"start1":7368,"start2":7368,"length1":9,"length2":10}]],"length":7378,"saved":false}
{"ts":1351541652789,"patch":[[{"diffs":[[0,"  \n    g"],[-1,"et "]],"start1":7367,"start2":7367,"length1":11,"length2":8}]],"length":7375,"saved":false}
{"ts":1351541654161,"patch":[[{"diffs":[[0,"  \n    g"],[1,"etLegendConfig"]],"start1":7367,"start2":7367,"length1":8,"length2":22}]],"length":7389,"saved":false}
{"ts":1351541655823,"patch":[[{"diffs":[[0,"\n    getLegendConfig"],[1,"(str"]],"start1":7369,"start2":7369,"length1":20,"length2":24}]],"length":7393,"saved":false}
{"ts":1351541656927,"patch":[[{"diffs":[[0,"nfig(str"],[1,")"]],"start1":7385,"start2":7385,"length1":8,"length2":9}]],"length":7394,"saved":false}
{"ts":1351541657780,"patch":[[{"diffs":[[0,"fig(str)"],[1,"{"]],"start1":7386,"start2":7386,"length1":8,"length2":9}]],"length":7395,"saved":false}
{"ts":1351541659251,"patch":[[{"diffs":[[0,"ig(str){"],[1,"\n        "]],"start1":7387,"start2":7387,"length1":8,"length2":17}]],"length":7404,"saved":false}
{"ts":1351541661018,"patch":[[{"diffs":[[0,"g(str){\n    "],[-1,"    "],[1,"}"]],"start1":7388,"start2":7388,"length1":16,"length2":13}]],"length":7401,"saved":false}
{"ts":1351541662825,"patch":[[{"diffs":[[0,"g(str){\n"],[1,"        \n"],[0,"    }"]],"start1":7388,"start2":7388,"length1":13,"length2":22}]],"length":7410,"saved":false}
{"ts":1351541665707,"patch":[[{"diffs":[[0,"r){\n        "],[1,"if"],[0,"\n    }"]],"start1":7392,"start2":7392,"length1":18,"length2":20}]],"length":7412,"saved":false}
{"ts":1351541667825,"patch":[[{"diffs":[[0,"      if"],[1,"("],[0,"\n    }"]],"start1":7398,"start2":7398,"length1":14,"length2":15}]],"length":7413,"saved":false}
{"ts":1351541668639,"patch":[[{"diffs":[[0,"      if"],[-1,"("],[1," "],[0,"\n    }"]],"start1":7398,"start2":7398,"length1":15,"length2":15}]],"length":7413,"saved":false}
{"ts":1351541669660,"patch":[[{"diffs":[[0,"     if "],[1,"(s"],[0,"\n    }"]],"start1":7399,"start2":7399,"length1":14,"length2":16}]],"length":7415,"saved":false}
{"ts":1351541671823,"patch":[[{"diffs":[[0,"   if (s"],[1,"t"],[0,"\n    }"]],"start1":7401,"start2":7401,"length1":14,"length2":15}]],"length":7416,"saved":false}
{"ts":1351541673340,"patch":[[{"diffs":[[0,"  if (st"],[1,"r"],[0,"\n    }"]],"start1":7402,"start2":7402,"length1":14,"length2":15}]],"length":7417,"saved":false}
{"ts":1351541673949,"patch":[[{"diffs":[[0," if (str"],[1,"."],[0,"\n    }"]],"start1":7403,"start2":7403,"length1":14,"length2":15}]],"length":7418,"saved":false}
{"ts":1351541674932,"patch":[[{"diffs":[[0,"if (str."],[1,"low"],[0,"\n    }"]],"start1":7404,"start2":7404,"length1":14,"length2":17}]],"length":7421,"saved":false}
{"ts":1351541675816,"patch":[[{"diffs":[[0,"(str.low"],[1,"e"],[0,"\n    }"]],"start1":7407,"start2":7407,"length1":14,"length2":15}]],"length":7422,"saved":false}
{"ts":1351541677692,"patch":[[{"diffs":[[0,"str."],[-1,"lowe"],[1,"to"],[0,"\n   "]],"start1":7408,"start2":7408,"length1":12,"length2":10}]],"length":7420,"saved":false}
{"ts":1351541680380,"patch":[[{"diffs":[[0," (str.to"],[1,"Lo"],[0,"\n    }"]],"start1":7406,"start2":7406,"length1":14,"length2":16}]],"length":7422,"saved":false}
{"ts":1351541681433,"patch":[[{"diffs":[[0,"str.toLo"],[1,"werC"],[0,"\n    }"]],"start1":7408,"start2":7408,"length1":14,"length2":18}]],"length":7426,"saved":false}
{"ts":1351541682728,"patch":[[{"diffs":[[0,"toLowerC"],[1,"ase"],[0,"\n    }"]],"start1":7412,"start2":7412,"length1":14,"length2":17}]],"length":7429,"saved":false}
{"ts":1351541683890,"patch":[[{"diffs":[[0,"owerCase"],[1,"() "],[0,"\n    }"]],"start1":7415,"start2":7415,"length1":14,"length2":17}]],"length":7432,"saved":false}
{"ts":1351541684866,"patch":[[{"diffs":[[0,"rCase() "],[1,"= "],[0,"\n    }"]],"start1":7418,"start2":7418,"length1":14,"length2":16}]],"length":7434,"saved":false}
{"ts":1351541685923,"patch":[[{"diffs":[[0,"Case() ="],[-1," "],[1,"=="],[0,"\n    }"]],"start1":7419,"start2":7419,"length1":15,"length2":16}]],"length":7435,"saved":false}
{"ts":1351541687251,"patch":[[{"diffs":[[0,"se() ==="],[1," "],[0,"\n    }"]],"start1":7421,"start2":7421,"length1":14,"length2":15}]],"length":7436,"saved":false}
{"ts":1351541689514,"patch":[[{"diffs":[[0,"e() === "],[1,"\""],[0,"\n    }"]],"start1":7422,"start2":7422,"length1":14,"length2":15}]],"length":7437,"saved":false}
{"ts":1351541691378,"patch":[[{"diffs":[[0,"() === \""],[1,"false"],[0,"\n    }"]],"start1":7423,"start2":7423,"length1":14,"length2":19}]],"length":7442,"saved":false}
{"ts":1351541693045,"patch":[[{"diffs":[[0,") === \"false"],[1,"\")"],[0,"\n    }"]],"start1":7424,"start2":7424,"length1":18,"length2":20}]],"length":7444,"saved":false}
{"ts":1351541695165,"patch":[[{"diffs":[[0,"\"false\")"],[1,"{\n        }"],[0,"\n    }"]],"start1":7430,"start2":7430,"length1":14,"length2":25}]],"length":7455,"saved":false}
{"ts":1351541696327,"patch":[[{"diffs":[[0,"= \"false\"){\n"],[1,"            \n"],[0,"        }\n  "]],"start1":7428,"start2":7428,"length1":24,"length2":37}]],"length":7468,"saved":false}
{"ts":1351541707651,"patch":[[{"diffs":[[0,"\"false\")"],[1,")"],[0,"{\n      "]],"start1":7430,"start2":7430,"length1":16,"length2":17}]],"length":7469,"saved":false}
{"ts":1351541708909,"patch":[[{"diffs":[[0,"\"false\")"],[-1,")"],[0,"{\n      "]],"start1":7430,"start2":7430,"length1":17,"length2":16}]],"length":7468,"saved":false}
{"ts":1351541713023,"patch":[[{"diffs":[[0,"   \n    "],[1,"var "],[0,"getLegen"]],"start1":7366,"start2":7366,"length1":16,"length2":20}]],"length":7472,"saved":false}
{"ts":1351541717858,"patch":[[{"diffs":[[0,"ndConfig"],[1," = "],[0,"(str){\n "]],"start1":7385,"start2":7385,"length1":16,"length2":19}]],"length":7475,"saved":false}
{"ts":1351541719421,"patch":[[{"diffs":[[0,"onfig = "],[1,"func"],[0,"(str){\n "]],"start1":7388,"start2":7388,"length1":16,"length2":20}]],"length":7479,"saved":false}
{"ts":1351541720621,"patch":[[{"diffs":[[0,"g = func"],[1,"tion"],[0,"(str){\n "]],"start1":7392,"start2":7392,"length1":16,"length2":20}]],"length":7483,"saved":false}
{"ts":1351541768826,"patch":[[{"diffs":[[0,"            "],[1,"\""],[0,"\n        }\n "]],"start1":7455,"start2":7455,"length1":24,"length2":25}]],"length":7484,"saved":false}
{"ts":1351541772423,"patch":[[{"diffs":[[0,"        "],[-1,"\""],[1,"ret"],[0,"\n       "]],"start1":7459,"start2":7459,"length1":17,"length2":19}]],"length":7486,"saved":false}
{"ts":1351541773566,"patch":[[{"diffs":[[0,"     ret"],[1,"urn"],[0,"\n       "]],"start1":7462,"start2":7462,"length1":16,"length2":19}]],"length":7489,"saved":false}
{"ts":1351541775867,"patch":[[{"diffs":[[0,"  return"],[1," false"],[0,"\n       "]],"start1":7465,"start2":7465,"length1":16,"length2":22}]],"length":7495,"saved":false}
{"ts":1351541781259,"patch":[[{"diffs":[[0,"return false"],[1,";"],[0,"\n        }\n "]],"start1":7467,"start2":7467,"length1":24,"length2":25}]],"length":7496,"saved":false}
{"ts":1351541784199,"patch":[[{"diffs":[[0,";\n        }\n"],[1,"        else\n"],[0,"    }"]],"start1":7479,"start2":7479,"length1":17,"length2":30}]],"length":7509,"saved":false}
{"ts":1351541785712,"patch":[[{"diffs":[[0,"    else"],[1,"{\n        }"],[0,"\n    }"]],"start1":7495,"start2":7495,"length1":14,"length2":25}]],"length":7520,"saved":false}
{"ts":1351541786968,"patch":[[{"diffs":[[0,"}\n        else{\n"],[1,"            \n"],[0,"        }\n    }"]],"start1":7489,"start2":7489,"length1":31,"length2":44}]],"length":7533,"saved":false}
{"ts":1351541788766,"patch":[[{"diffs":[[0,"            "],[1,"return "],[0,"\n        }\n "]],"start1":7505,"start2":7505,"length1":24,"length2":31}]],"length":7540,"saved":false}
{"ts":1351541790196,"patch":[[{"diffs":[[0," return "],[1,"true;"],[0,"\n       "]],"start1":7516,"start2":7516,"length1":16,"length2":21}]],"length":7545,"saved":false}
{"ts":1351541790618,"patch":[[{"diffs":[[0,"    });\n"],[-1,"    "],[0,"\n    var"]],"start1":7357,"start2":7357,"length1":20,"length2":16}]],"length":7541,"saved":false}
{"ts":1351542571597,"patch":[[{"diffs":[[0,"end) == "],[-1,"false"],[1,"\""],[0,"){\n    \t"]],"start1":2077,"start2":2077,"length1":21,"length2":17}]],"length":7537,"saved":false}
{"ts":1351542573267,"patch":[[{"diffs":[[0,"nd) == \""],[1,"false"],[0,"){\n    \t"]],"start1":2078,"start2":2078,"length1":16,"length2":21}]],"length":7542,"saved":false}
{"ts":1351542574031,"patch":[[{"diffs":[[0,"= \"false"],[1,"\""],[0,"){\n    \t"]],"start1":2083,"start2":2083,"length1":16,"length2":17}]],"length":7543,"saved":false}
{"ts":1351542577320,"patch":[[{"diffs":[[0,"gend) =="],[1,"="],[0," \"false\""]],"start1":2076,"start2":2076,"length1":16,"length2":17}]],"length":7544,"saved":false}
{"ts":1351542586156,"patch":[[{"diffs":[[0," return "],[1,"\""],[0,"false"],[1,"\""],[0,";\n      "]],"start1":7465,"start2":7465,"length1":21,"length2":23},{"diffs":[[0," return "],[1,"\""],[0,"true"],[1,"\""],[0,";\n      "]],"start1":7517,"start2":7517,"length1":20,"length2":22},{"diffs":[[0,"     }\n    }"],[1,";"]],"start1":7536,"start2":7536,"length1":12,"length2":13}]],"length":7549,"saved":false}
{"ts":1351542879058,"patch":[[{"diffs":[[0,"apsKey;\n       }"],[1,"\n       \n       (configOptions.legend)"],[0,"\n\n       if (get"]],"start1":2015,"start2":2015,"length1":32,"length2":70}]],"length":7587,"saved":false}
{"ts":1351542884713,"patch":[[{"diffs":[[0,"\n       "],[1,"console"],[0,"(configO"]],"start1":2039,"start2":2039,"length1":16,"length2":23}]],"length":7594,"saved":false}
{"ts":1351542885867,"patch":[[{"diffs":[[0," console"],[1,"."],[0,"(configO"]],"start1":2046,"start2":2046,"length1":16,"length2":17}]],"length":7595,"saved":false}
{"ts":1351542887205,"patch":[[{"diffs":[[0,"console."],[1,"log"],[0,"(configO"]],"start1":2047,"start2":2047,"length1":16,"length2":19}]],"length":7598,"saved":false}
{"ts":1351542887693,"patch":[[{"diffs":[[0,"      }\n"],[-1,"       "],[0,"\n       "]],"start1":2024,"start2":2024,"length1":23,"length2":16}]],"length":7591,"saved":false}
{"ts":1351542982852,"patch":[[{"diffs":[[0,"legend) === "],[-1,"\""],[0,"false\"){\n   "]],"start1":2116,"start2":2116,"length1":25,"length2":24}]],"length":7590,"saved":false}
{"ts":1351542984110,"patch":[[{"diffs":[[0,"d) === false"],[-1,"\""],[0,"){\n    \t   $"]],"start1":2121,"start2":2121,"length1":25,"length2":24}]],"length":7589,"saved":false}
{"ts":1351542989592,"patch":[[{"diffs":[[0," });"],[-1,"\n\n    var getLegendConfig = function(str){\n        if (str.toLowerCase() === \"false\"){\n            return \"false\";\n        }\n        else{\n            return \"true\";\n        }\n    };"]],"start1":7403,"start2":7403,"length1":186,"length2":4}]],"length":7407,"saved":false}
{"ts":1351543029908,"patch":[[{"diffs":[[0," if "],[-1,"(getLegendConfig"],[0,"(con"]],"start1":2081,"start2":2081,"length1":24,"length2":8}]],"length":7391,"saved":false}
{"ts":1351543031616,"patch":[[{"diffs":[[0,"s.legend"],[-1,")"],[0," === fal"]],"start1":2098,"start2":2098,"length1":17,"length2":16}]],"length":7390,"saved":false}
{"ts":1351543077403,"patch":[[{"diffs":[[0,".legend === "],[1,"\""],[0,"false){\n    "]],"start1":2099,"start2":2099,"length1":24,"length2":25}]],"length":7391,"saved":false}
{"ts":1351543078938,"patch":[[{"diffs":[[0,"= \"false"],[1,"\""],[0,"){\n    \t"]],"start1":2109,"start2":2109,"length1":16,"length2":17}]],"length":7392,"saved":false}
{"ts":1351543110634,"patch":[[{"diffs":[[0,"ebmap;\n       }\n"],[1,"       if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;\n       }\n"],[0,"       if(urlObj"]],"start1":1901,"start2":1901,"length1":32,"length2":132}]],"length":7492,"saved":false}
{"ts":1351543123162,"patch":[[{"diffs":[[0,"egend =="],[-1,"= \""],[1," "],[0,"false\"){"]],"start1":2201,"start2":2201,"length1":19,"length2":17}]],"length":7490,"saved":false}
{"ts":1351543125410,"patch":[[{"diffs":[[0,"== false"],[-1,"\""],[0,"){\n    \t"]],"start1":2207,"start2":2207,"length1":17,"length2":16}]],"length":7489,"saved":false}
{"ts":1351543133919,"patch":[[{"diffs":[[0,"egend =="],[-1," "],[1,"="],[0,"false"],[1,"\""],[0,"){\n    \t"]],"start1":2201,"start2":2201,"length1":22,"length2":23}]],"length":7490,"saved":false}
{"ts":1351543134701,"patch":[[{"diffs":[[0,"gend ==="],[1," "],[0,"false\"){"]],"start1":2202,"start2":2202,"length1":16,"length2":17}]],"length":7491,"saved":false}
{"ts":1351543135707,"patch":[[{"diffs":[[0,".legend === "],[1,"\""],[0,"false\"){\n   "]],"start1":2199,"start2":2199,"length1":24,"length2":25}]],"length":7492,"saved":false}
{"ts":1351543136493,"patch":[[{"diffs":[[0,"  }\n"],[-1,"       if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;\n       }\n"],[0,"    "]],"start1":1913,"start2":1913,"length1":108,"length2":8}]],"length":7392,"saved":false}
{"ts":1351543137900,"patch":[[{"diffs":[[0,"ebmap;\n       }\n"],[1,"       if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;\n       }\n"],[0,"       if(urlObj"]],"start1":1901,"start2":1901,"length1":32,"length2":132}]],"length":7492,"saved":false}
{"ts":1351543139513,"patch":[[{"diffs":[[0,"gend ==="],[-1," \""],[0,"false\"){"]],"start1":2202,"start2":2202,"length1":18,"length2":16}]],"length":7490,"saved":false}
{"ts":1351543140145,"patch":[[{"diffs":[[0,"egend =="],[-1,"="],[0,"false\"){"]],"start1":2201,"start2":2201,"length1":17,"length2":16}]],"length":7489,"saved":false}
{"ts":1351543141206,"patch":[[{"diffs":[[0,"egend =="],[1,"= \""],[0,"false\"){"]],"start1":2201,"start2":2201,"length1":16,"length2":19}]],"length":7492,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352134650291,"patch":[[{"diffs":[[0," \"false\""],[1," || configOptions.legend === false"],[0,"){\n"],[-1,""],[0,"    \t   "]],"start1":2210,"start2":2210,"length1":19,"length2":53},{"diffs":[[0," }\n       else{\n"],[1,""],[0,"         $(\"#leg"]],"start1":4071,"start2":4071,"length1":32,"length2":32},{"diffs":[[0," });"],[-1,"  dojo.require(\"esri.map\");\n  dojo.require(\"esri.dijit.Legend\");\n  dojo.require(\"esri.dijit.Scalebar\");\n  dojo.require(\"esri.arcgis.utils\");\n  dojo.require(\"esri.IdentityManager\");\n  dojo.require(\"dijit.dijit\");\n  dojo.require(\"dijit.layout.BorderContainer\");\n  dojo.require(\"dijit.layout.ContentPane\");\n  dojo.require(\"dijit.layout.StackContainer\");\n  dojo.requireLocalization(\"esriTemplate\",\"template\");\n\n\n     var map, urlObjects, i18n;\n\n\t function initMap() {\n       patchID();\n\n\t   //get the localization strings\n  \t   i18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\n\n\t   dojo.byId('loading').innerHTML = i18n.viewer.loading.message;\n\t   dojo.byId('legTogText').innerHTML = i18n.viewer.legToggle.down;\n\n       if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\n         configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\n       }\n       esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);\n\n       if(!configOptions.sharingurl){\n         configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\n       }\n       esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\n\n       if(!configOptions.proxyurl){\n         configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\n       }\n\n       esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\n\n       esri.config.defaults.io.alwaysUseProxy = false;\n\n       urlObject = esri.urlToObject(document.location.href);\n       urlObject.query = urlObject.query || {};\n\n       if(urlObject.query.title){\n         configOptions.title = urlObject.query.title;\n       }\n       if(urlObject.query.subtitle){\n         configOptions.title = urlObject.query.subtitle;\n       }\n       if(urlObject.query.webmap){\n         configOptions.webmap = urlObject.query.webmap;\n       }\n       if(urlObject.query.bingMapsKey){\n         configOptions.bingmapskey = urlObject.query.bingMapsKey;\n       }\n\n\t   var mapDeferred = esri.arcgis.utils.createMap(configOptions.webmap, \"map\", {\n         mapOptions: {\n           slider: true,\n           nav: false,\n           wrapAround180:true\n         },\n         ignorePopups:false,\n         bingMapsKey: configOptions.bingmapskey\n       });\n\n       mapDeferred.addCallback(function (response) {\n\n\t\t document.title = configOptions.title|| response.itemInfo.item.title || \"\";\n         dojo.byId(\"title\").innerHTML = configOptions.title ||response.itemInfo.item.title || \"\";\n         dojo.byId(\"subtitle\").innerHTML = configOptions.subtitle|| response.itemInfo.item.snippet || \"\";\n\n         map = response.map;\n\n\t\t dojo.connect(map,\"onUpdateEnd\",hideLoader);\n\n         var layers = response.itemInfo.itemData.operationalLayers;\n         if(map.loaded){\n           initUI(layers);\n         }\n         else{\n           dojo.connect(map,\"onLoad\",function(){\n             initUI(layers);\n           });\n         }\n         //resize the map when the browser resizes\n         dojo.connect(dijit.byId('map'), 'resize', map,map.resize);\n       });\n\n       mapDeferred.addErrback(function (error) {\n         alert(i18n.viewer.errors.createMap + dojo.toJson(error.message));\n       });\n\n     }\n\n\n     function initUI(layers) {\n       //add chrome theme for popup\n       dojo.addClass(map.infoWindow.domNode, \"chrome\");\n       //add the scalebar\n       var scalebar = new esri.dijit.Scalebar({\n         map: map,\n         scalebarUnit:i18n.viewer.main.scaleBarUnits //metric or english\n       });\n\n       var layerInfo = buildLayersList(layers);\n\n       if(layerInfo.length > 0){\n         var legendDijit = new esri.dijit.Legend({\n           map:map,\n           layerInfos:layerInfo\n         },\"legendDiv\");\n         legendDijit.startup();\n       }\n       else{\n         dojo.byId('legendDiv').innerHTML = \"\";\n       }\n     }\n\n//build a list of layers to dispaly in the legend\n  function buildLayersList(layers){\n\n //layers  arg is  response.itemInfo.itemData.operationalLayers;\n  var layerInfos = [];\n  dojo.forEach(layers, function (mapLayer, index) {\n      var layerInfo = {};\n      if (mapLayer.featureCollection && mapLayer.type !== \"CSV\") {\n        if (mapLayer.featureCollection.showLegend === true) {\n            dojo.forEach(mapLayer.featureCollection.layers, function (fcMapLayer) {\n              if (fcMapLayer.showLegend !== false) {\n                  layerInfo = {\n                      \"layer\": fcMapLayer.layerObject,\n                      \"title\": mapLayer.title,\n                      \"defaultSymbol\": false\n                  };\n                  if (mapLayer.featureCollection.layers.length > 1) {\n                      layerInfo.title += \" - \" + fcMapLayer.layerDefinition.name;\n                  }\n                  layerInfos.push(layerInfo);\n              }\n            });\n          }\n      } else if (mapLayer.showLegend !== false && mapLayer.layerObject) {\n      var showDefaultSymbol = false;\n      if (mapLayer.layerObject.version < 10.1 && (mapLayer.layerObject instanceof esri.layers.ArcGISDynamicMapServiceLayer || mapLayer.layerObject instanceof esri.layers.ArcGISTiledMapServiceLayer)) {\n        showDefaultSymbol = true;\n      }\n      layerInfo = {\n        \"layer\": mapLayer.layerObject,\n        \"title\": mapLayer.title,\n        \"defaultSymbol\": showDefaultSymbol\n      };\n        //does it have layers too? If so check to see if showLegend is false\n        if (mapLayer.layers) {\n            var hideLayers = dojo.map(dojo.filter(mapLayer.layers, function (lyr) {\n                return (lyr.showLegend === false);\n            }), function (lyr) {\n                return lyr.id;\n            });\n            if (hideLayers.length) {\n                layerInfo.hideLayers = hideLayers;\n            }\n        }\n        layerInfos.push(layerInfo);\n    }\n  });\n  return layerInfos;\n  }\n\n\n     function patchID() {  //patch id manager for use in apps.arcgis.com\n       esri.id._isIdProvider = function(server, resource) {\n       // server and resource are assumed one of portal domains\n\n       var i = -1, j = -1;\n\n       dojo.forEach(this._gwDomains, function(domain, idx) {\n         if (i === -1 && domain.regex.test(server)) {\n           i = idx;\n         }\n         if (j === -1 && domain.regex.test(resource)) {\n           j = idx;\n         }\n       });\n\n       var retVal = false;\n\n       if (i > -1 && j > -1) {\n         if (i === 0 || i === 4) {\n           if (j === 0 || j === 4) {\n             retVal = true;\n           }\n         }\n         else if (i === 1) {\n           if (j === 1 || j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 2) {\n           if (j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 3) {\n           if (j === 3) {\n             retVal = true;\n           }\n         }\n       }\n\n       return retVal;\n     };\n    }\n\n\tfunction hideLoader(){\n\t  $(\"#loadingCon\").hide();\n\t}\n\n\t//Jquery Layout\n\t$(document).ready(function(e) {\n\t  $(\"#legendToggle\").click(function(){\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });"]],"start1":7522,"start2":7522,"length1":7277,"length2":4}]],"length":7526,"saved":false}
{"ts":1352134689006,"patch":[[{"diffs":[[0,"  \t   $(\"#legend"],[-1,"Toggle"],[1,"Con"],[0,"\").hide();\n\t   }"]],"start1":2257,"start2":2257,"length1":38,"length2":35}]],"length":7523,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352221848920,"patch":[[{"diffs":[[0,"esri.map\");\n"],[1,"  dojo.require(\"esri.widgets\");\n  dojo.require(\"esri.layout\");\n"],[0,"  dojo.requi"]],"start1":16,"start2":16,"length1":24,"length2":87}]],"length":7586,"saved":false}
{"ts":1352222342158,"patch":[[{"diffs":[[0,"\");\n"],[-1,"  dojo.require(\"esri.widgets\");\n  dojo.require(\"esri.layout\");\n"],[0,"  do"]],"start1":24,"start2":24,"length1":71,"length2":8}]],"length":7523,"saved":false}
{"ts":1352222918438,"patch":[[{"diffs":[[0,"tchID();"],[1,"\n       \n       dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });"],[0,"\n\n\t   //"]],"start1":473,"start2":473,"length1":16,"length2":204}]],"length":7711,"saved":false}
{"ts":1352222990070,"patch":[[{"diffs":[[0,"     });"],[1,"\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n       }"],[0,"\n\n\t   //"]],"start1":661,"start2":661,"length1":16,"length2":317}]],"length":8012,"saved":false}
{"ts":1352224550752,"patch":[[{"diffs":[[0," });\n       "],[1,"//"],[0,"var dirNode "]],"start1":665,"start2":665,"length1":24,"length2":26},{"diffs":[[0,"Left){\n         "],[1,"//"],[0,"dirNode.setAttri"]],"start1":768,"start2":768,"length1":32,"length2":34},{"diffs":[[0,"rtl\");\n         "],[1,"//"],[0,"dojo.addClass( d"]],"start1":814,"start2":814,"length1":32,"length2":34},{"diffs":[[0,"        "],[1,"//"],[0,"dirNode."]],"start1":882,"start2":882,"length1":16,"length2":18},{"diffs":[[0,");\n         "],[1,"//"],[0,"dojo.addClas"]],"start1":924,"start2":924,"length1":24,"length2":26}]],"length":8022,"saved":false}
{"ts":1352225845143,"patch":[[{"diffs":[[0,"Left){\n         "],[-1,"//"],[0,"dirNode.setAttri"]],"start1":768,"start2":768,"length1":34,"length2":32},{"diffs":[[0,"rtl\");\n         "],[-1,"//"],[0,"dojo.addClass( d"]],"start1":812,"start2":812,"length1":34,"length2":32},{"diffs":[[0,"        "],[-1,"//"],[0,"dirNode."]],"start1":878,"start2":878,"length1":18,"length2":16},{"diffs":[[0,"        "],[-1,"//"],[0,"dojo.add"]],"start1":922,"start2":922,"length1":18,"length2":16}]],"length":8014,"saved":false}
{"ts":1352225944627,"patch":[[{"diffs":[[0,"\n       "],[-1,"//"],[0,"var dirN"]],"start1":669,"start2":669,"length1":18,"length2":16}]],"length":8012,"saved":false}
{"ts":1352228126745,"patch":[[{"diffs":[[0,"\"esriRtl\");\n"],[1,"         //Page Specific\n         dojo.attr(dojo.byId(\"legendCon\"),\"dir\",\"rtl\");\n"],[0,"       }else"]],"start1":849,"start2":849,"length1":24,"length2":105}]],"length":8093,"saved":false}
{"ts":1352228156083,"patch":[[{"diffs":[[0,"\"esriLtr\");\n"],[1,"         //Page Specific\n         dojo.attr(dojo.byId(\"legendCon\"),\"dir\",\"ltr\");\n"],[0,"       }\n\n\t "]],"start1":1031,"start2":1031,"length1":24,"length2":105}]],"length":8174,"saved":false}
{"ts":1352231597429,"patch":[[{"diffs":[[0,"(\"le"],[-1,"gendCon\"),\"dir\",\"rtl"],[1,"ftPane\"),\"region\",\"right"],[0,"\");\n"]],"start1":914,"start2":914,"length1":28,"length2":32},{"diffs":[[0,"(\"le"],[-1,"gendCon\"),\"dir"],[1,"ftPane\"),\"region"],[0,"\",\"l"],[1,"ef"],[0,"t"],[-1,"r"],[0,"\");\n"]],"start1":1100,"start2":1100,"length1":28,"length2":31}]],"length":8181,"saved":false}
{"ts":1352231621095,"patch":[[{"diffs":[[0,"(\"le"],[-1,"ftPane\"),\"region\",\"right"],[1,"gendCon\"),\"dir\",\"rtl"],[0,"\");\n"]],"start1":914,"start2":914,"length1":32,"length2":28},{"diffs":[[0,"(\"le"],[-1,"ftPane\"),\"region"],[1,"gendCon\"),\"dir"],[0,"\",\"l"],[-1,"ef"],[0,"t"],[1,"r"],[0,"\");\n"]],"start1":1096,"start2":1096,"length1":31,"length2":28}]],"length":8174,"saved":false}
{"contributors":[],"silentsave":true,"ts":1352241166982,"patch":[[{"diffs":[[0,": true,\n"],[1,"           \n"],[0,"        "]],"start1":3066,"start2":3066,"length1":16,"length2":28}]],"length":8186,"saved":false}
{"ts":1352241169125,"patch":[[{"diffs":[[0,"\n           "],[1,"slider"],[0,"\n           "]],"start1":3073,"start2":3073,"length1":24,"length2":30}]],"length":8192,"saved":false}
{"ts":1352241171646,"patch":[[{"diffs":[[0,"  slider"],[1,"Style:\""],[0,"\n       "]],"start1":3083,"start2":3083,"length1":16,"length2":23}]],"length":8199,"saved":false}
{"ts":1352241172060,"patch":[[{"diffs":[[0,"chID();\n"],[-1,"       "],[0,"\n       "]],"start1":474,"start2":474,"length1":23,"length2":16}]],"length":8192,"saved":false}
{"ts":1352241173552,"patch":[[{"diffs":[[0,"rStyle:\""],[1,"small\""],[0,"\n       "]],"start1":3083,"start2":3083,"length1":16,"length2":22}]],"length":8198,"saved":false}
{"ts":1352241175019,"patch":[[{"diffs":[[0,":\"small\""],[1,","],[0,"\n       "]],"start1":3089,"start2":3089,"length1":16,"length2":17}]],"length":8199,"saved":false}
{"ts":1352241297179,"patch":[[{"diffs":[[0,"esri.map\");\n"],[1,"  dojo.require(\"esri.layout\"); \n"],[0,"  dojo.requi"]],"start1":16,"start2":16,"length1":24,"length2":56}]],"length":8231,"saved":false}
{"ts":1352241303906,"patch":[[{"diffs":[[0,"ayout\");"],[-1," "],[1,"\n  dojo.require(\"esri.widgets\");"],[0,"\n  dojo."]],"start1":50,"start2":50,"length1":17,"length2":48}]],"length":8262,"saved":false}
{"ts":1352241319277,"patch":[[{"diffs":[[0,"\");\n"],[-1,"  dojo.require(\"esri.dijit.Legend\");\n  dojo.require(\"esri.dijit.Scalebar\");\n"],[0,"  do"]],"start1":87,"start2":87,"length1":84,"length2":8},{"diffs":[[0,"t\");"],[-1,"\n  dojo.require(\"dijit.layout.BorderContainer\");\n  dojo.require(\"dijit.layout.ContentPane\");\n  dojo.require(\"dijit.layout.StackContainer\")"],[0,";\n  "]],"start1":194,"start2":194,"length1":146,"length2":8}]],"length":8048,"saved":false}
{"ts":1352241351261,"patch":[[{"diffs":[[0,"dijit\");"],[-1,";"],[0,"\n  dojo."]],"start1":190,"start2":190,"length1":17,"length2":16}]],"length":8047,"saved":false}
{"ts":1352241354871,"patch":[[{"diffs":[[0,"\");\n"],[-1,"  dojo.require(\"dijit.dijit\");\n"],[0,"  do"]],"start1":164,"start2":164,"length1":39,"length2":8}]],"length":8016,"saved":false}
{"ts":1352241375431,"patch":[[{"diffs":[[0," }\n\n"],[-1,"       console.log(configOptions.legend)\n\n"],[0,"    "]],"start1":2590,"start2":2590,"length1":50,"length2":8}]],"length":7974,"saved":false}
{"ts":1352241407111,"patch":[[{"diffs":[[0,"\");\n"],[-1,"  dojo.require(\"esri.IdentityManager\");\n"],[0,"  do"]],"start1":124,"start2":124,"length1":48,"length2":8}]],"length":7934,"saved":false}
{"ts":1352241420227,"patch":[[{"diffs":[[0,"\");\n"],[-1,"  dojo.require(\"esri.arcgis.utils\");\n"],[0,"  do"]],"start1":87,"start2":87,"length1":45,"length2":8}]],"length":7897,"saved":false}
{"ts":1352241429055,"patch":[[{"diffs":[[0,".widgets\");\n"],[1,"  dojo.require(\"esri.arcgis.utils\");\n"],[0,"  dojo.requi"]],"start1":79,"start2":79,"length1":24,"length2":61}]],"length":7934,"saved":false}
{"ts":1352241544887,"patch":[[{"diffs":[[0,"rlObject"],[-1,"s"],[0,", i18n;\n"]],"start1":200,"start2":200,"length1":17,"length2":16}]],"length":7933,"saved":false}
{"contributors":[],"silentsave":true,"ts":1352303504903,"patch":[[{"diffs":[[0,"is.utils\");\n"],[1,"  dojo.require(\"utilities.layout\");\n"],[0,"  dojo.requi"]],"start1":116,"start2":116,"length1":24,"length2":60}]],"length":7969,"saved":false}
{"ts":1352303521452,"patch":[[{"diffs":[[0,"late\");\n"],[1,"  \n  dojo.provide(\"utilities.layout\");\n"],[0,"\n\n     v"]],"start1":211,"start2":211,"length1":16,"length2":55}]],"length":8008,"saved":false}
{"ts":1352303551117,"patch":[[{"diffs":[[0," \n  "],[-1,"dojo.provide(\"utilities.layout\");\n"],[0,"\n\n  "]],"start1":220,"start2":220,"length1":42,"length2":8}]],"length":7974,"saved":false}
{"ts":1352303553729,"patch":[[{"diffs":[[0,"e\");"],[-1,"\n  \n  "],[0,"\n\n  "]],"start1":214,"start2":214,"length1":14,"length2":8}]],"length":7968,"saved":false}
{"ts":1352303557531,"patch":[[{"diffs":[[1,"  \n  \n"],[0,"  dojo.require(\"esri.map\");\n"]],"start1":0,"start2":0,"length1":28,"length2":34}]],"length":7974,"saved":false}
{"ts":1352303558936,"patch":[[{"diffs":[[0,"  "],[1,"dojo.provide(\"utilities.layout\");\n"],[0,"\n  \n  do"]],"start1":0,"start2":0,"length1":10,"length2":44}]],"length":8008,"saved":false}
{"ts":1352303560125,"patch":[[{"diffs":[[0,"yout\");\n"],[-1,"\n"],[0,"  \n  doj"]],"start1":28,"start2":28,"length1":17,"length2":16}]],"length":8007,"saved":false}
{"ts":1352303560472,"patch":[[{"diffs":[[0,"yout\");\n"],[-1,"  "],[0,"\n  dojo."]],"start1":28,"start2":28,"length1":18,"length2":16}]],"length":8005,"saved":false}
{"ts":1352303569885,"patch":[[{"diffs":[[0,"plate\");"],[1,"\n  \n  utilities.layout = {};"],[0,"\n\n     v"]],"start1":247,"start2":247,"length1":16,"length2":44}]],"length":8033,"saved":false}
{"ts":1352303581857,"patch":[[{"diffs":[[0,"layout = {};"],[1,"\n  dojo.mixin(utilities.layout,{"],[0,"\n\n     var m"]],"start1":271,"start2":271,"length1":24,"length2":56}]],"length":8065,"saved":false}
{"ts":1352303587219,"patch":[[{"diffs":[[0," });\n    });"],[1,"\n    "]],"start1":8053,"start2":8053,"length1":12,"length2":17}]],"length":8070,"saved":false}
{"ts":1352303588276,"patch":[[{"diffs":[[0,"  });\n    });\n  "],[-1,"  "],[1,"}"]],"start1":8052,"start2":8052,"length1":18,"length2":17}]],"length":8069,"saved":false}
{"ts":1352303593993,"patch":[[{"diffs":[[0,"\n    });\n  }"],[1,";"]],"start1":8057,"start2":8057,"length1":12,"length2":13}]],"length":8070,"saved":false}
{"ts":1352303595177,"patch":[[{"diffs":[[0," });\n  }"],[-1,";"]],"start1":8061,"start2":8061,"length1":9,"length2":8}]],"length":8069,"saved":false}
{"ts":1352303634373,"patch":[[{"diffs":[[0,"{\n\n     "],[-1,"var "],[0,"map, url"]],"start1":314,"start2":314,"length1":20,"length2":16}]],"length":8065,"saved":false}
{"ts":1352303637344,"patch":[[{"diffs":[[0,"     map"],[1,":null"],[0,", urlObj"]],"start1":317,"start2":317,"length1":16,"length2":21}]],"length":8070,"saved":false}
{"ts":1352303640192,"patch":[[{"diffs":[[0,"ap:null,"],[1,"\n    "],[0," urlObje"]],"start1":323,"start2":323,"length1":16,"length2":21}]],"length":8075,"saved":false}
{"ts":1352303644685,"patch":[[{"diffs":[[0,"rlObject"],[1,":null"],[0,", i18n;\n"]],"start1":338,"start2":338,"length1":16,"length2":21}]],"length":8080,"saved":false}
{"ts":1352303646730,"patch":[[{"diffs":[[0,"ct:null,"],[1,"\n    "],[0," i18n;\n\n"]],"start1":344,"start2":344,"length1":16,"length2":21}]],"length":8085,"saved":false}
{"ts":1352303655424,"patch":[[{"diffs":[[0,"    i18n"],[-1,";"],[0,"\n\n\t func"]],"start1":354,"start2":354,"length1":17,"length2":16}]],"length":8084,"saved":false}
{"ts":1352303656603,"patch":[[{"diffs":[[0,"    i18n"],[1,":"],[0,"\n\n\t func"]],"start1":354,"start2":354,"length1":16,"length2":17}]],"length":8085,"saved":false}
{"ts":1352303657949,"patch":[[{"diffs":[[0,"   i18n:"],[1,"null"],[0,"\n\n\t func"]],"start1":355,"start2":355,"length1":16,"length2":20}]],"length":8089,"saved":false}
{"ts":1352303658860,"patch":[[{"diffs":[[0,"18n:null"],[1,","],[0,"\n\n\t func"]],"start1":359,"start2":359,"length1":16,"length2":17}]],"length":8090,"saved":false}
{"ts":1352303685496,"patch":[[{"diffs":[[0,"ion "],[-1,"initMap"],[0,"() {"]],"start1":377,"start2":377,"length1":15,"length2":8}]],"length":8083,"saved":false}
{"ts":1352303686202,"patch":[[{"diffs":[[0,"function"],[-1," "],[0,"() {\n   "]],"start1":372,"start2":372,"length1":17,"length2":16}]],"length":8082,"saved":false}
{"ts":1352303689350,"patch":[[{"diffs":[[0,"ull,\n\n\t "],[1,"initMap"],[0,"function"]],"start1":364,"start2":364,"length1":16,"length2":23}]],"length":8089,"saved":false}
{"ts":1352303690462,"patch":[[{"diffs":[[0," initMap"],[1,":"],[0,"function"]],"start1":371,"start2":371,"length1":16,"length2":17}]],"length":8090,"saved":false}
{"ts":1352303694472,"patch":[[{"diffs":[[0,"\n       "],[1,"thid"],[0,"patchID("]],"start1":392,"start2":392,"length1":16,"length2":20}]],"length":8094,"saved":false}
{"ts":1352303695782,"patch":[[{"diffs":[[0,"     thi"],[-1,"d"],[1,"s."],[0,"patchID("]],"start1":395,"start2":395,"length1":17,"length2":18}]],"length":8095,"saved":false}
{"ts":1352303802021,"patch":[[{"diffs":[[0,"ed){\n           "],[1,"this"],[0,"initUI(layers);\n"]],"start1":3648,"start2":3648,"length1":32,"length2":36}]],"length":8099,"saved":false}
{"ts":1352303803020,"patch":[[{"diffs":[[0,"    this"],[1,"."],[0,"initUI(l"]],"start1":3660,"start2":3660,"length1":16,"length2":17}]],"length":8100,"saved":false}
{"ts":1352303807169,"patch":[[{"diffs":[[0,"        "],[1,"this"],[0,"initUI(l"]],"start1":3765,"start2":3765,"length1":16,"length2":20}]],"length":8104,"saved":false}
{"ts":1352303807875,"patch":[[{"diffs":[[0,"    this"],[1,"."],[0,"initUI(l"]],"start1":3769,"start2":3769,"length1":16,"length2":17}]],"length":8105,"saved":false}
{"ts":1352303835038,"patch":[[{"diffs":[[0,"tion"],[-1," initUI"],[0,"(lay"]],"start1":4105,"start2":4105,"length1":15,"length2":8}]],"length":8098,"saved":false}
{"ts":1352303838291,"patch":[[{"diffs":[[0,"\n\n     }\n\n\n     "],[1,"initUI"],[0,"function(layers)"]],"start1":4085,"start2":4085,"length1":32,"length2":38}]],"length":8104,"saved":false}
{"ts":1352303839320,"patch":[[{"diffs":[[0,"  initUI"],[1,":"],[0,"function"]],"start1":4099,"start2":4099,"length1":16,"length2":17}]],"length":8105,"saved":false}
{"ts":1352303843879,"patch":[[{"diffs":[[0," initUI:"],[1," "],[0,"function"]],"start1":4100,"start2":4100,"length1":16,"length2":17}]],"length":8106,"saved":false}
{"ts":1352303858969,"patch":[[{"diffs":[[0,"    "],[-1," initUI:"],[0," fun"]],"start1":4096,"start2":4096,"length1":16,"length2":8}]],"length":8098,"saved":false}
{"ts":1352303859857,"patch":[[{"diffs":[[0,"function"],[1," initUI"],[0,"(layers)"]],"start1":4101,"start2":4101,"length1":16,"length2":23}]],"length":8105,"saved":false}
{"ts":1352303861701,"patch":[[{"diffs":[[0,"late\");\n"],[-1,"  "],[0,"\n  utili"]],"start1":248,"start2":248,"length1":18,"length2":16}]],"length":8103,"saved":false}
{"ts":1352303879812,"patch":[[{"diffs":[[0,"});\n\n     }\n"],[1,"  }\n"],[0,"\n\n     funct"]],"start1":4080,"start2":4080,"length1":24,"length2":28}]],"length":8107,"saved":false}
{"ts":1352303881877,"patch":[[{"diffs":[[0,"    }\n  "],[-1,"}"],[1,"   "],[0,"\n\n\n     "]],"start1":4086,"start2":4086,"length1":17,"length2":19}]],"length":8109,"saved":false}
{"ts":1352303886383,"patch":[[{"diffs":[[0,"unction "],[-1,"initUI"],[0,"(layers)"]],"start1":4106,"start2":4106,"length1":22,"length2":16}]],"length":8103,"saved":false}
{"ts":1352303887520,"patch":[[{"diffs":[[0,"function"],[-1," "],[0,"(layers)"]],"start1":4105,"start2":4105,"length1":17,"length2":16}]],"length":8102,"saved":false}
{"ts":1352303889652,"patch":[[{"diffs":[[0," }\n     \n\n\n     "],[1,"initUI:"],[0,"function(layers)"]],"start1":4089,"start2":4089,"length1":32,"length2":39}]],"length":8109,"saved":false}
{"ts":1352303890546,"patch":[[{"diffs":[[0," initUI:"],[1," "],[0,"function"]],"start1":4104,"start2":4104,"length1":16,"length2":17}]],"length":8110,"saved":false}
{"ts":1352303902490,"patch":[[{"diffs":[[0,"rInfo = "],[1,"this."],[0,"buildLay"]],"start1":4418,"start2":4418,"length1":16,"length2":21}]],"length":8115,"saved":false}
{"ts":1352303918700,"patch":[[{"diffs":[[0,"tion"],[-1," buildLayersList"],[0,"(lay"]],"start1":4781,"start2":4781,"length1":24,"length2":8}]],"length":8099,"saved":false}
{"ts":1352303921916,"patch":[[{"diffs":[[0,"egend\n  "],[1,"buildLayersList"],[0,"function"]],"start1":4769,"start2":4769,"length1":16,"length2":31}]],"length":8114,"saved":false}
{"ts":1352303923199,"patch":[[{"diffs":[[0,"yersList"],[1,": "],[0,"function"]],"start1":4784,"start2":4784,"length1":16,"length2":18}]],"length":8116,"saved":false}
{"ts":1352304013489,"patch":[[{"diffs":[[0,"tion"],[-1," patchID"],[0,"() {"]],"start1":6724,"start2":6724,"length1":16,"length2":8}]],"length":8108,"saved":false}
{"ts":1352304016872,"patch":[[{"diffs":[[0,"\n\n\n     "],[1,"patchID"],[0,"function"]],"start1":6712,"start2":6712,"length1":16,"length2":23}]],"length":8115,"saved":false}
{"ts":1352304017881,"patch":[[{"diffs":[[0," patchID"],[1,":"],[0,"function"]],"start1":6719,"start2":6719,"length1":16,"length2":17}]],"length":8116,"saved":false}
{"ts":1352304024537,"patch":[[{"diffs":[[0,"tion"],[-1," hideLoader"],[0,"(){\n"]],"start1":7753,"start2":7753,"length1":19,"length2":8}]],"length":8105,"saved":false}
{"ts":1352304026897,"patch":[[{"diffs":[[0,"    }\n\n\t"],[1,"hideLoader"],[0,"function"]],"start1":7741,"start2":7741,"length1":16,"length2":26}]],"length":8115,"saved":false}
{"ts":1352304028280,"patch":[[{"diffs":[[0,"deLoader"],[1,": "],[0,"function"]],"start1":7751,"start2":7751,"length1":16,"length2":18}]],"length":8117,"saved":false}
{"ts":1352304047385,"patch":[[{"diffs":[[0,"\n    });\n  }"],[1,");"]],"start1":8105,"start2":8105,"length1":12,"length2":14}]],"length":8119,"saved":false}
{"ts":1352304055406,"patch":[[{"diffs":[[0,"  });\n  "],[-1,"}"],[0,");"]],"start1":8108,"start2":8108,"length1":11,"length2":10}]],"length":8118,"saved":false}
{"ts":1352304057624,"patch":[[{"diffs":[[0,"\n     }\n"],[-1,"     "],[0,"\n\n\n     "]],"start1":4084,"start2":4084,"length1":21,"length2":16},{"diffs":[[0,"  });\n  "],[1,"}"],[0,");"]],"start1":8103,"start2":8103,"length1":10,"length2":11}]],"length":8114,"saved":false}
{"ts":1352304076464,"patch":[[{"diffs":[[-1,"  dojo.provide(\"utilities.layout\");\n\n"],[0,"  dojo."],[1,""],[0,"requ"]],"start1":0,"start2":0,"length1":48,"length2":11},{"diffs":[[0,"\");\n"],[-1,"  dojo.require(\"utilities.layout\");\n"],[0,"  do"]],"start1":124,"start2":124,"length1":44,"length2":8},{"diffs":[[0,");\n\n"],[1,"\n"],[0,"  "],[-1,"utilities.layout = {};\n  dojo.mixin(utilities.layout,{\n\n     map:null,\n     urlObject:null,\n     i18n:null,\n\n\t initMap:function"],[1,"   var map, urlObject, i18n;\n\n\t function initMap"],[0,"() {"]],"start1":180,"start2":180,"length1":137,"length2":59},{"diffs":[[0,"\n       "],[-1,"this."],[0,"patchID("]],"start1":239,"start2":239,"length1":21,"length2":16},{"diffs":[[0,"ed){\n           "],[-1,"this."],[0,""],[1,""],[0,"initUI(layers);\n"]],"start1":3490,"start2":3490,"length1":37,"length2":32},{"diffs":[[0,"        "],[-1,"this."],[0,""],[1,""],[0,"initUI(l"]],"start1":3602,"start2":3602,"length1":21,"length2":16},{"diffs":[[0,"}\n\n\n"],[-1,"\n"],[0,"    "],[-1," initUI:"],[0," fun"]],"start1":3924,"start2":3924,"length1":21,"length2":12},{"diffs":[[0,"\n\n\n     function"],[1," initUI"],[0,"(layers) {\n     "]],"start1":3925,"start2":3925,"length1":32,"length2":39},{"diffs":[[0,"rInfo = "],[-1,"this."],[0,""],[1,""],[0,"buildLay"]],"start1":4245,"start2":4245,"length1":21,"length2":16},{"diffs":[[0,"egend\n  "],[1,"function "],[0,"buildLay"]],"start1":4591,"start2":4591,"length1":16,"length2":25},{"diffs":[[0,"yersList"],[-1,": function"],[0,"(layers)"]],"start1":4615,"start2":4615,"length1":26,"length2":16},{"diffs":[[0,"    "],[-1,"patchID:"],[0,"function"],[1," patchID"],[0,"() {"]],"start1":6537,"start2":6537,"length1":24,"length2":24},{"diffs":[[0,"    }\n\n\t"],[1,"function "],[0,"hideLoad"]],"start1":7562,"start2":7562,"length1":16,"length2":25},{"diffs":[[0,"ader"],[-1,": function"],[0,"(){\n"]],"start1":7585,"start2":7585,"length1":18,"length2":8},{"diffs":[[0,"  });\n  "],[-1,"  });\n"],[0,""],[1,""],[0,"  });"]],"start1":7920,"start2":7920,"length1":19,"length2":13}]],"length":7933,"saved":false}
{"ts":1352304078551,"patch":[[{"diffs":[[0,"is.utils\");\n"],[1,"  dojo.require(\"utilities.layout\");\n"],[0,"  dojo.requi"]],"start1":116,"start2":116,"length1":24,"length2":60}]],"length":7969,"saved":false}
{"ts":1352304079785,"patch":[[{"diffs":[[0,"late\");\n"],[1,"  \n  dojo.provide(\"utilities.layout\");\n"],[0,"\n\n     v"]],"start1":211,"start2":211,"length1":16,"length2":55}]],"length":8008,"saved":false}
{"ts":1352304080695,"patch":[[{"diffs":[[0,"  \n "],[-1," dojo.provide(\"utilities.layout\");\n"],[0,"\n\n  "]],"start1":219,"start2":219,"length1":43,"length2":8}]],"length":7973,"saved":false}
{"ts":1352304083238,"patch":[[{"diffs":[[1,"  \n"],[0,"  dojo.require(\"esri.map\");\n"]],"start1":0,"start2":0,"length1":28,"length2":31},{"diffs":[[0,"e\");"],[-1,"\n  \n "],[0,"\n\n  "]],"start1":217,"start2":217,"length1":13,"length2":8}]],"length":7971,"saved":false}
{"ts":1352304084441,"patch":[[{"diffs":[[1,"  dojo.provide(\"utilities.layout\");\n\n"],[0,"  \n  doj"]],"start1":0,"start2":0,"length1":8,"length2":45}]],"length":8008,"saved":false}
{"ts":1352304085321,"patch":[[{"diffs":[[0,"yout\");\n"],[-1,"\n"],[0,"  \n  doj"]],"start1":28,"start2":28,"length1":17,"length2":16}]],"length":8007,"saved":false}
{"ts":1352304086276,"patch":[[{"diffs":[[0,"yout\");\n"],[-1,"  "],[0,"\n  dojo."]],"start1":28,"start2":28,"length1":18,"length2":16}]],"length":8005,"saved":false}
{"ts":1352304121520,"patch":[[{"diffs":[[0,"plate\");"],[1,"\n  \n  utilities.layout = {};"],[0,"\n\n     v"]],"start1":247,"start2":247,"length1":16,"length2":44}]],"length":8033,"saved":false}
{"ts":1352304122214,"patch":[[{"diffs":[[0,"late\");\n"],[-1,"  "],[0,"\n  utili"]],"start1":248,"start2":248,"length1":18,"length2":16}]],"length":8031,"saved":false}
{"ts":1352304141838,"patch":[[{"diffs":[[0,"layout = {};"],[1,"\n  "],[0,"\n\n     var m"]],"start1":269,"start2":269,"length1":24,"length2":27}]],"length":8034,"saved":false}
{"ts":1352304142643,"patch":[[{"diffs":[[0,"= {};\n  "],[1,"dojo.mixin(utilities.layout,{"],[0,"\n\n     v"]],"start1":276,"start2":276,"length1":16,"length2":45}]],"length":8063,"saved":false}
{"ts":1352304143671,"patch":[[{"diffs":[[0,"layout,{"],[1,"\n      "],[0,"\n\n     v"]],"start1":305,"start2":305,"length1":16,"length2":23}]],"length":8070,"saved":false}
{"ts":1352304147423,"patch":[[{"diffs":[[0,"out,{\n  "],[-1,"    "],[1,"}"],[0,"\n\n     v"]],"start1":308,"start2":308,"length1":20,"length2":17}]],"length":8067,"saved":false}
{"ts":1352304148793,"patch":[[{"diffs":[[0,"ut,{\n  }"],[1,")"],[0,"\n\n     v"]],"start1":309,"start2":309,"length1":16,"length2":17}]],"length":8068,"saved":false}
{"ts":1352304150442,"patch":[[{"diffs":[[0,"t,{\n  })"],[1,"l"],[0,"\n\n     v"]],"start1":310,"start2":310,"length1":16,"length2":17}]],"length":8069,"saved":false}
{"ts":1352304151625,"patch":[[{"diffs":[[0,"t,{\n  })"],[-1,"l"],[1,";"],[0,"\n\n     v"]],"start1":310,"start2":310,"length1":17,"length2":17}]],"length":8069,"saved":false}
{"ts":1352304158920,"patch":[[{"diffs":[[0,"    "],[-1,"var map, urlObject, i18n;"],[0,"\n\n\t "]],"start1":322,"start2":322,"length1":33,"length2":8}]],"length":8044,"saved":false}
{"ts":1352304161646,"patch":[[{"diffs":[[0,"ayout,{\n"],[1,"      var map, urlObject, i18n;\n"],[0,"  });\n\n "]],"start1":306,"start2":306,"length1":16,"length2":48}]],"length":8076,"saved":false}
{"ts":1352304164515,"patch":[[{"diffs":[[0,"t,{\n    "],[-1,"  var "],[0,"map, url"]],"start1":310,"start2":310,"length1":22,"length2":16}]],"length":8070,"saved":false}
{"ts":1352304167874,"patch":[[{"diffs":[[0,"\n    map"],[1,":null"],[0,", urlObj"]],"start1":313,"start2":313,"length1":16,"length2":21}]],"length":8075,"saved":false}
{"ts":1352304170470,"patch":[[{"diffs":[[0,"ap:null,"],[1,"\n   "],[0," urlObje"]],"start1":319,"start2":319,"length1":16,"length2":20}]],"length":8079,"saved":false}
{"ts":1352304174229,"patch":[[{"diffs":[[0,"rlObject"],[1,":null"],[0,", i18n;\n"]],"start1":333,"start2":333,"length1":16,"length2":21}]],"length":8084,"saved":false}
{"ts":1352304176510,"patch":[[{"diffs":[[0,"ct:null,"],[1,"\n   "],[0," i18n;\n "]],"start1":339,"start2":339,"length1":16,"length2":20}]],"length":8088,"saved":false}
{"ts":1352304180523,"patch":[[{"diffs":[[0,"    i18n"],[1,":n"],[0,";\n  });\n"]],"start1":348,"start2":348,"length1":16,"length2":18}]],"length":8090,"saved":false}
{"ts":1352304182221,"patch":[[{"diffs":[[0,"  i18n:n"],[1,"ull"],[0,";\n  });\n"]],"start1":350,"start2":350,"length1":16,"length2":19}]],"length":8093,"saved":false}
{"ts":1352304183120,"patch":[[{"diffs":[[0,"18n:null"],[-1,";"],[0,"\n  });\n\n"]],"start1":353,"start2":353,"length1":17,"length2":16}]],"length":8092,"saved":false}
{"ts":1352304189466,"patch":[[{"diffs":[[0,"18n:null"],[1,","],[0,"\n  });\n\n"]],"start1":353,"start2":353,"length1":16,"length2":17}]],"length":8093,"saved":false}
{"ts":1352304192845,"patch":[[{"diffs":[[0,"n:null,\n"],[1,"    \n    \n"],[0,"  });\n\n "]],"start1":355,"start2":355,"length1":16,"length2":26}]],"length":8103,"saved":false}
{"ts":1352304194827,"patch":[[{"diffs":[[0,"ayout,{\n"],[1,"      \n"],[0,"    map:"]],"start1":306,"start2":306,"length1":16,"length2":23}]],"length":8110,"saved":false}
{"ts":1352304202323,"patch":[[{"diffs":[[0,"ion "],[-1,"initMap"],[0,"() {"]],"start1":401,"start2":401,"length1":15,"length2":8}]],"length":8103,"saved":false}
{"ts":1352304204246,"patch":[[{"diffs":[[0,"  \n    \n"],[1,"    \n"],[0,"  });\n\n "]],"start1":372,"start2":372,"length1":16,"length2":21}]],"length":8108,"saved":false}
{"ts":1352304205687,"patch":[[{"diffs":[[0,"l,\n    \n    "],[1,"initMap"],[0,"\n    \n  });\n"]],"start1":367,"start2":367,"length1":24,"length2":31}]],"length":8115,"saved":false}
{"ts":1352304208190,"patch":[[{"diffs":[[0," initMap"],[1,":"],[0,"\n    \n  "]],"start1":378,"start2":378,"length1":16,"length2":17}]],"length":8116,"saved":false}
{"ts":1352304219549,"patch":[[{"diffs":[[0,"   \n"],[-1,"    initMap:\n"],[0,"    "]],"start1":371,"start2":371,"length1":21,"length2":8}]],"length":8103,"saved":false}
{"ts":1352304220085,"patch":[[{"diffs":[[0,"unction "],[1,"initMap"],[0,"() {\n   "]],"start1":397,"start2":397,"length1":16,"length2":23}]],"length":8110,"saved":false}
{"ts":1352304235083,"patch":[[{"diffs":[[0,":null,\n    \n"],[1,"    function initMap() {\n       patchID();\n\n       dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n         //Page Specific\n         dojo.attr(dojo.byId(\"legendCon\"),\"dir\",\"rtl\");\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n         //Page Specific\n         dojo.attr(dojo.byId(\"legendCon\"),\"dir\",\"ltr\");\n       }\n\n       //get the localization strings\n  \t   i18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\n\n\t   dojo.byId('loading').innerHTML = i18n.viewer.loading.message;\n\t   dojo.byId('legTogText').innerHTML = i18n.viewer.legToggle.down;\n\n       if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\n         configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\n       }\n       esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);\n\n       if(!configOptions.sharingurl){\n         configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\n       }\n       esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\n\n       if(!configOptions.proxyurl){\n         configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\n       }\n\n       esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\n\n       esri.config.defaults.io.alwaysUseProxy = false;\n\n       urlObject = esri.urlToObject(document.location.href);\n       urlObject.query = urlObject.query || {};\n\n       if(urlObject.query.title){\n         configOptions.title = urlObject.query.title;\n       }\n       if(urlObject.query.subtitle){\n         configOptions.title = urlObject.query.subtitle;\n       }\n       if(urlObject.query.webmap){\n         configOptions.webmap = urlObject.query.webmap;\n       }\n       if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;\n       }\n       if(urlObject.query.bingMapsKey){\n         configOptions.bingmapskey = urlObject.query.bingMapsKey;\n       }\n\n       if (configOptions.legend === \"false\" || configOptions.legend === false){\n    \t   $(\"#legendCon\").hide();\n\t   }\n\n\t   var mapDeferred = esri.arcgis.utils.createMap(configOptions.webmap, \"map\", {\n         mapOptions: {\n           slider: true,\n           sliderStyle:\"small\",\n           nav: false,\n           wrapAround180:true\n         },\n         ignorePopups:false,\n         bingMapsKey: configOptions.bingmapskey\n       });\n\n       mapDeferred.addCallback(function (response) {\n\n\t\t document.title = configOptions.title|| response.itemInfo.item.title || \"\";\n         dojo.byId(\"title\").innerHTML = configOptions.title ||response.itemInfo.item.title || \"\";\n         dojo.byId(\"subtitle\").innerHTML = configOptions.subtitle|| response.itemInfo.item.snippet || \"\";\n\n         map = response.map;\n\n\t\t dojo.connect(map,\"onUpdateEnd\",hideLoader);\n\n         var layers = response.itemInfo.itemData.operationalLayers;\n         if(map.loaded){\n           initUI(layers);\n         }\n         else{\n           dojo.connect(map,\"onLoad\",function(){\n             initUI(layers);\n           });\n         }\n         //resize the map when the browser resizes\n         dojo.connect(dijit.byId('map'), 'resize', map,map.resize);\n       });\n\n       mapDeferred.addErrback(function (error) {\n         alert(i18n.viewer.errors.createMap + dojo.toJson(error.message));\n       });\n\n     }\n    \n"],[0,"    \n  });\n\n"]],"start1":363,"start2":363,"length1":24,"length2":3743}]],"length":11829,"saved":false}
{"ts":1352304238079,"patch":[[{"diffs":[[0," });\n\n     }"],[1,","],[0,"\n    \n    \n "]],"start1":4076,"start2":4076,"length1":24,"length2":25}]],"length":11830,"saved":false}
{"ts":1352304239643,"patch":[[{"diffs":[[0," });\n\n     }"],[-1,","],[0,"\n    \n    \n "]],"start1":4076,"start2":4076,"length1":25,"length2":24}]],"length":11829,"saved":false}
{"ts":1352304245949,"patch":[[{"diffs":[[0,"    function"],[-1," initMap"],[0,"() {\n       "]],"start1":375,"start2":375,"length1":32,"length2":24}]],"length":11821,"saved":false}
{"ts":1352304249390,"patch":[[{"diffs":[[0,"l,\n    \n    "],[1,"initMap"],[0,"function() {"]],"start1":367,"start2":367,"length1":24,"length2":31}]],"length":11828,"saved":false}
{"ts":1352304250446,"patch":[[{"diffs":[[0," initMap"],[1,":"],[0,"function"]],"start1":378,"start2":378,"length1":16,"length2":17}]],"length":11829,"saved":false}
{"ts":1352304253518,"patch":[[{"diffs":[[0,"initMap:"],[1," "],[0,"function"]],"start1":379,"start2":379,"length1":16,"length2":17}]],"length":11830,"saved":false}
{"ts":1352304259430,"patch":[[{"diffs":[[0,"tion() {\n       "],[1,"this."],[0,"patchID();\n\n    "]],"start1":392,"start2":392,"length1":32,"length2":37}]],"length":11835,"saved":false}
{"ts":1352304380891,"patch":[[{"diffs":[[0,"ed){\n           "],[1,"this."],[0,"initUI(layers);\n"]],"start1":3659,"start2":3659,"length1":32,"length2":37}]],"length":11840,"saved":false}
{"ts":1352304384131,"patch":[[{"diffs":[[0,"){\n             "],[1,"this."],[0,"initUI(layers);\n"]],"start1":3768,"start2":3768,"length1":32,"length2":37}]],"length":11845,"saved":false}
{"ts":1352304392707,"patch":[[{"diffs":[[0," });\n\n     }"],[1,","],[0,"\n    \n    \n "]],"start1":4092,"start2":4092,"length1":24,"length2":25}]],"length":11846,"saved":false}
{"ts":1352304412071,"patch":[[{"diffs":[[0,"\n\n\t "],[-1,"function initMap() {\n       patchID();\n\n       dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n         //Page Specific\n         dojo.attr(dojo.byId(\"legendCon\"),\"dir\",\"rtl\");\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n         //Page Specific\n         dojo.attr(dojo.byId(\"legendCon\"),\"dir\",\"ltr\");\n       }\n\n\t   //get the localization strings\n  \t   i18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\n\n\t   dojo.byId('loading').innerHTML = i18n.viewer.loading.message;\n\t   dojo.byId('legTogText').innerHTML = i18n.viewer.legToggle.down;\n\n       if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\n         configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\n       }\n       esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);\n\n       if(!configOptions.sharingurl){\n         configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\n       }\n       esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\n\n       if(!configOptions.proxyurl){\n         configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\n       }\n\n       esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\n\n       esri.config.defaults.io.alwaysUseProxy = false;\n\n       urlObject = esri.urlToObject(document.location.href);\n       urlObject.query = urlObject.query || {};\n\n       if(urlObject.query.title){\n         configOptions.title = urlObject.query.title;\n       }\n       if(urlObject.query.subtitle){\n         configOptions.title = urlObject.query.subtitle;\n       }\n       if(urlObject.query.webmap){\n         configOptions.webmap = urlObject.query.webmap;\n       }\n       if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;\n       }\n       if(urlObject.query.bingMapsKey){\n         configOptions.bingmapskey = urlObject.query.bingMapsKey;\n       }\n\n       if (configOptions.legend === \"false\" || configOptions.legend === false){\n    \t   $(\"#legendCon\").hide();\n\t   }\n\n\t   var mapDeferred = esri.arcgis.utils.createMap(configOptions.webmap, \"map\", {\n         mapOptions: {\n           slider: true,\n           sliderStyle:\"small\",\n           nav: false,\n           wrapAround180:true\n         },\n         ignorePopups:false,\n         bingMapsKey: configOptions.bingmapskey\n       });\n\n       mapDeferred.addCallback(function (response) {\n\n\t\t document.title = configOptions.title|| response.itemInfo.item.title || \"\";\n         dojo.byId(\"title\").innerHTML = configOptions.title ||response.itemInfo.item.title || \"\";\n         dojo.byId(\"subtitle\").innerHTML = configOptions.subtitle|| response.itemInfo.item.snippet || \"\";\n\n         map = response.map;\n\n\t\t dojo.connect(map,\"onUpdateEnd\",hideLoader);\n\n         var layers = response.itemInfo.itemData.operationalLayers;\n         if(map.loaded){\n           initUI(layers);\n         }\n         else{\n           dojo.connect(map,\"onLoad\",function(){\n             initUI(layers);\n           });\n         }\n         //resize the map when the browser resizes\n         dojo.connect(dijit.byId('map'), 'resize', map,map.resize);\n       });\n\n       mapDeferred.addErrback(function (error) {\n         alert(i18n.viewer.errors.createMap + dojo.toJson(error.message));\n       });\n\n     }\n"],[0,"\n\n  "]],"start1":4128,"start2":4128,"length1":3715,"length2":8}]],"length":8139,"saved":false}
{"ts":1352304421963,"patch":[[{"diffs":[[0,"    "],[-1,"function initUI(layers) {\n       //add chrome theme for popup\n       dojo.addClass(map.infoWindow.domNode, \"chrome\");\n       //add the scalebar\n       var scalebar = new esri.dijit.Scalebar({\n         map: map,\n         scalebarUnit:i18n.viewer.main.scaleBarUnits //metric or english\n       });\n\n\n       var layerInfo = buildLayersList(layers);\n\n       if(layerInfo.length > 0){\n         var legendDijit = new esri.dijit.Legend({\n           map:map,\n           layerInfos:layerInfo\n         },\"legendDiv\");\n         legendDijit.startup();\n       }\n       else{\n         $(\"#legendToggle\").hide();\n       }\n     }"],[0,"\n\n//"]],"start1":4135,"start2":4135,"length1":620,"length2":8}]],"length":7527,"saved":false}
{"ts":1352304424342,"patch":[[{"diffs":[[0,");\n\n     },\n"],[1,"     \n     \n"],[0,"    \n    \n  "]],"start1":4094,"start2":4094,"length1":24,"length2":36}]],"length":7539,"saved":false}
{"ts":1352304425458,"patch":[[{"diffs":[[0,"\n     \n     "],[1,"function initUI(layers) {\n       //add chrome theme for popup\n       dojo.addClass(map.infoWindow.domNode, \"chrome\");\n       //add the scalebar\n       var scalebar = new esri.dijit.Scalebar({\n         map: map,\n         scalebarUnit:i18n.viewer.main.scaleBarUnits //metric or english\n       });\n\n\n       var layerInfo = buildLayersList(layers);\n\n       if(layerInfo.length > 0){\n         var legendDijit = new esri.dijit.Legend({\n           map:map,\n           layerInfos:layerInfo\n         },\"legendDiv\");\n         legendDijit.startup();\n       }\n       else{\n         $(\"#legendToggle\").hide();\n       }\n     }"],[0,"\n    \n    \n "]],"start1":4105,"start2":4105,"length1":24,"length2":636}]],"length":8151,"saved":false}
{"ts":1352304428294,"patch":[[{"diffs":[[0,"tion"],[-1," initUI"],[0,"(lay"]],"start1":4121,"start2":4121,"length1":15,"length2":8}]],"length":8144,"saved":false}
{"ts":1352304431251,"patch":[[{"diffs":[[0,"\n     \n     "],[1,"initUI"],[0,"function(lay"]],"start1":4105,"start2":4105,"length1":24,"length2":30}]],"length":8150,"saved":false}
{"ts":1352304432396,"patch":[[{"diffs":[[0,"  initUI"],[1," "],[0,"function"]],"start1":4115,"start2":4115,"length1":16,"length2":17}]],"length":8151,"saved":false}
{"ts":1352304434107,"patch":[[{"diffs":[[0,"  initUI"],[1,":"],[0," functio"]],"start1":4115,"start2":4115,"length1":16,"length2":17}]],"length":8152,"saved":false}
{"ts":1352304443567,"patch":[[{"diffs":[[0,"rInfo = "],[1,"this."],[0,"buildLay"]],"start1":4430,"start2":4430,"length1":16,"length2":21}]],"length":8157,"saved":false}
{"ts":1352304462064,"patch":[[{"diffs":[[0,"  \n\n"],[-1,"//build a list of layers to dispaly in the legend\n  function buildLayersList(layers){\n\n //layers  arg is  response.itemInfo.itemData.operationalLayers;\n  var layerInfos = [];\n  dojo.forEach(layers, function (mapLayer, index) {\n      var layerInfo = {};\n      if (mapLayer.featureCollection && mapLayer.type !== \"CSV\") {\n        if (mapLayer.featureCollection.showLegend === true) {\n            dojo.forEach(mapLayer.featureCollection.layers, function (fcMapLayer) {\n              if (fcMapLayer.showLegend !== false) {\n                  layerInfo = {\n                      \"layer\": fcMapLayer.layerObject,\n                      \"title\": mapLayer.title,\n                      \"defaultSymbol\": false\n                  };\n                  if (mapLayer.featureCollection.layers.length > 1) {\n                      layerInfo.title += \" - \" + fcMapLayer.layerDefinition.name;\n                  }\n                  layerInfos.push(layerInfo);\n              }\n            });\n          }\n      } else if (mapLayer.showLegend !== false && mapLayer.layerObject) {\n      var showDefaultSymbol = false;\n      if (mapLayer.layerObject.version < 10.1 && (mapLayer.layerObject instanceof esri.layers.ArcGISDynamicMapServiceLayer || mapLayer.layerObject instanceof esri.layers.ArcGISTiledMapServiceLayer)) {\n        showDefaultSymbol = true;\n      }\n      layerInfo = {\n        \"layer\": mapLayer.layerObject,\n        \"title\": mapLayer.title,\n        \"defaultSymbol\": showDefaultSymbol\n      };\n        //does it have layers too? If so check to see if showLegend is false\n        if (mapLayer.layers) {\n            var hideLayers = dojo.map(dojo.filter(mapLayer.layers, function (lyr) {\n                return (lyr.showLegend === false);\n            }), function (lyr) {\n                return lyr.id;\n            });\n            if (hideLayers.length) {\n                layerInfo.hideLayers = hideLayers;\n            }\n        }\n        layerInfos.push(layerInfo);\n    }\n  });\n  return layerInfos;\n  }\n"],[0,"\n\n  "]],"start1":4767,"start2":4767,"length1":1995,"length2":8}]],"length":6170,"saved":false}
{"ts":1352304466266,"patch":[[{"diffs":[[0,"    }\n     }"],[1,","],[0,"\n    \n    \n "]],"start1":4723,"start2":4723,"length1":24,"length2":25}]],"length":6171,"saved":false}
{"ts":1352304467550,"patch":[[{"diffs":[[0,"  }\n     },\n"],[1,"     \n     \n"],[0,"    \n    \n  "]],"start1":4725,"start2":4725,"length1":24,"length2":36}]],"length":6183,"saved":false}
{"ts":1352304468278,"patch":[[{"diffs":[[0,"\n     \n     "],[1,"//build a list of layers to dispaly in the legend\n  function buildLayersList(layers){\n\n //layers  arg is  response.itemInfo.itemData.operationalLayers;\n  var layerInfos = [];\n  dojo.forEach(layers, function (mapLayer, index) {\n      var layerInfo = {};\n      if (mapLayer.featureCollection && mapLayer.type !== \"CSV\") {\n        if (mapLayer.featureCollection.showLegend === true) {\n            dojo.forEach(mapLayer.featureCollection.layers, function (fcMapLayer) {\n              if (fcMapLayer.showLegend !== false) {\n                  layerInfo = {\n                      \"layer\": fcMapLayer.layerObject,\n                      \"title\": mapLayer.title,\n                      \"defaultSymbol\": false\n                  };\n                  if (mapLayer.featureCollection.layers.length > 1) {\n                      layerInfo.title += \" - \" + fcMapLayer.layerDefinition.name;\n                  }\n                  layerInfos.push(layerInfo);\n              }\n            });\n          }\n      } else if (mapLayer.showLegend !== false && mapLayer.layerObject) {\n      var showDefaultSymbol = false;\n      if (mapLayer.layerObject.version < 10.1 && (mapLayer.layerObject instanceof esri.layers.ArcGISDynamicMapServiceLayer || mapLayer.layerObject instanceof esri.layers.ArcGISTiledMapServiceLayer)) {\n        showDefaultSymbol = true;\n      }\n      layerInfo = {\n        \"layer\": mapLayer.layerObject,\n        \"title\": mapLayer.title,\n        \"defaultSymbol\": showDefaultSymbol\n      };\n        //does it have layers too? If so check to see if showLegend is false\n        if (mapLayer.layers) {\n            var hideLayers = dojo.map(dojo.filter(mapLayer.layers, function (lyr) {\n                return (lyr.showLegend === false);\n            }), function (lyr) {\n                return lyr.id;\n            });\n            if (hideLayers.length) {\n                layerInfo.hideLayers = hideLayers;\n            }\n        }\n        layerInfos.push(layerInfo);\n    }\n  });\n  return layerInfos;\n  }\n"],[0,"\n    \n    \n "]],"start1":4736,"start2":4736,"length1":24,"length2":2011}]],"length":8170,"saved":false}
{"ts":1352304479533,"patch":[[{"diffs":[[0,"unction "],[-1,"buildLayersList"],[0,"(layers)"]],"start1":4801,"start2":4801,"length1":31,"length2":16}]],"length":8155,"saved":false}
{"ts":1352304480453,"patch":[[{"diffs":[[0,"function"],[-1," "],[0,"(layers)"]],"start1":4800,"start2":4800,"length1":17,"length2":16}]],"length":8154,"saved":false}
{"ts":1352304483070,"patch":[[{"diffs":[[0,"egend\n  "],[1,"buildLayersList"],[0,"function"]],"start1":4792,"start2":4792,"length1":16,"length2":31}]],"length":8169,"saved":false}
{"ts":1352304484054,"patch":[[{"diffs":[[0,"yersList"],[1,": "],[0,"function"]],"start1":4807,"start2":4807,"length1":16,"length2":18}]],"length":8171,"saved":false}
{"ts":1352304501137,"patch":[[{"diffs":[[0,"fos;\n  }"],[1,","],[0,"\n\n    \n "]],"start1":6727,"start2":6727,"length1":16,"length2":17}]],"length":8172,"saved":false}
{"ts":1352304508115,"patch":[[{"diffs":[[0,"    "],[-1,"function patchID() {  //patch id manager for use in apps.arcgis.com\n       esri.id._isIdProvider = function(server, resource) {\n       // server and resource are assumed one of portal domains\n\n       var i = -1, j = -1;\n\n       dojo.forEach(this._gwDomains, function(domain, idx) {\n         if (i === -1 && domain.regex.test(server)) {\n           i = idx;\n         }\n         if (j === -1 && domain.regex.test(resource)) {\n           j = idx;\n         }\n       });\n\n       var retVal = false;\n\n       if (i > -1 && j > -1) {\n         if (i === 0 || i === 4) {\n           if (j === 0 || j === 4) {\n             retVal = true;\n           }\n         }\n         else if (i === 1) {\n           if (j === 1 || j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 2) {\n           if (j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 3) {\n           if (j === 3) {\n             retVal = true;\n           }\n         }\n       }\n\n       return retVal;\n     };\n    }"],[0,"\n\n\tf"]],"start1":6776,"start2":6776,"length1":1034,"length2":8}]],"length":7146,"saved":false}
{"ts":1352304511470,"patch":[[{"diffs":[[0,"os;\n  },"],[1,"\n  \n  "],[0,"\n\n    \n "]],"start1":6728,"start2":6728,"length1":16,"length2":22}]],"length":7152,"saved":false}
{"ts":1352304512720,"patch":[[{"diffs":[[0,"},\n  \n  "],[1,"function patchID() {  //patch id manager for use in apps.arcgis.com\n       esri.id._isIdProvider = function(server, resource) {\n       // server and resource are assumed one of portal domains\n\n       var i = -1, j = -1;\n\n       dojo.forEach(this._gwDomains, function(domain, idx) {\n         if (i === -1 && domain.regex.test(server)) {\n           i = idx;\n         }\n         if (j === -1 && domain.regex.test(resource)) {\n           j = idx;\n         }\n       });\n\n       var retVal = false;\n\n       if (i > -1 && j > -1) {\n         if (i === 0 || i === 4) {\n           if (j === 0 || j === 4) {\n             retVal = true;\n           }\n         }\n         else if (i === 1) {\n           if (j === 1 || j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 2) {\n           if (j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 3) {\n           if (j === 3) {\n             retVal = true;\n           }\n         }\n       }\n\n       return retVal;\n     };\n    }"],[0,"\n\n    \n "]],"start1":6734,"start2":6734,"length1":16,"length2":1042}]],"length":8178,"saved":false}
{"ts":1352304517626,"patch":[[{"diffs":[[0,"tion"],[-1," patchID"],[0,"() {"]],"start1":6746,"start2":6746,"length1":16,"length2":8}]],"length":8170,"saved":false}
{"ts":1352304520216,"patch":[[{"diffs":[[0,"},\n  \n  "],[1,"patchID"],[0,"function"]],"start1":6734,"start2":6734,"length1":16,"length2":23}]],"length":8177,"saved":false}
{"ts":1352304522767,"patch":[[{"diffs":[[0," patchID"],[1,": "],[0,"function"]],"start1":6741,"start2":6741,"length1":16,"length2":18}]],"length":8179,"saved":false}
{"ts":1352304528182,"patch":[[{"diffs":[[0,"    };\n    }"],[1,","],[0,"\n\n    \n    \n"]],"start1":7757,"start2":7757,"length1":24,"length2":25}]],"length":8180,"saved":false}
{"ts":1352304533519,"patch":[[{"diffs":[[0," \n\n\t"],[-1,"function hideLoader(){\n\t  $(\"#loadingCon\").hide();\n\t}"],[0,"\n\n\t/"]],"start1":7813,"start2":7813,"length1":61,"length2":8}]],"length":8127,"saved":false}
{"ts":1352304536255,"patch":[[{"diffs":[[0,";\n    },"],[1,"\n    \n    function hideLoader(){\n      $(\"#loadingCon\").hide();\n\t}"],[0,"\n\n    \n "]],"start1":7762,"start2":7762,"length1":16,"length2":82}]],"length":8193,"saved":false}
{"ts":1352304539067,"patch":[[{"diffs":[[0,"tion"],[-1," hideLoader"],[0,"(){\n"]],"start1":7784,"start2":7784,"length1":19,"length2":8}]],"length":8182,"saved":false}
{"ts":1352304541258,"patch":[[{"diffs":[[0,"   \n    "],[1,"hideLoader"],[0,"function"]],"start1":7772,"start2":7772,"length1":16,"length2":26}]],"length":8192,"saved":false}
{"ts":1352304542628,"patch":[[{"diffs":[[0,"deLoader"],[1,": "],[0,"function"]],"start1":7782,"start2":7782,"length1":16,"length2":18}]],"length":8194,"saved":false}
{"ts":1352304546132,"patch":[[{"diffs":[[0,"de();\n\t}"],[1,","],[0,"\n\n    \n "]],"start1":7829,"start2":7829,"length1":16,"length2":17}]],"length":8195,"saved":false}
{"ts":1352304550124,"patch":[[{"diffs":[[0,"\n\t\n\n"],[-1,"\t//Jquery Layout\n\t$(document).ready(function(e) {\n\t  $(\"#legendToggle\").click(function(){\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });"]],"start1":7883,"start2":7883,"length1":312,"length2":4}]],"length":7887,"saved":false}
{"ts":1352304553053,"patch":[[{"diffs":[[0,"e();\n\t},"],[1,"\n    \n    //Jquery Layout\n    $(document).ready(function(e) {\n\t  $(\"#legendToggle\").click(function(){\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });"],[0,"\n\n    \n "]],"start1":7830,"start2":7830,"length1":16,"length2":336}]],"length":8207,"saved":false}
{"ts":1352304584935,"patch":[[{"diffs":[[0,"de();\n\t}"],[-1,","],[0,"\n    \n  "]],"start1":7829,"start2":7829,"length1":17,"length2":16}]],"length":8206,"saved":false}
{"ts":1352304587022,"patch":[[{"diffs":[[0,"de();\n\t}"],[1,","],[0,"\n    \n  "]],"start1":7829,"start2":7829,"length1":16,"length2":17}]],"length":8207,"saved":false}
{"ts":1352304596232,"patch":[[{"diffs":[[0,"de();\n\t}"],[-1,","],[0,"\n    \n  "]],"start1":7829,"start2":7829,"length1":17,"length2":16}]],"length":8206,"saved":false}
{"ts":1352304601509,"patch":[[{"diffs":[[0,"   \n"],[-1,"    //Jquery Layout\n    $(document).ready(function(e) {\n\t  $(\"#legendToggle\").click(function(){\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });"],[0,"\n\n  "]],"start1":7839,"start2":7839,"length1":322,"length2":8}]],"length":7892,"saved":false}
{"ts":1352304602912,"patch":[[{"diffs":[[0,"e();\n\t}\n"],[-1,"    \n\n"],[0,"\n    \n  "]],"start1":7830,"start2":7830,"length1":22,"length2":16}]],"length":7886,"saved":false}
{"ts":1352304604155,"patch":[[{"diffs":[[0,"de();\n\t}"],[-1,"\n\n"],[0,"    \n   "]],"start1":7829,"start2":7829,"length1":18,"length2":16}]],"length":7884,"saved":false}
{"ts":1352304607826,"patch":[[{"diffs":[[0," });"],[-1,"\n\n     \n\n\t \n\n     \n\n\n\n     \n\n\t\n\n"]],"start1":7848,"start2":7848,"length1":36,"length2":4}]],"length":7852,"saved":false}
{"ts":1352304620017,"patch":[[{"diffs":[[0,"plate\");"],[1,"\n  \n  //Jquery Layout\n    $(document).ready(function(e) {\n      $(\"#legendToggle\").click(function(){\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });"],[0,"\n\n  util"]],"start1":247,"start2":247,"length1":16,"length2":335}]],"length":8171,"saved":false}
{"ts":1352304620627,"patch":[[{"diffs":[[0,"late\");\n"],[-1,"  "],[0,"\n"],[1,""],[0,"  //Jque"]],"start1":248,"start2":248,"length1":19,"length2":17},{"diffs":[[0,"t,{\n"],[-1,"      "],[0,"\n"],[1,""],[0,"    "]],"start1":627,"start2":627,"length1":15,"length2":9},{"diffs":[[0,"n:null,\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    init"]],"start1":673,"start2":673,"length1":21,"length2":17},{"diffs":[[0,");\n\n     },\n"],[-1,"     "],[0,"\n"],[1,""],[0,"     initUI:"]],"start1":4401,"start2":4401,"length1":30,"length2":25},{"diffs":[[0," },\n"],[-1,"     "],[0,"\n"],[1,""],[0,"    "]],"start1":5035,"start2":5035,"length1":14,"length2":9},{"diffs":[[0,"s;\n  },\n"],[-1,"  "],[0,"\n"],[1,""],[0,"  patchI"]],"start1":7026,"start2":7026,"length1":19,"length2":17},{"diffs":[[0,"\n    },\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    hide"]],"start1":8058,"start2":8058,"length1":21,"length2":17},{"diffs":[[0,";\n\t}"],[-1,"    \n    "],[1,"\n"],[0,"\n  }"]],"start1":8124,"start2":8124,"length1":17,"length2":9}]],"length":8135,"saved":false}
{"ts":1352304773357,"patch":[[{"diffs":[[0,"ateEnd\","],[1,"this"],[0,"hideLoad"]],"start1":3856,"start2":3856,"length1":16,"length2":20}]],"length":8139,"saved":false}
{"ts":1352304775369,"patch":[[{"diffs":[[0,"nd\",this"],[1,"."],[0,"hideLoad"]],"start1":3860,"start2":3860,"length1":16,"length2":17}]],"length":8140,"saved":false}
{"ts":1352304820298,"patch":[[{"diffs":[[0,"ed){\n           "],[1,"//"],[0,"this.initUI(laye"]],"start1":3971,"start2":3971,"length1":32,"length2":34}]],"length":8142,"saved":false}
{"ts":1352304822664,"patch":[[{"diffs":[[0,"            "],[1,"//"],[0,"this.initUI("]],"start1":4086,"start2":4086,"length1":24,"length2":26}]],"length":8144,"saved":false}
{"ts":1352304982911,"patch":[[{"diffs":[[0,"){\n             "],[-1,"//"],[0,"this.initUI(laye"]],"start1":4082,"start2":4082,"length1":34,"length2":32}]],"length":8142,"saved":false}
{"ts":1352304986023,"patch":[[{"diffs":[[0,"        "],[-1,"//"],[0,"this.ini"]],"start1":3979,"start2":3979,"length1":18,"length2":16}]],"length":8140,"saved":false}
{"ts":1352305015689,"patch":[[{"diffs":[[0,"onsole.l"],[1,"og(this)"],[0,"\n       "]],"start1":3985,"start2":3985,"length1":16,"length2":24}]],"length":8166,"saved":false}
{"ts":1352305016964,"patch":[[{"diffs":[[0,"og(this)"],[1,";"],[0,"\n       "]],"start1":3993,"start2":3993,"length1":16,"length2":17}]],"length":8167,"saved":false}
{"ts":1352305020720,"patch":[[{"diffs":[[0,"function(){\n"],[1,"        console.log(this);\n"],[0,"            "]],"start1":4098,"start2":4098,"length1":24,"length2":51}]],"length":8194,"saved":false}
{"ts":1352305039704,"patch":[[{"diffs":[[0,"(){\n"],[-1,"        console.log(this);\n"],[0,"    "]],"start1":4106,"start2":4106,"length1":35,"length2":8}]],"length":8167,"saved":false}
{"ts":1352305041492,"patch":[[{"diffs":[[0,"d){\n"],[-1,"        console.log(this);\n"],[0,"    "]],"start1":3972,"start2":3972,"length1":35,"length2":8}]],"length":8140,"saved":false}
{"ts":1352305107129,"patch":[[{"diffs":[[0,"ed){\n           "],[-1,"this"],[1,"utilities.layout"],[0,".initUI(layers);"]],"start1":3971,"start2":3971,"length1":36,"length2":48}]],"length":8152,"saved":false}
{"ts":1352305111462,"patch":[[{"diffs":[[0,"        "],[-1,"this"],[1,"utilities.layout"],[0,".initUI("]],"start1":4100,"start2":4100,"length1":20,"length2":32}]],"length":8164,"saved":false}
{"ts":1352305133423,"patch":[[{"diffs":[[0,"rInfo = "],[-1,"this"],[1,"utilities.layout"],[0,".buildLa"]],"start1":4761,"start2":4761,"length1":20,"length2":32}]],"length":8176,"saved":false}
{"ts":1352305179726,"patch":[[{"diffs":[[0,"ateEnd\","],[-1,"this"],[1,"utilities.layout"],[0,".hideLoa"]],"start1":3856,"start2":3856,"length1":20,"length2":32}]],"length":8188,"saved":false}
