{"ts":1349804534404,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"  dojo.require(\"esri.map\");\n  dojo.require(\"esri.dijit.Legend\");\n  dojo.require(\"esri.dijit.Scalebar\");\n  dojo.require(\"esri.arcgis.utils\");\n  dojo.require(\"esri.IdentityManager\");\n  dojo.require(\"dijit.dijit\");\n  dojo.require(\"dijit.layout.BorderContainer\");\n  dojo.require(\"dijit.layout.ContentPane\");\n  dojo.require(\"dijit.layout.StackContainer\");\n  dojo.requireLocalization(\"esriTemplate\",\"template\");\n  \n  \n     var map, urlObjects, i18n;\n\t \n\t function initMap() {\n       patchID();\n\t   \n\t   //get the localization strings\n  \t   i18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\n\t  \n\t   dojo.byId('loading').innerHTML = i18n.viewer.loading.message;\n\t   dojo.byId('legTogText').innerHTML = i18n.viewer.legToggle.down;\n      \n       if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\n         configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\n       }\n       esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);\n\n       if(!configOptions.sharingurl){\n         configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\n       }\n       esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\n       \n       if(!configOptions.proxyurl){   \n         configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\n       }\n\n       esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\n\n       esri.config.defaults.io.alwaysUseProxy = false;\n      \n       urlObject = esri.urlToObject(document.location.href);\n       urlObject.query = urlObject.query || {};\n      \n       if(urlObject.query.title){\n         configOptions.title = urlObject.query.title;\n       }\n       if(urlObject.query.subtitle){\n         configOptions.subtitle = urlObject.query.subtitle;\n       }\n\t   if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;\n       }\n       if(urlObject.query.webmap){\n         configOptions.webmap = urlObject.query.webmap;      \n       } \n       if(urlObject.query.bingMapsKey){\n         configOptions.bingmapskey = urlObject.query.bingMapsKey;      \n       }\n\n\t   esri.arcgis.utils.arcgisUrl = \"http://arcgis.com/sharing/content/items\";\n\t   \n\t   \t   //is an appid specified - if so read json from there\n\t  if(configOptions.appid || (urlObject.query && urlObject.query.appid)){\n\t\tvar appid = configOptions.appid || urlObject.query.appid;\n\t\tvar requestHandle = esri.request({\n\t\t  url: configOptions.sharingurl + \"/\" + appid + \"/data\",\n\t\t  content: {f:\"json\"},\n\t\t  callbackParamName:\"callback\",\n\t\t  load: function(response){\n\t\t\t   if(response.values.title !== undefined){configOptions.title = response.values.title;}\n\t\t\t   if(response.values.subtitle !== undefined){configOptions.subtitle = response.values.subtitle;}\n\t\t\t   if(response.values.legend !== undefined){configOptions.legend = response.values.legend;}\n    \n\t\t\t   createMap();\n\t\t  },\n\t\t  error: function(response){\n\t\t\tvar e = response.message;\n\t\t   alert(i18n.viewer.errors.createMap +  response.message);\n\t\t  }\n\t\t});\n\t\t }else{\n\t\t\tcreateMap();\n\t\t }\n\t }\n\t \n\t function createMap(){\n\t   \n\t   if (configOptions.legend == false){\n\t\t   $(\"#legendToggle\").hide();\n\t   }\n\t\t\n\t   var mapDeferred = esri.arcgis.utils.createMap(configOptions.webmap, \"map\", {\n         mapOptions: {\n           slider: true,\n           nav: false,\n           wrapAround180:true\n         },\n         ignorePopups:false,\n         bingMapsKey: configOptions.bingmapskey\n       });\n\n       mapDeferred.addCallback(function (response) {\n        \n\t\t document.title = configOptions.title|| response.itemInfo.item.title || \"\";\n         dojo.byId(\"title\").innerHTML = configOptions.title ||response.itemInfo.item.title || \"\";\n         dojo.byId(\"subtitle\").innerHTML = configOptions.subtitle|| response.itemInfo.item.snippet || \"\";\n        \n         map = response.map;\n\t\t\n\t\t dojo.connect(map,\"onUpdateEnd\",hideLoader);\n\t\t\n         var layers = response.itemInfo.itemData.operationalLayers;\n         if(map.loaded){\n           initUI(layers);\n         }\n         else{\n           dojo.connect(map,\"onLoad\",function(){\n             initUI(layers);\n           });\n         }\n         //resize the map when the browser resizes\n         dojo.connect(dijit.byId('map'), 'resize', map,map.resize);\n       });\n\n       mapDeferred.addErrback(function (error) {\n         alert(i18n.viewer.errors.createMap + dojo.toJson(error.message));\n       });\n\t   \n     }\n\n\n     function initUI(layers) {\n       //add chrome theme for popup\n       dojo.addClass(map.infoWindow.domNode, \"chrome\");\n       //add the scalebar \n       var scalebar = new esri.dijit.Scalebar({\n         map: map,\n         scalebarUnit:i18n.viewer.main.scaleBarUnits //metric or english\n       }); \n\n       var layerInfo = buildLayersList(layers);\n      \n       if(layerInfo.length > 0){\n         var legendDijit = new esri.dijit.Legend({\n           map:map,\n           layerInfos:layerInfo\n         },\"legendDiv\");\n         legendDijit.startup();\n       }\n       else{\n         dojo.byId('legendDiv').innerHTML = \"\";\n       }\n     }\n\t \nfunction buildLayersList(layers){\n        //layers  arg is  response.itemInfo.itemData.operationalLayers;\n        var layerInfos = [];\n        dojo.forEach(layers, function(mapLayer, index){\n          var layerInfo = {};\n          if (mapLayer.featureCollection && mapLayer.type !== \"CSV\") {\n            if (mapLayer.featureCollection.showLegend === true) {\n              dojo.forEach(mapLayer.featureCollection.layers, function(fcMapLayer){\n                if (fcMapLayer.showLegend !== false) {\n                  layerInfo = {\n                    \"layer\": fcMapLayer.layerObject,\n                    \"title\": mapLayer.title,\n                    \"defaultSymbol\": false\n                  };\n                  if (mapLayer.featureCollection.layers.length > 1) {\n                    layerInfo.title += \" - \" + fcMapLayer.layerDefinition.name;\n                  }\n                  layerInfos.push(layerInfo);\n                }\n              });\n            }\n          } else if (mapLayer.showLegend !== false) {\n            layerInfo = {\n              \"layer\": mapLayer.layerObject,\n              \"title\": mapLayer.title,\n              \"defaultSymbol\": false\n            };\n            //does it have layers too? If so check to see if showLegend is false\n            if (mapLayer.layers) {\n              var hideLayers = dojo.map(dojo.filter(mapLayer.layers, function(lyr){\n                return (lyr.showLegend === false);\n              }), function(lyr){\n                return lyr.id\n              });\n              if (hideLayers.length) {\n                layerInfo.hideLayers = hideLayers;\n              }\n            }\n            layerInfos.push(layerInfo);\n          }\n        });\n        return layerInfos;\n      }\n\n    \n     function patchID() {  //patch id manager for use in apps.arcgis.com\n       esri.id._isIdProvider = function(server, resource) {\n       // server and resource are assumed one of portal domains\n \n       var i = -1, j = -1;\n \n       dojo.forEach(this._gwDomains, function(domain, idx) {\n         if (i === -1 && domain.regex.test(server)) {\n           i = idx;\n         }\n         if (j === -1 && domain.regex.test(resource)) {\n           j = idx;\n         }\n       });\n \n       var retVal = false;\n   \n       if (i > -1 && j > -1) {\n         if (i === 0 || i === 4) {\n           if (j === 0 || j === 4) {\n             retVal = true;\n           }\n         }\n         else if (i === 1) {\n           if (j === 1 || j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 2) {\n           if (j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 3) {\n           if (j === 3) {\n             retVal = true;\n           }\n         }\n       }\n \n       return retVal;\n     };    \n    }\n\t\n\tfunction hideLoader(){\n\t  $(\"#loadingCon\").hide();\n\t}\n\t\n\t//Jquery Layout\n\t$(document).ready(function(e) {\n\t  $(\"#legendToggle\").click(function(){\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });"]],"start1":0,"start2":0,"length1":0,"length2":8278}]],"length":8278}
{"contributors":[],"silentsave":true,"ts":1349804631495,"patch":[[{"diffs":[[0,"   }\n\t \n"],[1,"//build a list of layers to dispaly in the legend\n  "],[0,"function"]],"start1":5130,"start2":5130,"length1":16,"length2":68},{"diffs":[[0,"ayers){\n"],[-1,"       "],[1,"\n"],[0," //layer"]],"start1":5216,"start2":5216,"length1":23,"length2":17},{"diffs":[[0,"Layers;\n"],[-1,"      "],[0,"  var la"]],"start1":5282,"start2":5282,"length1":22,"length2":16},{"diffs":[[0,"s = [];\n"],[-1,"      "],[0,"  dojo.f"]],"start1":5305,"start2":5305,"length1":22,"length2":16},{"diffs":[[0,"function"],[1," "],[0,"(mapLaye"]],"start1":5336,"start2":5336,"length1":16,"length2":17},{"diffs":[[0,", index)"],[1," "],[0,"{\n"],[-1,"    "],[0,"      va"]],"start1":5354,"start2":5354,"length1":22,"length2":19},{"diffs":[[0,"= {};\n      "],[-1,"    "],[0,"if (mapLayer"]],"start1":5385,"start2":5385,"length1":28,"length2":24},{"diffs":[[0,"== \"CSV\") {\n"],[-1,"    "],[0,"        if ("]],"start1":5446,"start2":5446,"length1":28,"length2":24},{"diffs":[[0,"            "],[-1,"  "],[0,"dojo.forEach"]],"start1":5520,"start2":5520,"length1":26,"length2":24},{"diffs":[[0,"function"],[1," "],[0,"(fcMapLa"]],"start1":5580,"start2":5580,"length1":16,"length2":17},{"diffs":[[0,"apLayer)"],[1," "],[0,"{\n"],[-1,"  "],[0,"        "]],"start1":5593,"start2":5593,"length1":20,"length2":19},{"diffs":[[0,"                "],[1," "],[1," "],[0,"\"layer\": fcMapLa"]],"start1":5693,"start2":5693,"length1":32,"length2":34},{"diffs":[[0,"                "],[1,"  "],[0,"\"title\": mapLaye"]],"start1":5748,"start2":5748,"length1":32,"length2":34},{"diffs":[[0,"                "],[1," "],[1," "],[0,"\"defaultSymbol\":"]],"start1":5795,"start2":5795,"length1":32,"length2":34},{"diffs":[[0,"ngth > 1) {\n"],[1,"  "],[0,"            "]],"start1":5915,"start2":5915,"length1":24,"length2":26},{"diffs":[[0,";\n              "],[-1," "],[-1," "],[0,"}\n"],[-1,"  "],[0,"            });\n"]],"start1":6073,"start2":6073,"length1":38,"length2":34},{"diffs":[[0,"        "],[-1,"  }\n  "],[1,"}\n"],[0,"      "],[-1,"  "],[0,"} else i"]],"start1":6109,"start2":6109,"length1":30,"length2":24},{"diffs":[[0,"alse"],[-1,") {\n            layerInfo = {"],[1," && mapLayer.layerObject) {\n      var showDefaultSymbol = false;\n      if (mapLayer.layerObject.version < 10.1 && (mapLayer.layerObject instanceof esri.layers.ArcGISDynamicMapServiceLayer || mapLayer.layerObject instanceof esri.layers.ArcGISTiledMapServiceLayer)) {\n        showDefaultSymbol = true;"],[0,"\n     "],[1," }\n"],[0," "],[1,"     layerInfo = {\n"],[0,"    "]],"start1":6161,"start2":6161,"length1":44,"length2":336},{"diffs":[[0,"Object,\n        "],[-1,"      "],[0,"\"title\": mapLaye"]],"start1":6524,"start2":6524,"length1":38,"length2":32},{"diffs":[[0,".title,\n        "],[-1,"     "],[-1," "],[0,"\"defaultSymbol\":"]],"start1":6557,"start2":6557,"length1":38,"length2":32},{"diffs":[[0,"l\": "],[-1,"false\n    "],[1,"showDefaultSymbol\n"],[0,"      "],[-1,"  "],[0,"};\n"],[-1,"    "],[0,"    "]],"start1":6586,"start2":6586,"length1":33,"length2":35},{"diffs":[[0,"nd is false\n"],[-1,"    "],[0,"        if ("]],"start1":6682,"start2":6682,"length1":28,"length2":24},{"diffs":[[0,"            "],[-1,"  "],[0,"var hideLaye"]],"start1":6725,"start2":6725,"length1":26,"length2":24},{"diffs":[[0,"layers, function"],[1," "],[0,"(lyr)"],[1," "],[0,"{\n              "]],"start1":6784,"start2":6784,"length1":37,"length2":39},{"diffs":[[0,"        "],[-1,"  "],[0,"}), func"]],"start1":6864,"start2":6864,"length1":18,"length2":16},{"diffs":[[0,"function"],[1," "],[0,"(lyr)"],[1," "],[0,"{\n      "]],"start1":6876,"start2":6876,"length1":21,"length2":23},{"diffs":[[0,"n lyr.id"],[1,";"],[0,"\n"],[-1,"  "],[0,"        "]],"start1":6914,"start2":6914,"length1":19,"length2":18},{"diffs":[[0,"            });\n"],[-1,"  "],[0,"            if ("]],"start1":6924,"start2":6924,"length1":34,"length2":32},{"diffs":[[0,"hideLayers;\n"],[-1,"  "],[0,"            "]],"start1":7016,"start2":7016,"length1":26,"length2":24},{"diffs":[[0,"  }\n        "],[-1,"    }\n    "],[1,"}\n"],[0,"        laye"]],"start1":7038,"start2":7038,"length1":34,"length2":26},{"diffs":[[0,"    "],[-1,"      }\n        });\n      "],[1,"}\n  });\n"],[0,"  re"]],"start1":7088,"start2":7088,"length1":34,"length2":16},{"diffs":[[0,"rInfos;\n"],[-1,"    "],[0,"  }\n\n   "]],"start1":7113,"start2":7113,"length1":20,"length2":16}]],"length":8541,"saved":false}
{"ts":1349804632270,"patch":[[{"diffs":[[0,"late\");\n"],[-1,"  \n  "],[1,"\n"],[0,"\n     va"]],"start1":398,"start2":398,"length1":21,"length2":17},{"diffs":[[0,", i18n;\n"],[-1,"\t "],[0,""],[1,""],[0,"\n\t funct"]],"start1":432,"start2":432,"length1":18,"length2":16},{"diffs":[[0,"chID();\n"],[-1,"\t   "],[0,""],[1,""],[0,"\n\t   //g"]],"start1":474,"start2":474,"length1":20,"length2":16},{"diffs":[[0,"late\");\n"],[-1,"\t  "],[0,""],[1,""],[0,"\n\t   doj"]],"start1":577,"start2":577,"length1":19,"length2":16},{"diffs":[[0,"e.down;\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":712,"start2":712,"length1":22,"length2":16},{"diffs":[[0,"ingurl;\n"],[-1,"       "],[0,"\n       "]],"start1":1233,"start2":1233,"length1":23,"length2":16},{"diffs":[[0,"oxyurl){"],[-1,"   "],[0,"\n       "]],"start1":1269,"start2":1269,"length1":19,"length2":16},{"diffs":[[0," false;\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":1498,"start2":1498,"length1":22,"length2":16},{"diffs":[[0," || {};\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":1608,"start2":1608,"length1":22,"length2":16},{"diffs":[[0,".webmap;"],[-1,"      "],[0,"\n       "]],"start1":1999,"start2":1999,"length1":22,"length2":16},{"diffs":[[0,"       }"],[-1," "],[0,"\n       "]],"start1":2008,"start2":2008,"length1":17,"length2":16},{"diffs":[[0,"MapsKey;"],[-1,"      "],[0,"\n       "]],"start1":2114,"start2":2114,"length1":22,"length2":16},{"diffs":[[0,"items\";\n"],[-1,"\t   "],[0,""],[1,""],[0,"\n\t   \t  "]],"start1":2202,"start2":2202,"length1":20,"length2":16},{"diffs":[[0,"egend;}\n"],[-1,"    "],[0,""],[1,""],[0,"\n\t\t\t   c"]],"start1":2871,"start2":2871,"length1":20,"length2":16},{"diffs":[[0,"\t }\n\t }\n"],[-1,"\t "],[0,""],[1,""],[0,"\n\t funct"]],"start1":3067,"start2":3067,"length1":18,"length2":16},{"diffs":[[0,"eMap(){\n"],[-1,"\t   "],[0,""],[1,""],[0,"\n\t   if "]],"start1":3092,"start2":3092,"length1":20,"length2":16},{"diffs":[[0,";\n\t   }\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\n\t   var"]],"start1":3171,"start2":3171,"length1":18,"length2":16},{"diffs":[[0,"onse) {\n"],[-1,"        "],[0,""],[1,""],[0,"\n\t\t docu"]],"start1":3508,"start2":3508,"length1":24,"length2":16},{"diffs":[[0," || \"\";\n"],[-1,"        "],[0,""],[1,""],[0,"\n       "]],"start1":3791,"start2":3791,"length1":24,"length2":16},{"diffs":[[0,"se.map;\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\n\t\t dojo"]],"start1":3821,"start2":3821,"length1":18,"length2":16},{"diffs":[[0,"oader);\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\n       "]],"start1":3869,"start2":3869,"length1":18,"length2":16},{"diffs":[[0,"    });\n"],[-1,"\t   "],[0,""],[1,""],[0,"\n     }\n"]],"start1":4386,"start2":4386,"length1":20,"length2":16},{"diffs":[[0,"scalebar"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":4544,"start2":4544,"length1":17,"length2":16},{"diffs":[[0,"     });"],[-1," "],[0,""],[1,""],[0,"\n\n      "]],"start1":4695,"start2":4695,"length1":17,"length2":16},{"diffs":[[0,"ayers);\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":4745,"start2":4745,"length1":22,"length2":16},{"diffs":[[0,"\n     }\n"],[-1,"\t "],[0,""],[1,""],[0,"\n//build"]],"start1":5025,"start2":5025,"length1":18,"length2":16},{"diffs":[[0,"s;\n  }\n\n"],[-1,"    "],[0,""],[1,""],[0,"\n     fu"]],"start1":7014,"start2":7014,"length1":20,"length2":16},{"diffs":[[0,"domains\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":7212,"start2":7212,"length1":17,"length2":16},{"diffs":[[0,"j = -1;\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":7240,"start2":7240,"length1":17,"length2":16},{"diffs":[[0,"    });\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":7485,"start2":7485,"length1":17,"length2":16},{"diffs":[[0," false;\n"],[-1,"   "],[0,""],[1,""],[0,"\n       "]],"start1":7513,"start2":7513,"length1":19,"length2":16},{"diffs":[[0,"      }\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":8010,"start2":8010,"length1":17,"length2":16},{"diffs":[[0,"  };"],[-1,"    "],[0,""],[1,""],[0,"\n    }\n"],[-1,"\t"],[0,""],[1,""],[0,"\n\tfu"]],"start1":8044,"start2":8044,"length1":20,"length2":15},{"diffs":[[0,"e();\n\t}\n"],[-1,"\t"],[0,"\n\t//Jque"]],"start1":8103,"start2":8103,"length1":17,"length2":16}]],"length":8420,"saved":false}
{"contributors":[],"silentsave":true,"ts":1350321897600,"patch":[[{"diffs":[[0," }\n\n"],[-1,"\t   esri.arcgis.utils.arcgisUrl = \"http://arcgis.com/sharing/content/items\";\n\n"],[0,"\t   "]],"start1":2129,"start2":2129,"length1":86,"length2":8}]],"length":8342,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351541428943,"patch":[[{"diffs":[[0,"    "],[-1,"dojo.byId('legendDiv').innerHTML = \"\""],[1,"$(\"#legendToggle\").hide()"],[0,";\n  "]],"start1":4896,"start2":4896,"length1":45,"length2":33}]],"length":8330,"saved":false}
{"ts":1351541803737,"patch":[[{"diffs":[[0," });\n    });"],[1,"\n    \n    "]],"start1":8318,"start2":8318,"length1":12,"length2":22}]],"length":8340,"saved":false}
{"ts":1351541804552,"patch":[[{"diffs":[[0,"});\n"],[1,"\n"],[0,"    "],[-1,"\n    "],[1,"var getLegendConfig = function(str){\n        if (str.toLowerCase() === \"false\"){\n            return false;\n        }\n        else{\n            return true;\n        }\n    }"]],"start1":8327,"start2":8327,"length1":13,"length2":180}]],"length":8507,"saved":false}
{"ts":1351541831900,"patch":[[{"diffs":[[0,"\n\t   if "],[1,"(getLegendConfig"],[0,"(configO"]],"start1":3022,"start2":3022,"length1":16,"length2":32},{"diffs":[[0,"s.legend"],[1,")"],[0," == fals"]],"start1":3059,"start2":3059,"length1":16,"length2":17},{"diffs":[[0,"false){\n"],[-1,"\t\t"],[1,"        "],[0,"   $(\"#l"]],"start1":3072,"start2":3072,"length1":18,"length2":24}]],"length":8530,"saved":false}
{"ts":1351541897118,"patch":[[{"diffs":[[0,"if (str."],[1,"."],[0,"toLowerC"]],"start1":8404,"start2":8404,"length1":16,"length2":17}]],"length":8531,"saved":false}
{"ts":1351541900005,"patch":[[{"diffs":[[0,"if (str."],[1,"toSt"],[0,".toLower"]],"start1":8404,"start2":8404,"length1":16,"length2":20}]],"length":8535,"saved":false}
{"ts":1351541900921,"patch":[[{"diffs":[[0,"(str.toS"],[-1,"t"],[1,"r"],[0,".toLower"]],"start1":8407,"start2":8407,"length1":17,"length2":17}]],"length":8535,"saved":false}
{"ts":1351541902989,"patch":[[{"diffs":[[0,"str.toSr"],[1,"ing"],[0,".toLower"]],"start1":8408,"start2":8408,"length1":16,"length2":19}]],"length":8538,"saved":false}
{"ts":1351541903999,"patch":[[{"diffs":[[0,".toSring"],[1,"()"],[0,".toLower"]],"start1":8411,"start2":8411,"length1":16,"length2":18}]],"length":8540,"saved":false}
{"ts":1351541931350,"patch":[[{"diffs":[[0,"n(str){\n"],[1,"        str.toSring()\n"],[0,"        "]],"start1":8388,"start2":8388,"length1":16,"length2":38}]],"length":8562,"saved":false}
{"ts":1351541937726,"patch":[[{"diffs":[[0,"        "],[1,"console."],[0,"str.toSr"]],"start1":8396,"start2":8396,"length1":16,"length2":24}]],"length":8570,"saved":false}
{"ts":1351541938987,"patch":[[{"diffs":[[0,"console."],[1,"o"],[0,"str.toSr"]],"start1":8404,"start2":8404,"length1":16,"length2":17}]],"length":8571,"saved":false}
{"ts":1351541940569,"patch":[[{"diffs":[[0,"console."],[-1,"o"],[1,"log"],[0,"str.toSr"]],"start1":8404,"start2":8404,"length1":17,"length2":19}]],"length":8573,"saved":false}
{"ts":1351541942260,"patch":[[{"diffs":[[0,"sole.log"],[1,"("],[0,"str.toSr"]],"start1":8407,"start2":8407,"length1":16,"length2":17}]],"length":8574,"saved":false}
{"ts":1351541943516,"patch":[[{"diffs":[[0,"oSring()"],[1,");"],[0,"\n       "]],"start1":8421,"start2":8421,"length1":16,"length2":18}]],"length":8576,"saved":false}
{"ts":1351541965673,"patch":[[{"diffs":[[0,"(str"],[-1,".toSring())"],[0,";\n  "]],"start1":8415,"start2":8415,"length1":19,"length2":8}]],"length":8565,"saved":false}
{"ts":1351541967434,"patch":[[{"diffs":[[0,".log(str"],[1,")"],[0,";\n      "]],"start1":8411,"start2":8411,"length1":16,"length2":17}]],"length":8566,"saved":false}
{"ts":1351542499929,"patch":[[{"diffs":[[0,"str."],[-1,"toSring()"],[0,".toL"]],"start1":8434,"start2":8434,"length1":17,"length2":8}]],"length":8557,"saved":false}
{"ts":1351542501582,"patch":[[{"diffs":[[0,"if (str."],[-1,"."],[0,"toLowerC"]],"start1":8430,"start2":8430,"length1":17,"length2":16}]],"length":8556,"saved":false}
{"ts":1351542529377,"patch":[[{"diffs":[[0," return "],[1,"\""],[0,"false;\n "]],"start1":8477,"start2":8477,"length1":16,"length2":17}]],"length":8557,"saved":false}
{"ts":1351542531652,"patch":[[{"diffs":[[0,"eturn \"false"],[1,"\""],[0,";\n        }\n"]],"start1":8479,"start2":8479,"length1":24,"length2":25}]],"length":8558,"saved":false}
{"ts":1351542535893,"patch":[[{"diffs":[[0," return "],[1,"\""],[0,"true;\n  "]],"start1":8529,"start2":8529,"length1":16,"length2":17}]],"length":8559,"saved":false}
{"ts":1351542539511,"patch":[[{"diffs":[[0,"return \"true"],[1,"\""],[0,";\n        }\n"]],"start1":8530,"start2":8530,"length1":24,"length2":25}]],"length":8560,"saved":false}
{"ts":1351542546109,"patch":[[{"diffs":[[0,"     }\n    }"],[1,";"]],"start1":8548,"start2":8548,"length1":12,"length2":13}]],"length":8561,"saved":false}
{"ts":1351542554839,"patch":[[{"diffs":[[0,"r){\n"],[-1,"        console.log(str);\n"],[0,"    "]],"start1":8392,"start2":8392,"length1":34,"length2":8}]],"length":8535,"saved":false}
{"ts":1351542611455,"patch":[[{"diffs":[[0,"gend) =="],[1,"="],[0," false){"]],"start1":3063,"start2":3063,"length1":16,"length2":17}]],"length":8536,"saved":false}
{"ts":1351542612950,"patch":[[{"diffs":[[0,"legend) === "],[1,"\""],[0,"false){\n    "]],"start1":3061,"start2":3061,"length1":24,"length2":25}]],"length":8537,"saved":false}
{"ts":1351542617274,"patch":[[{"diffs":[[0,"= \"false"],[1,"\""],[0,"){\n     "]],"start1":3071,"start2":3071,"length1":16,"length2":17}]],"length":8538,"saved":false}
{"ts":1351542953559,"patch":[[{"diffs":[[0,"legend) === "],[-1,"\""],[0,"false\"){\n   "]],"start1":3061,"start2":3061,"length1":25,"length2":24}]],"length":8537,"saved":false}
{"ts":1351542955629,"patch":[[{"diffs":[[0,"d) === false"],[-1,"\""],[0,"){\n         "]],"start1":3066,"start2":3066,"length1":25,"length2":24}]],"length":8536,"saved":false}
{"ts":1351542966610,"patch":[[{"diffs":[[0," });"],[-1,"\n\n    var getLegendConfig = function(str){\n        if (str.toLowerCase() === \"false\"){\n            return \"false\";\n        }\n        else{\n            return \"true\";\n        }\n    };"]],"start1":8350,"start2":8350,"length1":186,"length2":4}]],"length":8354,"saved":false}
{"ts":1351542997703,"patch":[[{"diffs":[[0," if "],[-1,"(getLegendConfig"],[0,"(con"]],"start1":3026,"start2":3026,"length1":24,"length2":8}]],"length":8338,"saved":false}
{"ts":1351543000195,"patch":[[{"diffs":[[0,"s.legend"],[-1,")"],[0," === fal"]],"start1":3043,"start2":3043,"length1":17,"length2":16}]],"length":8337,"saved":false}
{"ts":1351543057374,"patch":[[{"diffs":[[0,".legend === "],[1,"\""],[0,"false){\n    "]],"start1":3044,"start2":3044,"length1":24,"length2":25}]],"length":8338,"saved":false}
{"ts":1351543059276,"patch":[[{"diffs":[[0,"= \"false"],[1,"\""],[0,"){\n     "]],"start1":3054,"start2":3054,"length1":16,"length2":17}]],"length":8339,"saved":false}
{"ts":1351543069459,"patch":[[{"diffs":[[0,"=== "],[-1,"\""],[0,"false"],[-1,"\""],[0,"){\n "]],"start1":3052,"start2":3052,"length1":15,"length2":13}]],"length":8337,"saved":false}
{"ts":1351543205868,"patch":[[{"diffs":[[0,".legend === "],[1,"\""],[0,"false){\n    "]],"start1":3044,"start2":3044,"length1":24,"length2":25}]],"length":8338,"saved":false}
{"ts":1351543208745,"patch":[[{"diffs":[[0,"= \"false"],[1,"\""],[0,"){\n     "]],"start1":3054,"start2":3054,"length1":16,"length2":17}]],"length":8339,"saved":false}
{"ts":1351544282249,"patch":[[{"diffs":[[0,"ponse){\n"],[1,"              if(response.values.title !== undefined){configOptions.title = response.values.title;}\n"],[0,"\t\t\t   if"]],"start1":2505,"start2":2505,"length1":16,"length2":116}]],"length":8439,"saved":false}
{"ts":1351544284064,"patch":[[{"diffs":[[0,"        "],[1," "],[0,"if(respo"]],"start1":2519,"start2":2519,"length1":16,"length2":17}]],"length":8440,"saved":false}
{"ts":1351544299685,"patch":[[{"diffs":[[0,"response.values."],[-1,"title"],[1,"webmap"],[0," !== undefined){"]],"start1":2531,"start2":2531,"length1":37,"length2":38}]],"length":8441,"saved":false}
{"ts":1351544310962,"patch":[[{"diffs":[[0,"){configOptions."],[-1,"title"],[1,"webmap"],[0," = response.valu"]],"start1":2567,"start2":2567,"length1":37,"length2":38}]],"length":8442,"saved":false}
{"ts":1351544312289,"patch":[[{"diffs":[[0,"onse.values.titl"],[1,"webmap"],[0,"e;}\n\t\t\t   if(res"]],"start1":2596,"start2":2596,"length1":32,"length2":38}]],"length":8448,"saved":false}
{"ts":1351544313226,"patch":[[{"diffs":[[0,"ues.titl"],[-1,"webmap"],[0,"e;}\n\t\t\t "]],"start1":2604,"start2":2604,"length1":22,"length2":16}]],"length":8442,"saved":false}
{"ts":1351544315185,"patch":[[{"diffs":[[0,"response.values."],[-1,"title"],[1,"webmap"],[0,";}\n\t\t\t   if(resp"]],"start1":2592,"start2":2592,"length1":37,"length2":38}]],"length":8443,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351890976243,"patch":[[{"diffs":[[0," \"false\""],[1," || configOptions.legend === false"],[0,"){\n     "]],"start1":3159,"start2":3159,"length1":16,"length2":50}]],"length":8477,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352134735031,"patch":[[{"diffs":[[0,"      $(\"#legend"],[-1,"Toggle"],[1,"Con"],[0,"\").hide();\n\t   }"]],"start1":3209,"start2":3209,"length1":38,"length2":35}]],"length":8474,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352227056385,"patch":[[{"diffs":[[0,"tchID();"],[1,"\n       \n       dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n       }"],[0,"\n\n\t   //"]],"start1":473,"start2":473,"length1":16,"length2":505}]],"length":8963,"saved":false}
{"contributors":[],"silentsave":true,"ts":1352241196106,"patch":[[{"diffs":[[0,"r: true,"],[1,"dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n         //Page Specific\n         dojo.forEach(dojo.query(\".legend\"),function(leg){\n             dojo.attr(leg,\"dir\",\"rtl\");\n         });\n         dojo.forEach(dojo.query(\".description\"),function(leg){\n             dojo.attr(leg,\"dir\",\"rtl\");\n         });\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n         //Page Specific\n         dojo.forEach(dojo.query(\".legend\"),function(leg){\n             dojo.attr(leg,\"dir\",\"ltr\");\n         });\n         dojo.forEach(dojo.query(\".description\"),function(leg){\n             dojo.attr(leg,\"dir\",\"ltr\");\n         });\n       }"],[0,"\n       "]],"start1":3855,"start2":3855,"length1":16,"length2":1001}]],"length":9948,"saved":false}
{"ts":1352241198267,"patch":[[{"diffs":[[0,"rue,"],[-1,"dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n         //Page Specific\n         dojo.forEach(dojo.query(\".legend\"),function(leg){\n             dojo.attr(leg,\"dir\",\"rtl\");\n         });\n         dojo.forEach(dojo.query(\".description\"),function(leg){\n             dojo.attr(leg,\"dir\",\"rtl\");\n         });\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n         //Page Specific\n         dojo.forEach(dojo.query(\".legend\"),function(leg){\n             dojo.attr(leg,\"dir\",\"ltr\");\n         });\n         dojo.forEach(dojo.query(\".description\"),function(leg){\n             dojo.attr(leg,\"dir\",\"ltr\");\n         });\n       }"],[0,"\n   "]],"start1":3859,"start2":3859,"length1":993,"length2":8}]],"length":8963,"saved":false}
{"ts":1352241205291,"patch":[[{"diffs":[[0,": true,\n"],[1,"           sliderStyle:\"small\",\n"],[0,"        "]],"start1":3856,"start2":3856,"length1":16,"length2":48}]],"length":8995,"saved":false}
{"ts":1352241443187,"patch":[[{"diffs":[[0,"e(\"esri."],[-1,"dijit.Legend"],[1,"layout"],[0,"\");\n  do"]],"start1":41,"start2":41,"length1":28,"length2":22},{"diffs":[[0,"e(\"esri."],[-1,"dijit.Scalebar"],[1,"widgets"],[0,"\");\n  do"]],"start1":72,"start2":72,"length1":30,"length2":23},{"diffs":[[0,"\");\n"],[-1,"  dojo.require(\"esri.IdentityManager\");\n  dojo.require(\"dijit.dijit\");\n  dojo.require(\"dijit.layout.BorderContainer\");\n  dojo.require(\"dijit.layout.ContentPane\");\n  dojo.require(\"dijit.layout.StackContainer\");\n"],[0,"  do"]],"start1":124,"start2":124,"length1":218,"length2":8}]],"length":8772,"saved":false}
{"ts":1352241548166,"patch":[[{"diffs":[[0,"rlObject"],[-1,"s"],[0,", i18n;\n"]],"start1":200,"start2":200,"length1":17,"length2":16}]],"length":8771,"saved":false}
