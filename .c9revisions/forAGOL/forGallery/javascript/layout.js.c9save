{"ts":1349804534404,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"  dojo.require(\"esri.map\");\n  dojo.require(\"esri.dijit.Legend\");\n  dojo.require(\"esri.dijit.Scalebar\");\n  dojo.require(\"esri.arcgis.utils\");\n  dojo.require(\"esri.IdentityManager\");\n  dojo.require(\"dijit.dijit\");\n  dojo.require(\"dijit.layout.BorderContainer\");\n  dojo.require(\"dijit.layout.ContentPane\");\n  dojo.require(\"dijit.layout.StackContainer\");\n  dojo.requireLocalization(\"esriTemplate\",\"template\");\n  \n  \n     var map, urlObjects, i18n;\n\t \n\t function initMap() {\n       patchID();\n\t   \n\t   //get the localization strings\n  \t   i18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\n\t  \n\t   dojo.byId('loading').innerHTML = i18n.viewer.loading.message;\n\t   dojo.byId('legTogText').innerHTML = i18n.viewer.legToggle.down;\n      \n       if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\n         configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\n       }\n       esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);\n\n       if(!configOptions.sharingurl){\n         configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\n       }\n       esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\n       \n       if(!configOptions.proxyurl){   \n         configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\n       }\n\n       esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\n\n       esri.config.defaults.io.alwaysUseProxy = false;\n      \n       urlObject = esri.urlToObject(document.location.href);\n       urlObject.query = urlObject.query || {};\n      \n       if(urlObject.query.title){\n         configOptions.title = urlObject.query.title;\n       }\n       if(urlObject.query.subtitle){\n         configOptions.subtitle = urlObject.query.subtitle;\n       }\n\t   if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;\n       }\n       if(urlObject.query.webmap){\n         configOptions.webmap = urlObject.query.webmap;      \n       } \n       if(urlObject.query.bingMapsKey){\n         configOptions.bingmapskey = urlObject.query.bingMapsKey;      \n       }\n\n\t   esri.arcgis.utils.arcgisUrl = \"http://arcgis.com/sharing/content/items\";\n\t   \n\t   \t   //is an appid specified - if so read json from there\n\t  if(configOptions.appid || (urlObject.query && urlObject.query.appid)){\n\t\tvar appid = configOptions.appid || urlObject.query.appid;\n\t\tvar requestHandle = esri.request({\n\t\t  url: configOptions.sharingurl + \"/\" + appid + \"/data\",\n\t\t  content: {f:\"json\"},\n\t\t  callbackParamName:\"callback\",\n\t\t  load: function(response){\n\t\t\t   if(response.values.title !== undefined){configOptions.title = response.values.title;}\n\t\t\t   if(response.values.subtitle !== undefined){configOptions.subtitle = response.values.subtitle;}\n\t\t\t   if(response.values.legend !== undefined){configOptions.legend = response.values.legend;}\n    \n\t\t\t   createMap();\n\t\t  },\n\t\t  error: function(response){\n\t\t\tvar e = response.message;\n\t\t   alert(i18n.viewer.errors.createMap +  response.message);\n\t\t  }\n\t\t});\n\t\t }else{\n\t\t\tcreateMap();\n\t\t }\n\t }\n\t \n\t function createMap(){\n\t   \n\t   if (configOptions.legend == false){\n\t\t   $(\"#legendToggle\").hide();\n\t   }\n\t\t\n\t   var mapDeferred = esri.arcgis.utils.createMap(configOptions.webmap, \"map\", {\n         mapOptions: {\n           slider: true,\n           nav: false,\n           wrapAround180:true\n         },\n         ignorePopups:false,\n         bingMapsKey: configOptions.bingmapskey\n       });\n\n       mapDeferred.addCallback(function (response) {\n        \n\t\t document.title = configOptions.title|| response.itemInfo.item.title || \"\";\n         dojo.byId(\"title\").innerHTML = configOptions.title ||response.itemInfo.item.title || \"\";\n         dojo.byId(\"subtitle\").innerHTML = configOptions.subtitle|| response.itemInfo.item.snippet || \"\";\n        \n         map = response.map;\n\t\t\n\t\t dojo.connect(map,\"onUpdateEnd\",hideLoader);\n\t\t\n         var layers = response.itemInfo.itemData.operationalLayers;\n         if(map.loaded){\n           initUI(layers);\n         }\n         else{\n           dojo.connect(map,\"onLoad\",function(){\n             initUI(layers);\n           });\n         }\n         //resize the map when the browser resizes\n         dojo.connect(dijit.byId('map'), 'resize', map,map.resize);\n       });\n\n       mapDeferred.addErrback(function (error) {\n         alert(i18n.viewer.errors.createMap + dojo.toJson(error.message));\n       });\n\t   \n     }\n\n\n     function initUI(layers) {\n       //add chrome theme for popup\n       dojo.addClass(map.infoWindow.domNode, \"chrome\");\n       //add the scalebar \n       var scalebar = new esri.dijit.Scalebar({\n         map: map,\n         scalebarUnit:i18n.viewer.main.scaleBarUnits //metric or english\n       }); \n\n       var layerInfo = buildLayersList(layers);\n      \n       if(layerInfo.length > 0){\n         var legendDijit = new esri.dijit.Legend({\n           map:map,\n           layerInfos:layerInfo\n         },\"legendDiv\");\n         legendDijit.startup();\n       }\n       else{\n         dojo.byId('legendDiv').innerHTML = \"\";\n       }\n     }\n\t \nfunction buildLayersList(layers){\n        //layers  arg is  response.itemInfo.itemData.operationalLayers;\n        var layerInfos = [];\n        dojo.forEach(layers, function(mapLayer, index){\n          var layerInfo = {};\n          if (mapLayer.featureCollection && mapLayer.type !== \"CSV\") {\n            if (mapLayer.featureCollection.showLegend === true) {\n              dojo.forEach(mapLayer.featureCollection.layers, function(fcMapLayer){\n                if (fcMapLayer.showLegend !== false) {\n                  layerInfo = {\n                    \"layer\": fcMapLayer.layerObject,\n                    \"title\": mapLayer.title,\n                    \"defaultSymbol\": false\n                  };\n                  if (mapLayer.featureCollection.layers.length > 1) {\n                    layerInfo.title += \" - \" + fcMapLayer.layerDefinition.name;\n                  }\n                  layerInfos.push(layerInfo);\n                }\n              });\n            }\n          } else if (mapLayer.showLegend !== false) {\n            layerInfo = {\n              \"layer\": mapLayer.layerObject,\n              \"title\": mapLayer.title,\n              \"defaultSymbol\": false\n            };\n            //does it have layers too? If so check to see if showLegend is false\n            if (mapLayer.layers) {\n              var hideLayers = dojo.map(dojo.filter(mapLayer.layers, function(lyr){\n                return (lyr.showLegend === false);\n              }), function(lyr){\n                return lyr.id\n              });\n              if (hideLayers.length) {\n                layerInfo.hideLayers = hideLayers;\n              }\n            }\n            layerInfos.push(layerInfo);\n          }\n        });\n        return layerInfos;\n      }\n\n    \n     function patchID() {  //patch id manager for use in apps.arcgis.com\n       esri.id._isIdProvider = function(server, resource) {\n       // server and resource are assumed one of portal domains\n \n       var i = -1, j = -1;\n \n       dojo.forEach(this._gwDomains, function(domain, idx) {\n         if (i === -1 && domain.regex.test(server)) {\n           i = idx;\n         }\n         if (j === -1 && domain.regex.test(resource)) {\n           j = idx;\n         }\n       });\n \n       var retVal = false;\n   \n       if (i > -1 && j > -1) {\n         if (i === 0 || i === 4) {\n           if (j === 0 || j === 4) {\n             retVal = true;\n           }\n         }\n         else if (i === 1) {\n           if (j === 1 || j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 2) {\n           if (j === 2) {\n             retVal = true;\n           }\n         }\n         else if (i === 3) {\n           if (j === 3) {\n             retVal = true;\n           }\n         }\n       }\n \n       return retVal;\n     };    \n    }\n\t\n\tfunction hideLoader(){\n\t  $(\"#loadingCon\").hide();\n\t}\n\t\n\t//Jquery Layout\n\t$(document).ready(function(e) {\n\t  $(\"#legendToggle\").click(function(){\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });"]],"start1":0,"start2":0,"length1":0,"length2":8278}]],"length":8278}
{"contributors":[],"silentsave":true,"ts":1349804631495,"patch":[[{"diffs":[[0,"   }\n\t \n"],[1,"//build a list of layers to dispaly in the legend\n  "],[0,"function"]],"start1":5130,"start2":5130,"length1":16,"length2":68},{"diffs":[[0,"ayers){\n"],[-1,"       "],[1,"\n"],[0," //layer"]],"start1":5216,"start2":5216,"length1":23,"length2":17},{"diffs":[[0,"Layers;\n"],[-1,"      "],[0,"  var la"]],"start1":5282,"start2":5282,"length1":22,"length2":16},{"diffs":[[0,"s = [];\n"],[-1,"      "],[0,"  dojo.f"]],"start1":5305,"start2":5305,"length1":22,"length2":16},{"diffs":[[0,"function"],[1," "],[0,"(mapLaye"]],"start1":5336,"start2":5336,"length1":16,"length2":17},{"diffs":[[0,", index)"],[1," "],[0,"{\n"],[-1,"    "],[0,"      va"]],"start1":5354,"start2":5354,"length1":22,"length2":19},{"diffs":[[0,"= {};\n      "],[-1,"    "],[0,"if (mapLayer"]],"start1":5385,"start2":5385,"length1":28,"length2":24},{"diffs":[[0,"== \"CSV\") {\n"],[-1,"    "],[0,"        if ("]],"start1":5446,"start2":5446,"length1":28,"length2":24},{"diffs":[[0,"            "],[-1,"  "],[0,"dojo.forEach"]],"start1":5520,"start2":5520,"length1":26,"length2":24},{"diffs":[[0,"function"],[1," "],[0,"(fcMapLa"]],"start1":5580,"start2":5580,"length1":16,"length2":17},{"diffs":[[0,"apLayer)"],[1," "],[0,"{\n"],[-1,"  "],[0,"        "]],"start1":5593,"start2":5593,"length1":20,"length2":19},{"diffs":[[0,"                "],[1," "],[1," "],[0,"\"layer\": fcMapLa"]],"start1":5693,"start2":5693,"length1":32,"length2":34},{"diffs":[[0,"                "],[1,"  "],[0,"\"title\": mapLaye"]],"start1":5748,"start2":5748,"length1":32,"length2":34},{"diffs":[[0,"                "],[1," "],[1," "],[0,"\"defaultSymbol\":"]],"start1":5795,"start2":5795,"length1":32,"length2":34},{"diffs":[[0,"ngth > 1) {\n"],[1,"  "],[0,"            "]],"start1":5915,"start2":5915,"length1":24,"length2":26},{"diffs":[[0,";\n              "],[-1," "],[-1," "],[0,"}\n"],[-1,"  "],[0,"            });\n"]],"start1":6073,"start2":6073,"length1":38,"length2":34},{"diffs":[[0,"        "],[-1,"  }\n  "],[1,"}\n"],[0,"      "],[-1,"  "],[0,"} else i"]],"start1":6109,"start2":6109,"length1":30,"length2":24},{"diffs":[[0,"alse"],[-1,") {\n            layerInfo = {"],[1," && mapLayer.layerObject) {\n      var showDefaultSymbol = false;\n      if (mapLayer.layerObject.version < 10.1 && (mapLayer.layerObject instanceof esri.layers.ArcGISDynamicMapServiceLayer || mapLayer.layerObject instanceof esri.layers.ArcGISTiledMapServiceLayer)) {\n        showDefaultSymbol = true;"],[0,"\n     "],[1," }\n"],[0," "],[1,"     layerInfo = {\n"],[0,"    "]],"start1":6161,"start2":6161,"length1":44,"length2":336},{"diffs":[[0,"Object,\n        "],[-1,"      "],[0,"\"title\": mapLaye"]],"start1":6524,"start2":6524,"length1":38,"length2":32},{"diffs":[[0,".title,\n        "],[-1,"     "],[-1," "],[0,"\"defaultSymbol\":"]],"start1":6557,"start2":6557,"length1":38,"length2":32},{"diffs":[[0,"l\": "],[-1,"false\n    "],[1,"showDefaultSymbol\n"],[0,"      "],[-1,"  "],[0,"};\n"],[-1,"    "],[0,"    "]],"start1":6586,"start2":6586,"length1":33,"length2":35},{"diffs":[[0,"nd is false\n"],[-1,"    "],[0,"        if ("]],"start1":6682,"start2":6682,"length1":28,"length2":24},{"diffs":[[0,"            "],[-1,"  "],[0,"var hideLaye"]],"start1":6725,"start2":6725,"length1":26,"length2":24},{"diffs":[[0,"layers, function"],[1," "],[0,"(lyr)"],[1," "],[0,"{\n              "]],"start1":6784,"start2":6784,"length1":37,"length2":39},{"diffs":[[0,"        "],[-1,"  "],[0,"}), func"]],"start1":6864,"start2":6864,"length1":18,"length2":16},{"diffs":[[0,"function"],[1," "],[0,"(lyr)"],[1," "],[0,"{\n      "]],"start1":6876,"start2":6876,"length1":21,"length2":23},{"diffs":[[0,"n lyr.id"],[1,";"],[0,"\n"],[-1,"  "],[0,"        "]],"start1":6914,"start2":6914,"length1":19,"length2":18},{"diffs":[[0,"            });\n"],[-1,"  "],[0,"            if ("]],"start1":6924,"start2":6924,"length1":34,"length2":32},{"diffs":[[0,"hideLayers;\n"],[-1,"  "],[0,"            "]],"start1":7016,"start2":7016,"length1":26,"length2":24},{"diffs":[[0,"  }\n        "],[-1,"    }\n    "],[1,"}\n"],[0,"        laye"]],"start1":7038,"start2":7038,"length1":34,"length2":26},{"diffs":[[0,"    "],[-1,"      }\n        });\n      "],[1,"}\n  });\n"],[0,"  re"]],"start1":7088,"start2":7088,"length1":34,"length2":16},{"diffs":[[0,"rInfos;\n"],[-1,"    "],[0,"  }\n\n   "]],"start1":7113,"start2":7113,"length1":20,"length2":16}]],"length":8541,"saved":false}
{"ts":1349804632270,"patch":[[{"diffs":[[0,"late\");\n"],[-1,"  \n  "],[1,"\n"],[0,"\n     va"]],"start1":398,"start2":398,"length1":21,"length2":17},{"diffs":[[0,", i18n;\n"],[-1,"\t "],[0,""],[1,""],[0,"\n\t funct"]],"start1":432,"start2":432,"length1":18,"length2":16},{"diffs":[[0,"chID();\n"],[-1,"\t   "],[0,""],[1,""],[0,"\n\t   //g"]],"start1":474,"start2":474,"length1":20,"length2":16},{"diffs":[[0,"late\");\n"],[-1,"\t  "],[0,""],[1,""],[0,"\n\t   doj"]],"start1":577,"start2":577,"length1":19,"length2":16},{"diffs":[[0,"e.down;\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":712,"start2":712,"length1":22,"length2":16},{"diffs":[[0,"ingurl;\n"],[-1,"       "],[0,"\n       "]],"start1":1233,"start2":1233,"length1":23,"length2":16},{"diffs":[[0,"oxyurl){"],[-1,"   "],[0,"\n       "]],"start1":1269,"start2":1269,"length1":19,"length2":16},{"diffs":[[0," false;\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":1498,"start2":1498,"length1":22,"length2":16},{"diffs":[[0," || {};\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":1608,"start2":1608,"length1":22,"length2":16},{"diffs":[[0,".webmap;"],[-1,"      "],[0,"\n       "]],"start1":1999,"start2":1999,"length1":22,"length2":16},{"diffs":[[0,"       }"],[-1," "],[0,"\n       "]],"start1":2008,"start2":2008,"length1":17,"length2":16},{"diffs":[[0,"MapsKey;"],[-1,"      "],[0,"\n       "]],"start1":2114,"start2":2114,"length1":22,"length2":16},{"diffs":[[0,"items\";\n"],[-1,"\t   "],[0,""],[1,""],[0,"\n\t   \t  "]],"start1":2202,"start2":2202,"length1":20,"length2":16},{"diffs":[[0,"egend;}\n"],[-1,"    "],[0,""],[1,""],[0,"\n\t\t\t   c"]],"start1":2871,"start2":2871,"length1":20,"length2":16},{"diffs":[[0,"\t }\n\t }\n"],[-1,"\t "],[0,""],[1,""],[0,"\n\t funct"]],"start1":3067,"start2":3067,"length1":18,"length2":16},{"diffs":[[0,"eMap(){\n"],[-1,"\t   "],[0,""],[1,""],[0,"\n\t   if "]],"start1":3092,"start2":3092,"length1":20,"length2":16},{"diffs":[[0,";\n\t   }\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\n\t   var"]],"start1":3171,"start2":3171,"length1":18,"length2":16},{"diffs":[[0,"onse) {\n"],[-1,"        "],[0,""],[1,""],[0,"\n\t\t docu"]],"start1":3508,"start2":3508,"length1":24,"length2":16},{"diffs":[[0," || \"\";\n"],[-1,"        "],[0,""],[1,""],[0,"\n       "]],"start1":3791,"start2":3791,"length1":24,"length2":16},{"diffs":[[0,"se.map;\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\n\t\t dojo"]],"start1":3821,"start2":3821,"length1":18,"length2":16},{"diffs":[[0,"oader);\n"],[-1,"\t\t"],[0,""],[1,""],[0,"\n       "]],"start1":3869,"start2":3869,"length1":18,"length2":16},{"diffs":[[0,"    });\n"],[-1,"\t   "],[0,""],[1,""],[0,"\n     }\n"]],"start1":4386,"start2":4386,"length1":20,"length2":16},{"diffs":[[0,"scalebar"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":4544,"start2":4544,"length1":17,"length2":16},{"diffs":[[0,"     });"],[-1," "],[0,""],[1,""],[0,"\n\n      "]],"start1":4695,"start2":4695,"length1":17,"length2":16},{"diffs":[[0,"ayers);\n"],[-1,"      "],[0,""],[1,""],[0,"\n       "]],"start1":4745,"start2":4745,"length1":22,"length2":16},{"diffs":[[0,"\n     }\n"],[-1,"\t "],[0,""],[1,""],[0,"\n//build"]],"start1":5025,"start2":5025,"length1":18,"length2":16},{"diffs":[[0,"s;\n  }\n\n"],[-1,"    "],[0,""],[1,""],[0,"\n     fu"]],"start1":7014,"start2":7014,"length1":20,"length2":16},{"diffs":[[0,"domains\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":7212,"start2":7212,"length1":17,"length2":16},{"diffs":[[0,"j = -1;\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":7240,"start2":7240,"length1":17,"length2":16},{"diffs":[[0,"    });\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":7485,"start2":7485,"length1":17,"length2":16},{"diffs":[[0," false;\n"],[-1,"   "],[0,""],[1,""],[0,"\n       "]],"start1":7513,"start2":7513,"length1":19,"length2":16},{"diffs":[[0,"      }\n"],[-1," "],[0,""],[1,""],[0,"\n       "]],"start1":8010,"start2":8010,"length1":17,"length2":16},{"diffs":[[0,"  };"],[-1,"    "],[0,""],[1,""],[0,"\n    }\n"],[-1,"\t"],[0,""],[1,""],[0,"\n\tfu"]],"start1":8044,"start2":8044,"length1":20,"length2":15},{"diffs":[[0,"e();\n\t}\n"],[-1,"\t"],[0,"\n\t//Jque"]],"start1":8103,"start2":8103,"length1":17,"length2":16}]],"length":8420,"saved":false}
{"contributors":[],"silentsave":true,"ts":1350321897600,"patch":[[{"diffs":[[0," }\n\n"],[-1,"\t   esri.arcgis.utils.arcgisUrl = \"http://arcgis.com/sharing/content/items\";\n\n"],[0,"\t   "]],"start1":2129,"start2":2129,"length1":86,"length2":8}]],"length":8342,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351541428943,"patch":[[{"diffs":[[0,"    "],[-1,"dojo.byId('legendDiv').innerHTML = \"\""],[1,"$(\"#legendToggle\").hide()"],[0,";\n  "]],"start1":4896,"start2":4896,"length1":45,"length2":33}]],"length":8330,"saved":false}
{"ts":1351541803737,"patch":[[{"diffs":[[0," });\n    });"],[1,"\n    \n    "]],"start1":8318,"start2":8318,"length1":12,"length2":22}]],"length":8340,"saved":false}
{"ts":1351541804552,"patch":[[{"diffs":[[0,"});\n"],[1,"\n"],[0,"    "],[-1,"\n    "],[1,"var getLegendConfig = function(str){\n        if (str.toLowerCase() === \"false\"){\n            return false;\n        }\n        else{\n            return true;\n        }\n    }"]],"start1":8327,"start2":8327,"length1":13,"length2":180}]],"length":8507,"saved":false}
{"ts":1351541831900,"patch":[[{"diffs":[[0,"\n\t   if "],[1,"(getLegendConfig"],[0,"(configO"]],"start1":3022,"start2":3022,"length1":16,"length2":32},{"diffs":[[0,"s.legend"],[1,")"],[0," == fals"]],"start1":3059,"start2":3059,"length1":16,"length2":17},{"diffs":[[0,"false){\n"],[-1,"\t\t"],[1,"        "],[0,"   $(\"#l"]],"start1":3072,"start2":3072,"length1":18,"length2":24}]],"length":8530,"saved":false}
{"ts":1351541897118,"patch":[[{"diffs":[[0,"if (str."],[1,"."],[0,"toLowerC"]],"start1":8404,"start2":8404,"length1":16,"length2":17}]],"length":8531,"saved":false}
{"ts":1351541900005,"patch":[[{"diffs":[[0,"if (str."],[1,"toSt"],[0,".toLower"]],"start1":8404,"start2":8404,"length1":16,"length2":20}]],"length":8535,"saved":false}
{"ts":1351541900921,"patch":[[{"diffs":[[0,"(str.toS"],[-1,"t"],[1,"r"],[0,".toLower"]],"start1":8407,"start2":8407,"length1":17,"length2":17}]],"length":8535,"saved":false}
{"ts":1351541902989,"patch":[[{"diffs":[[0,"str.toSr"],[1,"ing"],[0,".toLower"]],"start1":8408,"start2":8408,"length1":16,"length2":19}]],"length":8538,"saved":false}
{"ts":1351541903999,"patch":[[{"diffs":[[0,".toSring"],[1,"()"],[0,".toLower"]],"start1":8411,"start2":8411,"length1":16,"length2":18}]],"length":8540,"saved":false}
{"ts":1351541931350,"patch":[[{"diffs":[[0,"n(str){\n"],[1,"        str.toSring()\n"],[0,"        "]],"start1":8388,"start2":8388,"length1":16,"length2":38}]],"length":8562,"saved":false}
{"ts":1351541937726,"patch":[[{"diffs":[[0,"        "],[1,"console."],[0,"str.toSr"]],"start1":8396,"start2":8396,"length1":16,"length2":24}]],"length":8570,"saved":false}
{"ts":1351541938987,"patch":[[{"diffs":[[0,"console."],[1,"o"],[0,"str.toSr"]],"start1":8404,"start2":8404,"length1":16,"length2":17}]],"length":8571,"saved":false}
{"ts":1351541940569,"patch":[[{"diffs":[[0,"console."],[-1,"o"],[1,"log"],[0,"str.toSr"]],"start1":8404,"start2":8404,"length1":17,"length2":19}]],"length":8573,"saved":false}
{"ts":1351541942260,"patch":[[{"diffs":[[0,"sole.log"],[1,"("],[0,"str.toSr"]],"start1":8407,"start2":8407,"length1":16,"length2":17}]],"length":8574,"saved":false}
{"ts":1351541943516,"patch":[[{"diffs":[[0,"oSring()"],[1,");"],[0,"\n       "]],"start1":8421,"start2":8421,"length1":16,"length2":18}]],"length":8576,"saved":false}
{"ts":1351541965673,"patch":[[{"diffs":[[0,"(str"],[-1,".toSring())"],[0,";\n  "]],"start1":8415,"start2":8415,"length1":19,"length2":8}]],"length":8565,"saved":false}
{"ts":1351541967434,"patch":[[{"diffs":[[0,".log(str"],[1,")"],[0,";\n      "]],"start1":8411,"start2":8411,"length1":16,"length2":17}]],"length":8566,"saved":false}
{"ts":1351542499929,"patch":[[{"diffs":[[0,"str."],[-1,"toSring()"],[0,".toL"]],"start1":8434,"start2":8434,"length1":17,"length2":8}]],"length":8557,"saved":false}
{"ts":1351542501582,"patch":[[{"diffs":[[0,"if (str."],[-1,"."],[0,"toLowerC"]],"start1":8430,"start2":8430,"length1":17,"length2":16}]],"length":8556,"saved":false}
{"ts":1351542529377,"patch":[[{"diffs":[[0," return "],[1,"\""],[0,"false;\n "]],"start1":8477,"start2":8477,"length1":16,"length2":17}]],"length":8557,"saved":false}
{"ts":1351542531652,"patch":[[{"diffs":[[0,"eturn \"false"],[1,"\""],[0,";\n        }\n"]],"start1":8479,"start2":8479,"length1":24,"length2":25}]],"length":8558,"saved":false}
{"ts":1351542535893,"patch":[[{"diffs":[[0," return "],[1,"\""],[0,"true;\n  "]],"start1":8529,"start2":8529,"length1":16,"length2":17}]],"length":8559,"saved":false}
{"ts":1351542539511,"patch":[[{"diffs":[[0,"return \"true"],[1,"\""],[0,";\n        }\n"]],"start1":8530,"start2":8530,"length1":24,"length2":25}]],"length":8560,"saved":false}
{"ts":1351542546109,"patch":[[{"diffs":[[0,"     }\n    }"],[1,";"]],"start1":8548,"start2":8548,"length1":12,"length2":13}]],"length":8561,"saved":false}
{"ts":1351542554839,"patch":[[{"diffs":[[0,"r){\n"],[-1,"        console.log(str);\n"],[0,"    "]],"start1":8392,"start2":8392,"length1":34,"length2":8}]],"length":8535,"saved":false}
{"ts":1351542611455,"patch":[[{"diffs":[[0,"gend) =="],[1,"="],[0," false){"]],"start1":3063,"start2":3063,"length1":16,"length2":17}]],"length":8536,"saved":false}
{"ts":1351542612950,"patch":[[{"diffs":[[0,"legend) === "],[1,"\""],[0,"false){\n    "]],"start1":3061,"start2":3061,"length1":24,"length2":25}]],"length":8537,"saved":false}
{"ts":1351542617274,"patch":[[{"diffs":[[0,"= \"false"],[1,"\""],[0,"){\n     "]],"start1":3071,"start2":3071,"length1":16,"length2":17}]],"length":8538,"saved":false}
{"ts":1351542953559,"patch":[[{"diffs":[[0,"legend) === "],[-1,"\""],[0,"false\"){\n   "]],"start1":3061,"start2":3061,"length1":25,"length2":24}]],"length":8537,"saved":false}
{"ts":1351542955629,"patch":[[{"diffs":[[0,"d) === false"],[-1,"\""],[0,"){\n         "]],"start1":3066,"start2":3066,"length1":25,"length2":24}]],"length":8536,"saved":false}
{"ts":1351542966610,"patch":[[{"diffs":[[0," });"],[-1,"\n\n    var getLegendConfig = function(str){\n        if (str.toLowerCase() === \"false\"){\n            return \"false\";\n        }\n        else{\n            return \"true\";\n        }\n    };"]],"start1":8350,"start2":8350,"length1":186,"length2":4}]],"length":8354,"saved":false}
{"ts":1351542997703,"patch":[[{"diffs":[[0," if "],[-1,"(getLegendConfig"],[0,"(con"]],"start1":3026,"start2":3026,"length1":24,"length2":8}]],"length":8338,"saved":false}
{"ts":1351543000195,"patch":[[{"diffs":[[0,"s.legend"],[-1,")"],[0," === fal"]],"start1":3043,"start2":3043,"length1":17,"length2":16}]],"length":8337,"saved":false}
{"ts":1351543057374,"patch":[[{"diffs":[[0,".legend === "],[1,"\""],[0,"false){\n    "]],"start1":3044,"start2":3044,"length1":24,"length2":25}]],"length":8338,"saved":false}
{"ts":1351543059276,"patch":[[{"diffs":[[0,"= \"false"],[1,"\""],[0,"){\n     "]],"start1":3054,"start2":3054,"length1":16,"length2":17}]],"length":8339,"saved":false}
{"ts":1351543069459,"patch":[[{"diffs":[[0,"=== "],[-1,"\""],[0,"false"],[-1,"\""],[0,"){\n "]],"start1":3052,"start2":3052,"length1":15,"length2":13}]],"length":8337,"saved":false}
{"ts":1351543205868,"patch":[[{"diffs":[[0,".legend === "],[1,"\""],[0,"false){\n    "]],"start1":3044,"start2":3044,"length1":24,"length2":25}]],"length":8338,"saved":false}
{"ts":1351543208745,"patch":[[{"diffs":[[0,"= \"false"],[1,"\""],[0,"){\n     "]],"start1":3054,"start2":3054,"length1":16,"length2":17}]],"length":8339,"saved":false}
{"ts":1351544282249,"patch":[[{"diffs":[[0,"ponse){\n"],[1,"              if(response.values.title !== undefined){configOptions.title = response.values.title;}\n"],[0,"\t\t\t   if"]],"start1":2505,"start2":2505,"length1":16,"length2":116}]],"length":8439,"saved":false}
{"ts":1351544284064,"patch":[[{"diffs":[[0,"        "],[1," "],[0,"if(respo"]],"start1":2519,"start2":2519,"length1":16,"length2":17}]],"length":8440,"saved":false}
{"ts":1351544299685,"patch":[[{"diffs":[[0,"response.values."],[-1,"title"],[1,"webmap"],[0," !== undefined){"]],"start1":2531,"start2":2531,"length1":37,"length2":38}]],"length":8441,"saved":false}
{"ts":1351544310962,"patch":[[{"diffs":[[0,"){configOptions."],[-1,"title"],[1,"webmap"],[0," = response.valu"]],"start1":2567,"start2":2567,"length1":37,"length2":38}]],"length":8442,"saved":false}
{"ts":1351544312289,"patch":[[{"diffs":[[0,"onse.values.titl"],[1,"webmap"],[0,"e;}\n\t\t\t   if(res"]],"start1":2596,"start2":2596,"length1":32,"length2":38}]],"length":8448,"saved":false}
{"ts":1351544313226,"patch":[[{"diffs":[[0,"ues.titl"],[-1,"webmap"],[0,"e;}\n\t\t\t "]],"start1":2604,"start2":2604,"length1":22,"length2":16}]],"length":8442,"saved":false}
{"ts":1351544315185,"patch":[[{"diffs":[[0,"response.values."],[-1,"title"],[1,"webmap"],[0,";}\n\t\t\t   if(resp"]],"start1":2592,"start2":2592,"length1":37,"length2":38}]],"length":8443,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351890976243,"patch":[[{"diffs":[[0," \"false\""],[1," || configOptions.legend === false"],[0,"){\n     "]],"start1":3159,"start2":3159,"length1":16,"length2":50}]],"length":8477,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352134735031,"patch":[[{"diffs":[[0,"      $(\"#legend"],[-1,"Toggle"],[1,"Con"],[0,"\").hide();\n\t   }"]],"start1":3209,"start2":3209,"length1":38,"length2":35}]],"length":8474,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352227056385,"patch":[[{"diffs":[[0,"tchID();"],[1,"\n       \n       dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n       }"],[0,"\n\n\t   //"]],"start1":473,"start2":473,"length1":16,"length2":505}]],"length":8963,"saved":false}
{"contributors":[],"silentsave":true,"ts":1352241196106,"patch":[[{"diffs":[[0,"r: true,"],[1,"dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n         //Page Specific\n         dojo.forEach(dojo.query(\".legend\"),function(leg){\n             dojo.attr(leg,\"dir\",\"rtl\");\n         });\n         dojo.forEach(dojo.query(\".description\"),function(leg){\n             dojo.attr(leg,\"dir\",\"rtl\");\n         });\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n         //Page Specific\n         dojo.forEach(dojo.query(\".legend\"),function(leg){\n             dojo.attr(leg,\"dir\",\"ltr\");\n         });\n         dojo.forEach(dojo.query(\".description\"),function(leg){\n             dojo.attr(leg,\"dir\",\"ltr\");\n         });\n       }"],[0,"\n       "]],"start1":3855,"start2":3855,"length1":16,"length2":1001}]],"length":9948,"saved":false}
{"ts":1352241198267,"patch":[[{"diffs":[[0,"rue,"],[-1,"dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n         //Page Specific\n         dojo.forEach(dojo.query(\".legend\"),function(leg){\n             dojo.attr(leg,\"dir\",\"rtl\");\n         });\n         dojo.forEach(dojo.query(\".description\"),function(leg){\n             dojo.attr(leg,\"dir\",\"rtl\");\n         });\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n         //Page Specific\n         dojo.forEach(dojo.query(\".legend\"),function(leg){\n             dojo.attr(leg,\"dir\",\"ltr\");\n         });\n         dojo.forEach(dojo.query(\".description\"),function(leg){\n             dojo.attr(leg,\"dir\",\"ltr\");\n         });\n       }"],[0,"\n   "]],"start1":3859,"start2":3859,"length1":993,"length2":8}]],"length":8963,"saved":false}
{"ts":1352241205291,"patch":[[{"diffs":[[0,": true,\n"],[1,"           sliderStyle:\"small\",\n"],[0,"        "]],"start1":3856,"start2":3856,"length1":16,"length2":48}]],"length":8995,"saved":false}
{"ts":1352241443187,"patch":[[{"diffs":[[0,"e(\"esri."],[-1,"dijit.Legend"],[1,"layout"],[0,"\");\n  do"]],"start1":41,"start2":41,"length1":28,"length2":22},{"diffs":[[0,"e(\"esri."],[-1,"dijit.Scalebar"],[1,"widgets"],[0,"\");\n  do"]],"start1":72,"start2":72,"length1":30,"length2":23},{"diffs":[[0,"\");\n"],[-1,"  dojo.require(\"esri.IdentityManager\");\n  dojo.require(\"dijit.dijit\");\n  dojo.require(\"dijit.layout.BorderContainer\");\n  dojo.require(\"dijit.layout.ContentPane\");\n  dojo.require(\"dijit.layout.StackContainer\");\n"],[0,"  do"]],"start1":124,"start2":124,"length1":218,"length2":8}]],"length":8772,"saved":false}
{"ts":1352241548166,"patch":[[{"diffs":[[0,"rlObject"],[-1,"s"],[0,", i18n;\n"]],"start1":200,"start2":200,"length1":17,"length2":16}]],"length":8771,"saved":false}
{"contributors":[],"silentsave":true,"ts":1352306388670,"patch":[[{"diffs":[[1,"  dojo.provide(\"utilities.layout\");\n\n"],[0,"  dojo.require(\"esri.map\");\n"]],"start1":0,"start2":0,"length1":28,"length2":65},{"diffs":[[0,"is.utils\");\n"],[1,"  dojo.require(\"utilities.layout\");\n"],[0,"  dojo.requi"]],"start1":153,"start2":153,"length1":24,"length2":60}]],"length":8844,"saved":false}
{"ts":1352306419144,"patch":[[{"diffs":[[0,"ate\");\n\n"],[1,"  //Jquery Layout\n    $(document).ready(function(e) {\n      $(\"#legendToggle\").click(function(){\n    \tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });\n\n  utilities.layout = {};\n  dojo.mixin(utilities.layout,{\n\n"],[0,"\n     va"]],"start1":249,"start2":249,"length1":16,"length2":394}]],"length":9222,"saved":false}
{"ts":1352306421359,"patch":[[{"diffs":[[0,"ayout,{\n"],[1,"  }\n"],[0,"\n\n     v"]],"start1":626,"start2":626,"length1":16,"length2":20}]],"length":9226,"saved":false}
{"ts":1352306422805,"patch":[[{"diffs":[[0,"layout,{\n  }"],[1,")"],[0,"\n\n\n     var "]],"start1":625,"start2":625,"length1":24,"length2":25}]],"length":9227,"saved":false}
{"ts":1352306423612,"patch":[[{"diffs":[[0,"t,{\n  })"],[1,";"],[0,"\n\n\n     "]],"start1":630,"start2":630,"length1":16,"length2":17}]],"length":9228,"saved":false}
{"ts":1352308017659,"patch":[[{"diffs":[[0,"\");\n"],[-1,"  dojo.require(\"utilities.layout\");\n"],[0,"  do"]],"start1":161,"start2":161,"length1":44,"length2":8}]],"length":9192,"saved":false}
{"ts":1352308101002,"patch":[[{"diffs":[[0,";\n\t}"],[-1,"\n\n\t//Jquery Layout\n\t$(document).ready(function(e) {\n\t  $(\"#legendToggle\").click(function(){\n\t\tif ($(\"#legendDiv\").css('display')=='none'){\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.up);\n\t\t}\n\t\telse{\n\t\t  $(\"#legTogText\").html(i18n.viewer.legToggle.down);\n\t\t}\n\t\t$(\"#legendDiv\").slideToggle();\n\t  });\n    });"]],"start1":8878,"start2":8878,"length1":314,"length2":4}]],"length":8882,"saved":false}
{"ts":1352308115894,"patch":[[{"diffs":[[0,"    "],[-1,"var map, urlObject, i18n;"],[0,"\n\n\t "]],"start1":607,"start2":607,"length1":33,"length2":8}]],"length":8857,"saved":false}
{"ts":1352308117773,"patch":[[{"diffs":[[0,"ayout,{\n"],[1,"      \n"],[0,"  });\n\n\n"]],"start1":590,"start2":590,"length1":16,"length2":23}]],"length":8864,"saved":false}
{"ts":1352308118793,"patch":[[{"diffs":[[0,"\n      \n"],[1,"      \n"],[0,"  });\n\n\n"]],"start1":597,"start2":597,"length1":16,"length2":23}]],"length":8871,"saved":false}
{"ts":1352308119621,"patch":[[{"diffs":[[0,"ut,{\n      \n"],[1,"      var map, urlObject, i18n;\n"],[0,"      \n  });"]],"start1":593,"start2":593,"length1":24,"length2":56}]],"length":8903,"saved":false}
{"ts":1352308123349,"patch":[[{"diffs":[[0," \n      "],[-1,"var "],[0,"map, url"]],"start1":603,"start2":603,"length1":20,"length2":16}]],"length":8899,"saved":false}
{"ts":1352308126733,"patch":[[{"diffs":[[0,"     map"],[1,":null"],[0,", urlObj"]],"start1":606,"start2":606,"length1":16,"length2":21}]],"length":8904,"saved":false}
{"ts":1352308129718,"patch":[[{"diffs":[[0,"ap:null,"],[1,"\n     "],[0," urlObje"]],"start1":612,"start2":612,"length1":16,"length2":22}]],"length":8910,"saved":false}
{"ts":1352308132028,"patch":[[{"diffs":[[0,"rlObject"],[1,":nu"],[0,", i18n;\n"]],"start1":628,"start2":628,"length1":16,"length2":19}]],"length":8913,"saved":false}
{"ts":1352308133075,"patch":[[{"diffs":[[0,"bject:nu"],[1,"ll"],[0,", i18n;\n"]],"start1":631,"start2":631,"length1":16,"length2":18}]],"length":8915,"saved":false}
{"ts":1352308134676,"patch":[[{"diffs":[[0,"ct:null,"],[1,"\n     "],[0," i18n;\n "]],"start1":634,"start2":634,"length1":16,"length2":22}]],"length":8921,"saved":false}
{"ts":1352308136889,"patch":[[{"diffs":[[0,"    i18n"],[-1,";"],[1,":nu"],[0,"\n      \n"]],"start1":645,"start2":645,"length1":17,"length2":19}]],"length":8923,"saved":false}
{"ts":1352308137937,"patch":[[{"diffs":[[0," i18n:nu"],[1,"ll,"],[0,"\n      \n"]],"start1":648,"start2":648,"length1":16,"length2":19}]],"length":8926,"saved":false}
{"ts":1352308138904,"patch":[[{"diffs":[[0,"\n      \n"],[1,"      \n"],[0,"  });\n\n\n"]],"start1":659,"start2":659,"length1":16,"length2":23}]],"length":8933,"saved":false}
{"ts":1352308148682,"patch":[[{"diffs":[[0,"\n\n\t "],[-1,"function initMap() {\n       patchID();\n       \n       dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n       }\n\n\t   //get the localization strings\n  \t   i18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\n\n\t   dojo.byId('loading').innerHTML = i18n.viewer.loading.message;\n\t   dojo.byId('legTogText').innerHTML = i18n.viewer.legToggle.down;\n\n       if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\n         configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\n       }\n       esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);\n\n       if(!configOptions.sharingurl){\n         configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\n       }\n       esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\n\n       if(!configOptions.proxyurl){\n         configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\n       }\n\n       esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\n\n       esri.config.defaults.io.alwaysUseProxy = false;\n\n       urlObject = esri.urlToObject(document.location.href);\n       urlObject.query = urlObject.query || {};\n\n       if(urlObject.query.title){\n         configOptions.title = urlObject.query.title;\n       }\n       if(urlObject.query.subtitle){\n         configOptions.subtitle = urlObject.query.subtitle;\n       }\n\t   if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;\n       }\n       if(urlObject.query.webmap){\n         configOptions.webmap = urlObject.query.webmap;\n       }\n       if(urlObject.query.bingMapsKey){\n         configOptions.bingmapskey = urlObject.query.bingMapsKey;\n       }\n\n\t   \t   //is an appid specified - if so read json from there\n\t  if(configOptions.appid || (urlObject.query && urlObject.query.appid)){\n\t\tvar appid = configOptions.appid || urlObject.query.appid;\n\t\tvar requestHandle = esri.request({\n\t\t  url: configOptions.sharingurl + \"/\" + appid + \"/data\",\n\t\t  content: {f:\"json\"},\n\t\t  callbackParamName:\"callback\",\n\t\t  load: function(response){\n               if(response.values.webmap !== undefined){configOptions.webmap = response.values.webmap;}\n\t\t\t   if(response.values.title !== undefined){configOptions.title = response.values.title;}\n\t\t\t   if(response.values.subtitle !== undefined){configOptions.subtitle = response.values.subtitle;}\n\t\t\t   if(response.values.legend !== undefined){configOptions.legend = response.values.legend;}\n\n\t\t\t   createMap();\n\t\t  },\n\t\t  error: function(response){\n\t\t\tvar e = response.message;\n\t\t   alert(i18n.viewer.errors.createMap +  response.message);\n\t\t  }\n\t\t});\n\t\t }else{\n\t\t\tcreateMap();\n\t\t }\n\t }"],[0,"\n\n\t "]],"start1":687,"start2":687,"length1":3154,"length2":8}]],"length":5787,"saved":false}
{"ts":1352308152573,"patch":[[{"diffs":[[0,"ull,\n      \n"],[1,"      function initMap() {\n       patchID();\n       \n       dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n       }\n\n       //get the localization strings\n  \t   i18n = dojo.i18n.getLocalization(\"esriTemplate\",\"template\");\n\n\t   dojo.byId('loading').innerHTML = i18n.viewer.loading.message;\n\t   dojo.byId('legTogText').innerHTML = i18n.viewer.legToggle.down;\n\n       if(configOptions.geometryserviceurl && location.protocol === \"https:\"){\n         configOptions.geometryserviceurl = configOptions.geometryserviceurl.replace('http:','https:');\n       }\n       esri.config.defaults.geometryService = new esri.tasks.GeometryService(configOptions.geometryserviceurl);\n\n       if(!configOptions.sharingurl){\n         configOptions.sharingurl = location.protocol + '//' + location.host + \"/sharing/content/items\";\n       }\n       esri.arcgis.utils.arcgisUrl = configOptions.sharingurl;\n\n       if(!configOptions.proxyurl){\n         configOptions.proxyurl = location.protocol + '//' + location.host + \"/sharing/proxy\";\n       }\n\n       esri.config.defaults.io.proxyUrl =  configOptions.proxyurl;\n\n       esri.config.defaults.io.alwaysUseProxy = false;\n\n       urlObject = esri.urlToObject(document.location.href);\n       urlObject.query = urlObject.query || {};\n\n       if(urlObject.query.title){\n         configOptions.title = urlObject.query.title;\n       }\n       if(urlObject.query.subtitle){\n         configOptions.subtitle = urlObject.query.subtitle;\n       }\n\t   if(urlObject.query.legend){\n         configOptions.legend = urlObject.query.legend;\n       }\n       if(urlObject.query.webmap){\n         configOptions.webmap = urlObject.query.webmap;\n       }\n       if(urlObject.query.bingMapsKey){\n         configOptions.bingmapskey = urlObject.query.bingMapsKey;\n       }\n\n\t   \t   //is an appid specified - if so read json from there\n\t  if(configOptions.appid || (urlObject.query && urlObject.query.appid)){\n\t\tvar appid = configOptions.appid || urlObject.query.appid;\n\t\tvar requestHandle = esri.request({\n\t\t  url: configOptions.sharingurl + \"/\" + appid + \"/data\",\n\t\t  content: {f:\"json\"},\n\t\t  callbackParamName:\"callback\",\n\t\t  load: function(response){\n               if(response.values.webmap !== undefined){configOptions.webmap = response.values.webmap;}\n\t\t\t   if(response.values.title !== undefined){configOptions.title = response.values.title;}\n\t\t\t   if(response.values.subtitle !== undefined){configOptions.subtitle = response.values.subtitle;}\n\t\t\t   if(response.values.legend !== undefined){configOptions.legend = response.values.legend;}\n\n\t\t\t   createMap();\n\t\t  },\n\t\t  error: function(response){\n\t\t\tvar e = response.message;\n\t\t   alert(i18n.viewer.errors.createMap +  response.message);\n\t\t  }\n\t\t});\n\t\t }else{\n\t\t\tcreateMap();\n\t\t }\n\t }\n"],[0,"      \n  });"]],"start1":655,"start2":655,"length1":24,"length2":3180}]],"length":8943,"saved":false}
{"ts":1352308157162,"patch":[[{"diffs":[[0,"tion"],[-1," initMap"],[0,"() {"]],"start1":677,"start2":677,"length1":16,"length2":8}]],"length":8935,"saved":false}
{"ts":1352308159756,"patch":[[{"diffs":[[0,"      \n     "],[1," initMap:"],[0," function() "]],"start1":660,"start2":660,"length1":24,"length2":33}]],"length":8944,"saved":false}
{"ts":1352308167088,"patch":[[{"diffs":[[0,"\n       "],[1,"utilities.layout"],[0,"patchID("]],"start1":694,"start2":694,"length1":16,"length2":32}]],"length":8960,"saved":false}
{"ts":1352308168174,"patch":[[{"diffs":[[0,"s.layout"],[1,"."],[0,"patchID("]],"start1":710,"start2":710,"length1":16,"length2":17}]],"length":8961,"saved":false}
{"ts":1352308201923,"patch":[[{"diffs":[[0,"ayout\");"],[-1,"\n"],[1,"\r\n\r"],[0,"\n  dojo."]],"start1":27,"start2":27,"length1":17,"length2":19},{"diffs":[[0,"i.map\");"],[1,"\r"],[0,"\n  dojo."]],"start1":58,"start2":58,"length1":16,"length2":17},{"diffs":[[0,"ayout\");"],[1,"\r"],[0,"\n  dojo."]],"start1":90,"start2":90,"length1":16,"length2":17},{"diffs":[[0,"i.widgets\");"],[1,"\r"],[0,"\n  dojo.requ"]],"start1":119,"start2":119,"length1":24,"length2":25},{"diffs":[[0,"utils\");"],[1,"\r"],[0,"\n  dojo."]],"start1":161,"start2":161,"length1":16,"length2":17},{"diffs":[[0,"plate\");"],[-1,"\n"],[1,"\r\n\r"],[0,"\n  //Jqu"]],"start1":217,"start2":217,"length1":17,"length2":19},{"diffs":[[0,"y Layout"],[1,"\r"],[0,"\n    $(d"]],"start1":238,"start2":238,"length1":16,"length2":17},{"diffs":[[0,"unction(e) {"],[1,"\r"],[0,"\n      $(\"#l"]],"start1":271,"start2":271,"length1":24,"length2":25},{"diffs":[[0,"n(){"],[1,"\r"],[0,"\n    "],[-1,"\t"],[1,"    "],[0,"if ("]],"start1":323,"start2":323,"length1":14,"length2":18},{"diffs":[[0,"'none'){"],[1,"\r"],[0,"\n\t\t  $(\""]],"start1":373,"start2":373,"length1":16,"length2":17},{"diffs":[[0,"up);"],[1,"\r"],[0,"\n\t\t}"],[1,"\r"],[0,"\n\t\telse{"],[1,"\r"],[0,"\n\t\t "]],"start1":431,"start2":431,"length1":20,"length2":23},{"diffs":[[0,"e.down);"],[1,"\r"],[0,"\n\t\t}"],[1,"\r"],[0,"\n\t\t$(\"#l"]],"start1":497,"start2":497,"length1":20,"length2":22},{"diffs":[[0,"e();"],[1,"\r"],[0,"\n\t  });"],[1,"\r"],[0,"\n    });"],[-1,"\n"],[1,"\r\n\r"],[0,"\n  u"]],"start1":540,"start2":540,"length1":24,"length2":28},{"diffs":[[0,"ut = {};"],[1,"\r"],[0,"\n  dojo."]],"start1":581,"start2":581,"length1":16,"length2":17},{"diffs":[[0,"layout,{"],[-1,"\n      "],[1,"\r\n\r"],[0,"\n      m"]],"start1":614,"start2":614,"length1":23,"length2":19},{"diffs":[[0,"   map:null,"],[1,"\r"],[0,"\n      urlOb"]],"start1":629,"start2":629,"length1":24,"length2":25},{"diffs":[[0,"Object:null,"],[1,"\r"],[0,"\n      i18n:"]],"start1":652,"start2":652,"length1":24,"length2":25},{"diffs":[[0,"8n:null,"],[-1,"\n      "],[1,"\r\n\r"],[0,"\n      i"]],"start1":674,"start2":674,"length1":23,"length2":19},{"diffs":[[0,"initMap:"],[-1," "],[0,"function"]],"start1":692,"start2":692,"length1":17,"length2":16},{"diffs":[[0,"tion() {"],[1,"\r"],[0,"\n       "]],"start1":704,"start2":704,"length1":16,"length2":17},{"diffs":[[0,"D();"],[-1,"\n       \n       dojo.some([\"ar\",\"he\"], function(l){\n         if(dojo.locale.indexOf(l) !== -1){\n           configOptions.isRightToLeft = true;\n           return true;\n         }\n       });\n       var dirNode = document.getElementsByTagName(\"html\")[0];\n       if(configOptions.isRightToLeft){\n         dirNode.setAttribute(\"dir\",\"rtl\");\n         dojo.addClass( dirNode,\"esriRtl\");\n       }else{\n         dirNode.setAttribute(\"dir\",\"ltr\");\n         dojo.addClass(dirNode,\"esriLtr\");\n       }\n"],[1,"\r\n\r"],[0,"\n   "]],"start1":744,"start2":744,"length1":498,"length2":11},{"diffs":[[0," strings"],[1,"\r"],[0,"\n  \t   i"]],"start1":781,"start2":781,"length1":16,"length2":17},{"diffs":[[0,"plate\");"],[-1,"\n"],[1,"\r\n\r"],[0,"\n\t   doj"]],"start1":849,"start2":849,"length1":17,"length2":19},{"diffs":[[0,"message;"],[1,"\r"],[0,"\n\t   doj"]],"start1":918,"start2":918,"length1":16,"length2":17},{"diffs":[[0,"le.down;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":987,"start2":987,"length1":17,"length2":19},{"diffs":[[0,"ttps:\"){"],[1,"\r"],[0,"\n       "]],"start1":1069,"start2":1069,"length1":16,"length2":17},{"diffs":[[0,"ttps:');"],[1,"\r"],[0,"\n       "]],"start1":1174,"start2":1174,"length1":16,"length2":17},{"diffs":[[0,"ps:');\r\n       }"],[1,"\r"],[0,"\n       esri.con"]],"start1":1176,"start2":1176,"length1":32,"length2":33},{"diffs":[[0,"iceurl);"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":1297,"start2":1297,"length1":17,"length2":19},{"diffs":[[0,"sharingurl){"],[1,"\r"],[0,"\n         co"]],"start1":1334,"start2":1334,"length1":24,"length2":25},{"diffs":[[0,"/items\";"],[1,"\r"],[0,"\n       "]],"start1":1444,"start2":1444,"length1":16,"length2":17},{"diffs":[[0,"tems\";\r\n       }"],[1,"\r"],[0,"\n       esri.arc"]],"start1":1446,"start2":1446,"length1":32,"length2":33},{"diffs":[[0,".sharingurl;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       if(!"]],"start1":1514,"start2":1514,"length1":25,"length2":27},{"diffs":[[0,"oxyurl){"],[1,"\r"],[0,"\n       "]],"start1":1557,"start2":1557,"length1":16,"length2":17},{"diffs":[[0,"/proxy\";"],[1,"\r"],[0,"\n       "]],"start1":1653,"start2":1653,"length1":16,"length2":17},{"diffs":[[0,"roxy\";\r\n       }"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       esri.con"]],"start1":1655,"start2":1655,"length1":33,"length2":35},{"diffs":[[0,"roxyurl;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":1733,"start2":1733,"length1":17,"length2":19},{"diffs":[[0,"seProxy = false;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       urlObjec"]],"start1":1783,"start2":1783,"length1":33,"length2":35},{"diffs":[[0,"n.href);"],[1,"\r"],[0,"\n       "]],"start1":1855,"start2":1855,"length1":16,"length2":17},{"diffs":[[0,"y || {};"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":1904,"start2":1904,"length1":17,"length2":19},{"diffs":[[0,"uery.title){"],[1,"\r"],[0,"\n         co"]],"start1":1937,"start2":1937,"length1":24,"length2":25},{"diffs":[[0,"query.title;"],[1,"\r"],[0,"\n       }\n  "]],"start1":1992,"start2":1992,"length1":24,"length2":25},{"diffs":[[0,"title;\r\n       }"],[1,"\r"],[0,"\n       if(urlOb"]],"start1":1998,"start2":1998,"length1":32,"length2":33},{"diffs":[[0,"btitle){"],[1,"\r"],[0,"\n       "]],"start1":2044,"start2":2044,"length1":16,"length2":17},{"diffs":[[0,"ubtitle;"],[1,"\r"],[0,"\n       "]],"start1":2105,"start2":2105,"length1":16,"length2":17},{"diffs":[[0,"       }"],[1,"\r"],[0,"\n\t   if("]],"start1":2115,"start2":2115,"length1":16,"length2":17},{"diffs":[[0,"legend){"],[1,"\r"],[0,"\n       "]],"start1":2148,"start2":2148,"length1":16,"length2":17},{"diffs":[[0,".legend;"],[1,"\r"],[0,"\n       "]],"start1":2205,"start2":2205,"length1":16,"length2":17},{"diffs":[[0,"egend;\r\n       }"],[1,"\r"],[0,"\n       if(urlOb"]],"start1":2207,"start2":2207,"length1":32,"length2":33},{"diffs":[[0,"webmap){"],[1,"\r"],[0,"\n       "]],"start1":2251,"start2":2251,"length1":16,"length2":17},{"diffs":[[0,".webmap;"],[1,"\r"],[0,"\n       "]],"start1":2308,"start2":2308,"length1":16,"length2":17},{"diffs":[[0,"ebmap;\r\n       }"],[1,"\r"],[0,"\n       if(urlOb"]],"start1":2310,"start2":2310,"length1":32,"length2":33},{"diffs":[[0,"apsKey){"],[1,"\r"],[0,"\n       "]],"start1":2359,"start2":2359,"length1":16,"length2":17},{"diffs":[[0,"MapsKey;"],[1,"\r"],[0,"\n       "]],"start1":2426,"start2":2426,"length1":16,"length2":17},{"diffs":[[0,"y;\r\n       }"],[-1,"\n"],[1,"\r\n\r"],[0,"\n\t   \t   //i"]],"start1":2432,"start2":2432,"length1":25,"length2":27},{"diffs":[[0,"om there"],[1,"\r"],[0,"\n\t  if(c"]],"start1":2500,"start2":2500,"length1":16,"length2":17},{"diffs":[[0,"appid)){"],[1,"\r"],[0,"\n\t\tvar a"]],"start1":2575,"start2":2575,"length1":16,"length2":17},{"diffs":[[0,"y.appid;"],[1,"\r"],[0,"\n\t\tvar r"]],"start1":2636,"start2":2636,"length1":16,"length2":17},{"diffs":[[0,"equest({"],[1,"\r"],[0,"\n\t\t  url"]],"start1":2674,"start2":2674,"length1":16,"length2":17},{"diffs":[[0,"\"/data\","],[1,"\r"],[0,"\n\t\t  con"]],"start1":2734,"start2":2734,"length1":16,"length2":17},{"diffs":[[0,"\"json\"},"],[1,"\r"],[0,"\n\t\t  cal"]],"start1":2760,"start2":2760,"length1":16,"length2":17},{"diffs":[[0,"llback\","],[1,"\r"],[0,"\n\t\t  loa"]],"start1":2795,"start2":2795,"length1":16,"length2":17},{"diffs":[[0,"n(response){"],[1,"\r"],[0,"\n           "]],"start1":2822,"start2":2822,"length1":24,"length2":25},{"diffs":[[0,"webmap;}"],[1,"\r"],[0,"\n\t\t\t   i"]],"start1":2931,"start2":2931,"length1":16,"length2":17},{"diffs":[[0,"lues.title;}"],[1,"\r"],[0,"\n\t\t\t   if(re"]],"start1":3020,"start2":3020,"length1":24,"length2":25},{"diffs":[[0,"btitle;}"],[1,"\r"],[0,"\n\t\t\t   i"]],"start1":3126,"start2":3126,"length1":16,"length2":17},{"diffs":[[0,"nd;}"],[-1,"\n"],[1,"\r\n\r"],[0,"\n\t\t\t   "],[1,"utilities.layout."],[0,"crea"]],"start1":3226,"start2":3226,"length1":16,"length2":35},{"diffs":[[0,"p();"],[1,"\r"],[0,"\n\t\t  },"],[1,"\r"],[0,"\n\t\t "]],"start1":3265,"start2":3265,"length1":15,"length2":17},{"diffs":[[0,"sponse){"],[1,"\r"],[0,"\n\t\t\tvar "]],"start1":3301,"start2":3301,"length1":16,"length2":17},{"diffs":[[0,"message;"],[1,"\r"],[0,"\n\t\t   al"]],"start1":3331,"start2":3331,"length1":16,"length2":17},{"diffs":[[0,"ge);"],[1,"\r"],[0,"\n\t\t  }"],[1,"\r"],[0,"\n\t\t});"],[1,"\r"],[0,"\n\t\t "]],"start1":3398,"start2":3398,"length1":20,"length2":23},{"diffs":[[0,"\t }else{"],[1,"\r"],[0,"\n\t\t\t"],[1,"utilities.layout."],[0,"createMa"]],"start1":3419,"start2":3419,"length1":20,"length2":38},{"diffs":[[0,"p();"],[1,"\r"],[0,"\n\t\t }"],[1,"\r"],[0,"\n\t }"],[-1,"\n      \n  });\n\n\n     \n\n\t \n\n\t function createMap(){\n\n\t"],[1,",\r\n\r\n     createMap: function(){\r\n\r\n    "],[0,"   i"]],"start1":3457,"start2":3457,"length1":70,"length2":59},{"diffs":[[0," false){"],[1,"\r"],[0,"\n       "]],"start1":3579,"start2":3579,"length1":16,"length2":17},{"diffs":[[0,"e();"],[1,"\r"],[0,"\n\t   }"],[-1,"\n"],[1,"\r\n\r"],[0,"\n\t  "]],"start1":3619,"start2":3619,"length1":15,"length2":18},{"diffs":[[0,"\"map\", {"],[1,"\r"],[0,"\n       "]],"start1":3706,"start2":3706,"length1":16,"length2":17},{"diffs":[[0,"tions: {"],[1,"\r"],[0,"\n       "]],"start1":3730,"start2":3730,"length1":16,"length2":17},{"diffs":[[0,"r: true,"],[1,"\r"],[0,"\n       "]],"start1":3756,"start2":3756,"length1":16,"length2":17},{"diffs":[[0,"\"small\","],[1,"\r"],[0,"\n       "]],"start1":3789,"start2":3789,"length1":16,"length2":17},{"diffs":[[0," nav: false,"],[1,"\r"],[0,"\n           "]],"start1":3809,"start2":3809,"length1":24,"length2":25},{"diffs":[[0,"180:true"],[1,"\r"],[0,"\n       "]],"start1":3844,"start2":3844,"length1":16,"length2":17},{"diffs":[[0,"      },"],[1,"\r"],[0,"\n       "]],"start1":3857,"start2":3857,"length1":16,"length2":17},{"diffs":[[0,"s:false,"],[1,"\r"],[0,"\n       "]],"start1":3887,"start2":3887,"length1":16,"length2":17},{"diffs":[[0,"gmapskey"],[1,"\r"],[0,"\n       "]],"start1":3936,"start2":3936,"length1":16,"length2":17},{"diffs":[[0,"skey\r\n       });"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       mapDefer"]],"start1":3940,"start2":3940,"length1":33,"length2":35},{"diffs":[[0,"ponse) {"],[-1,"\n"],[1,"\r\n\r"],[0,"\n\t\t docu"]],"start1":4004,"start2":4004,"length1":17,"length2":19},{"diffs":[[0,"tem.title || \"\";"],[1,"\r"],[0,"\n         dojo.b"]],"start1":4077,"start2":4077,"length1":32,"length2":33},{"diffs":[[0,"e || \"\";"],[1,"\r"],[0,"\n       "]],"start1":4184,"start2":4184,"length1":16,"length2":17},{"diffs":[[0,"t || \"\";"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":4291,"start2":4291,"length1":17,"length2":19},{"diffs":[[0,"nse.map;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n\t\t dojo"]],"start1":4323,"start2":4323,"length1":17,"length2":19},{"diffs":[[0,"ateEnd\","],[1,"utilities.layout."],[0,"hideLoad"]],"start1":4361,"start2":4361,"length1":16,"length2":33},{"diffs":[[0,"Loader);"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":4390,"start2":4390,"length1":17,"length2":19},{"diffs":[[0,"ionalLayers;"],[1,"\r"],[0,"\n         if"]],"start1":4457,"start2":4457,"length1":24,"length2":25},{"diffs":[[0,"loaded){"],[1,"\r"],[0,"\n       "]],"start1":4487,"start2":4487,"length1":16,"length2":17},{"diffs":[[0,"d){\r\n           "],[1,"utilities.layout."],[0,"initUI(layers);\n"]],"start1":4492,"start2":4492,"length1":32,"length2":49},{"diffs":[[0,".initUI(layers);"],[1,"\r"],[0,"\n         }\n    "]],"start1":4524,"start2":4524,"length1":32,"length2":33},{"diffs":[[0,"rs);\r\n         }"],[1,"\r"],[0,"\n         else{\n"]],"start1":4536,"start2":4536,"length1":32,"length2":33},{"diffs":[[0,"\r\n         else{"],[1,"\r"],[0,"\n           dojo"]],"start1":4552,"start2":4552,"length1":32,"length2":33},{"diffs":[[0,"ction(){"],[1,"\r"],[0,"\n       "]],"start1":4610,"start2":4610,"length1":16,"length2":17},{"diffs":[[0,"            "],[1,"utilities.layout."],[0,"initUI(layer"]],"start1":4621,"start2":4621,"length1":24,"length2":41},{"diffs":[[0,"layers);"],[1,"\r"],[0,"\n       "]],"start1":4657,"start2":4657,"length1":16,"length2":17},{"diffs":[[0,"\r\n           });"],[1,"\r"],[0,"\n         }\n    "]],"start1":4665,"start2":4665,"length1":32,"length2":33},{"diffs":[[0," });\r\n         }"],[1,"\r"],[0,"\n         //resi"]],"start1":4677,"start2":4677,"length1":32,"length2":33},{"diffs":[[0," resizes"],[1,"\r"],[0,"\n       "]],"start1":4737,"start2":4737,"length1":16,"length2":17},{"diffs":[[0,"resize);"],[1,"\r"],[0,"\n       "]],"start1":4806,"start2":4806,"length1":16,"length2":17},{"diffs":[[0,"ze);\r\n       });"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       mapDefer"]],"start1":4810,"start2":4810,"length1":33,"length2":35},{"diffs":[[0,"on (error) {"],[1,"\r"],[0,"\n         al"]],"start1":4866,"start2":4866,"length1":24,"length2":25},{"diffs":[[0,"ssage));"],[1,"\r"],[0,"\n       "]],"start1":4946,"start2":4946,"length1":16,"length2":17},{"diffs":[[0," });"],[-1,"\n"],[1,"\r\n\r"],[0,"\n     }"],[-1,"\n\n"],[1,",\r\n\r"],[0,"\n    "],[1," initUI:"],[0," fun"]],"start1":4962,"start2":4962,"length1":23,"length2":35},{"diffs":[[0,"function"],[-1," initUI"],[0,"(layers)"]],"start1":4994,"start2":4994,"length1":23,"length2":16},{"diffs":[[0,"nction(layers) {"],[1,"\r"],[0,"\n       //add ch"]],"start1":4996,"start2":4996,"length1":32,"length2":33},{"diffs":[[0,"or popup"],[1,"\r"],[0,"\n       "]],"start1":5041,"start2":5041,"length1":16,"length2":17},{"diffs":[[0,"hrome\");"],[1,"\r"],[0,"\n       "]],"start1":5098,"start2":5098,"length1":16,"length2":17},{"diffs":[[0,"scalebar"],[1,"\r"],[0,"\n       "]],"start1":5125,"start2":5125,"length1":16,"length2":17},{"diffs":[[0,"alebar({"],[1,"\r"],[0,"\n       "]],"start1":5174,"start2":5174,"length1":16,"length2":17},{"diffs":[[0,"   map: map,"],[1,"\r"],[0,"\n         sc"]],"start1":5190,"start2":5190,"length1":24,"length2":25},{"diffs":[[0," english"],[1,"\r"],[0,"\n       "]],"start1":5268,"start2":5268,"length1":16,"length2":17},{"diffs":[[0,"lish\r\n       });"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       var laye"]],"start1":5272,"start2":5272,"length1":33,"length2":35},{"diffs":[[0,"rInfo = "],[1,"utilities.layout."],[0,"buildLay"]],"start1":5307,"start2":5307,"length1":16,"length2":33},{"diffs":[[0,"layers);"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":5348,"start2":5348,"length1":17,"length2":19},{"diffs":[[0,"th > 0){"],[1,"\r"],[0,"\n       "]],"start1":5384,"start2":5384,"length1":16,"length2":17},{"diffs":[[0,"Legend({"],[1,"\r"],[0,"\n       "]],"start1":5436,"start2":5436,"length1":16,"length2":17},{"diffs":[[0,"map:map,"],[1,"\r"],[0,"\n       "]],"start1":5457,"start2":5457,"length1":16,"length2":17},{"diffs":[[0,"ayerInfo"],[1,"\r"],[0,"\n       "]],"start1":5490,"start2":5490,"length1":16,"length2":17},{"diffs":[[0,"ndDiv\");"],[1,"\r"],[0,"\n       "]],"start1":5516,"start2":5516,"length1":16,"length2":17},{"diffs":[[0,"artup();"],[1,"\r"],[0,"\n       "]],"start1":5549,"start2":5549,"length1":16,"length2":17},{"diffs":[[0,"tup();\r\n       }"],[1,"\r"],[0,"\n       else{\n  "]],"start1":5551,"start2":5551,"length1":32,"length2":33},{"diffs":[[0,"   else{"],[1,"\r"],[0,"\n       "]],"start1":5573,"start2":5573,"length1":16,"length2":17},{"diffs":[[0,".hide();"],[1,"\r"],[0,"\n       "]],"start1":5610,"start2":5610,"length1":16,"length2":17},{"diffs":[[0,"   }"],[1,"\r"],[0,"\n     }"],[-1,"\n\n"],[1,",\r\n\r\n     "],[0,"//bu"]],"start1":5624,"start2":5624,"length1":17,"length2":26},{"diffs":[[0,"gend"],[1,"\r"],[0,"\n  "],[-1,"function "],[0,"buil"]],"start1":5691,"start2":5691,"length1":20,"length2":12},{"diffs":[[0," buildLayersList"],[1,": function"],[0,"(layers){\n\n //la"]],"start1":5698,"start2":5698,"length1":32,"length2":42},{"diffs":[[0,"layers){"],[-1,"\n"],[1,"\r\n\r"],[0,"\n //laye"]],"start1":5725,"start2":5725,"length1":17,"length2":19},{"diffs":[[0,"lLayers;"],[1,"\r"],[0,"\n  var l"]],"start1":5793,"start2":5793,"length1":16,"length2":17},{"diffs":[[0,"os = [];"],[1,"\r"],[0,"\n  dojo."]],"start1":5817,"start2":5817,"length1":16,"length2":17},{"diffs":[[0,"er, index) {"],[1,"\r"],[0,"\n      var l"]],"start1":5866,"start2":5866,"length1":24,"length2":25},{"diffs":[[0,"fo = {};"],[1,"\r"],[0,"\n      i"]],"start1":5897,"start2":5897,"length1":16,"length2":17},{"diffs":[[0,"\"CSV\") {"],[1,"\r"],[0,"\n       "]],"start1":5965,"start2":5965,"length1":16,"length2":17},{"diffs":[[0," === true) {"],[1,"\r"],[0,"\n           "]],"start1":6024,"start2":6024,"length1":24,"length2":25},{"diffs":[[0,"cMapLayer) {"],[1,"\r"],[0,"\n           "]],"start1":6109,"start2":6109,"length1":24,"length2":25},{"diffs":[[0,"!== false) {"],[1,"\r"],[0,"\n           "]],"start1":6163,"start2":6163,"length1":24,"length2":25},{"diffs":[[0,"   layerInfo = {"],[1,"\r"],[0,"\n               "]],"start1":6192,"start2":6192,"length1":32,"length2":33},{"diffs":[[0,"yer.layerObject,"],[1,"\r"],[0,"\n               "]],"start1":6248,"start2":6248,"length1":32,"length2":33},{"diffs":[[0," mapLayer.title,"],[1,"\r"],[0,"\n               "]],"start1":6296,"start2":6296,"length1":32,"length2":33},{"diffs":[[0,"mbol\": false"],[1,"\r"],[0,"\n           "]],"start1":6346,"start2":6346,"length1":24,"length2":25},{"diffs":[[0,"              };"],[1,"\r"],[0,"\n               "]],"start1":6364,"start2":6364,"length1":32,"length2":33},{"diffs":[[0,"ength > 1) {"],[1,"\r"],[0,"\n           "]],"start1":6439,"start2":6439,"length1":24,"length2":25},{"diffs":[[0,"on.name;"],[1,"\r"],[0,"\n       "]],"start1":6526,"start2":6526,"length1":16,"length2":17},{"diffs":[[0,"               }"],[1,"\r"],[0,"\n               "]],"start1":6539,"start2":6539,"length1":32,"length2":33},{"diffs":[[0,"(layerInfo);"],[1,"\r"],[0,"\n           "]],"start1":6590,"start2":6590,"length1":24,"length2":25},{"diffs":[[0,"\n              }"],[1,"\r"],[0,"\n            });"]],"start1":6603,"start2":6603,"length1":32,"length2":33},{"diffs":[[0,"\n            });"],[1,"\r"],[0,"\n          }\n   "]],"start1":6620,"start2":6620,"length1":32,"length2":33},{"diffs":[[0,"\n          }"],[1,"\r"],[0,"\n      } els"]],"start1":6637,"start2":6637,"length1":24,"length2":25},{"diffs":[[0,"bject) {"],[1,"\r"],[0,"\n      v"]],"start1":6716,"start2":6716,"length1":16,"length2":17},{"diffs":[[0,"= false;"],[1,"\r"],[0,"\n      i"]],"start1":6754,"start2":6754,"length1":16,"length2":17},{"diffs":[[0,"iceLayer)) {"],[1,"\r"],[0,"\n        sho"]],"start1":6952,"start2":6952,"length1":24,"length2":25},{"diffs":[[0," = true;"],[1,"\r"],[0,"\n      }"],[1,"\r"],[0,"\n      l"]],"start1":6991,"start2":6991,"length1":24,"length2":26},{"diffs":[[0,"Info = {"],[1,"\r"],[0,"\n       "]],"start1":7021,"start2":7021,"length1":16,"length2":17},{"diffs":[[0,"rObject,"],[1,"\r"],[0,"\n       "]],"start1":7061,"start2":7061,"length1":16,"length2":17},{"diffs":[[0,"r.title,"],[1,"\r"],[0,"\n       "]],"start1":7095,"start2":7095,"length1":16,"length2":17},{"diffs":[[0,"ltSymbol"],[1,"\r"],[0,"\n      }"]],"start1":7139,"start2":7139,"length1":16,"length2":17},{"diffs":[[0,"ol\r\n      };"],[1,"\r"],[0,"\n        //d"]],"start1":7145,"start2":7145,"length1":24,"length2":25},{"diffs":[[0,"is false"],[1,"\r"],[0,"\n       "]],"start1":7227,"start2":7227,"length1":16,"length2":17},{"diffs":[[0,"ayers) {"],[1,"\r"],[0,"\n       "]],"start1":7259,"start2":7259,"length1":16,"length2":17},{"diffs":[[0,"function (lyr) {"],[1,"\r"],[0,"\n               "]],"start1":7336,"start2":7336,"length1":32,"length2":33},{"diffs":[[0," false);"],[1,"\r"],[0,"\n       "]],"start1":7396,"start2":7396,"length1":16,"length2":17},{"diffs":[[0," (lyr) {"],[1,"\r"],[0,"\n       "]],"start1":7430,"start2":7430,"length1":16,"length2":17},{"diffs":[[0," lyr.id;"],[1,"\r"],[0,"\n       "]],"start1":7462,"start2":7462,"length1":16,"length2":17},{"diffs":[[0,"     });"],[1,"\r"],[0,"\n       "]],"start1":7479,"start2":7479,"length1":16,"length2":17},{"diffs":[[0,"ength) {"],[1,"\r"],[0,"\n       "]],"start1":7517,"start2":7517,"length1":16,"length2":17},{"diffs":[[0,"eLayers;"],[1,"\r"],[0,"\n       "]],"start1":7569,"start2":7569,"length1":16,"length2":17},{"diffs":[[0,";\r\n            }"],[1,"\r"],[0,"\n        }\n     "]],"start1":7576,"start2":7576,"length1":32,"length2":33},{"diffs":[[0,"    }\r\n        }"],[1,"\r"],[0,"\n        layerIn"]],"start1":7587,"start2":7587,"length1":32,"length2":33},{"diffs":[[0,"fo);"],[1,"\r"],[0,"\n    }"],[1,"\r"],[0,"\n  });"],[1,"\r"],[0,"\n  r"]],"start1":7636,"start2":7636,"length1":20,"length2":23},{"diffs":[[0,"fos;"],[1,"\r"],[0,"\n  }"],[-1,"\n\n\n    "],[1,",\r\n\r\n  patchID:"],[0," fun"]],"start1":7672,"start2":7672,"length1":19,"length2":28},{"diffs":[[0,"function"],[-1," patchID"],[0,"() {  //"]],"start1":7697,"start2":7697,"length1":24,"length2":16},{"diffs":[[0,"cgis.com"],[1,"\r"],[0,"\n       "]],"start1":7748,"start2":7748,"length1":16,"length2":17},{"diffs":[[0,"ource) {"],[1,"\r"],[0,"\n       "]],"start1":7809,"start2":7809,"length1":16,"length2":17},{"diffs":[[0," domains"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":7874,"start2":7874,"length1":17,"length2":19},{"diffs":[[0," j = -1;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":7904,"start2":7904,"length1":17,"length2":19},{"diffs":[[0,", idx) {"],[1,"\r"],[0,"\n       "]],"start1":7968,"start2":7968,"length1":16,"length2":17},{"diffs":[[0,"t(server)) {"],[1,"\r"],[0,"\n           "]],"start1":8019,"start2":8019,"length1":24,"length2":25},{"diffs":[[0,"    i = idx;"],[1,"\r"],[0,"\n         }\n"]],"start1":8040,"start2":8040,"length1":24,"length2":25},{"diffs":[[0,"idx;\r\n         }"],[1,"\r"],[0,"\n         if (j "]],"start1":8048,"start2":8048,"length1":32,"length2":33},{"diffs":[[0,"urce)) {"],[1,"\r"],[0,"\n       "]],"start1":8113,"start2":8113,"length1":16,"length2":17},{"diffs":[[0,"j = idx;"],[1,"\r"],[0,"\n       "]],"start1":8134,"start2":8134,"length1":16,"length2":17},{"diffs":[[0,"idx;\r\n         }"],[1,"\r"],[0,"\n       });\n\n   "]],"start1":8138,"start2":8138,"length1":32,"length2":33},{"diffs":[[0,"     });"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":8158,"start2":8158,"length1":17,"length2":19},{"diffs":[[0,"= false;"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":8188,"start2":8188,"length1":17,"length2":19},{"diffs":[[0,"&& j > -1) {"],[1,"\r"],[0,"\n         if"]],"start1":8218,"start2":8218,"length1":24,"length2":25},{"diffs":[[0," 0 || i === 4) {"],[1,"\r"],[0,"\n           if ("]],"start1":8250,"start2":8250,"length1":32,"length2":33},{"diffs":[[0,"=== 4) {"],[1,"\r"],[0,"\n       "]],"start1":8296,"start2":8296,"length1":16,"length2":17},{"diffs":[[0,"  retVal = true;"],[1,"\r"],[0,"\n           }\n  "]],"start1":8317,"start2":8317,"length1":32,"length2":33},{"diffs":[[0,"e;\r\n           }"],[1,"\r"],[0,"\n         }\n    "]],"start1":8331,"start2":8331,"length1":32,"length2":33},{"diffs":[[0,"   }\r\n         }"],[1,"\r"],[0,"\n         else i"]],"start1":8343,"start2":8343,"length1":32,"length2":33},{"diffs":[[0,"=== 1) {"],[1,"\r"],[0,"\n       "]],"start1":8381,"start2":8381,"length1":16,"length2":17},{"diffs":[[0," 1 || j === 2) {"],[1,"\r"],[0,"\n             re"]],"start1":8411,"start2":8411,"length1":32,"length2":33},{"diffs":[[0,"  retVal = true;"],[1,"\r"],[0,"\n           }\n  "]],"start1":8440,"start2":8440,"length1":32,"length2":33},{"diffs":[[0,"e;\r\n           }"],[1,"\r"],[0,"\n         }\n    "]],"start1":8454,"start2":8454,"length1":32,"length2":33},{"diffs":[[0,"   }\r\n         }"],[1,"\r"],[0,"\n         else i"]],"start1":8466,"start2":8466,"length1":32,"length2":33},{"diffs":[[0,"e if (i === 2) {"],[1,"\r"],[0,"\n           if ("]],"start1":8496,"start2":8496,"length1":32,"length2":33},{"diffs":[[0,"=== 2) {"],[1,"\r"],[0,"\n       "]],"start1":8531,"start2":8531,"length1":16,"length2":17},{"diffs":[[0,"  retVal = true;"],[1,"\r"],[0,"\n           }\n  "]],"start1":8552,"start2":8552,"length1":32,"length2":33},{"diffs":[[0,"e;\r\n           }"],[1,"\r"],[0,"\n         }\n    "]],"start1":8566,"start2":8566,"length1":32,"length2":33},{"diffs":[[0,"   }\r\n         }"],[1,"\r"],[0,"\n         else i"]],"start1":8578,"start2":8578,"length1":32,"length2":33},{"diffs":[[0,"e if (i === 3) {"],[1,"\r"],[0,"\n           if ("]],"start1":8608,"start2":8608,"length1":32,"length2":33},{"diffs":[[0,"=== 3) {"],[1,"\r"],[0,"\n       "]],"start1":8643,"start2":8643,"length1":16,"length2":17},{"diffs":[[0," = true;"],[1,"\r"],[0,"\n       "]],"start1":8672,"start2":8672,"length1":16,"length2":17},{"diffs":[[0,"e;\r\n           }"],[1,"\r"],[0,"\n         }\n    "]],"start1":8678,"start2":8678,"length1":32,"length2":33},{"diffs":[[0,"       }"],[1,"\r"],[0,"\n       "]],"start1":8698,"start2":8698,"length1":16,"length2":17},{"diffs":[[0,"       }"],[-1,"\n"],[1,"\r\n\r"],[0,"\n       "]],"start1":8708,"start2":8708,"length1":17,"length2":19},{"diffs":[[0,"Val;"],[1,"\r"],[0,"\n     };"],[1,"\r"],[0,"\n    }"],[-1,"\n\n\tfunction hideLoader(){\n\t"],[1,",\r\n\r\n    hideLoader:function(){\r\n    "],[0,"  $("]],"start1":8737,"start2":8737,"length1":49,"length2":61},{"diffs":[[0,"e();"],[1,"\r"],[0,"\n\t}"],[1,"\r\n\r\n\r\n  });"]],"start1":8816,"start2":8816,"length1":7,"length2":19}]],"length":8835,"saved":false}
